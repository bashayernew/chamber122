<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Chamber122 - Discover Amazing MSMEs in Kuwait</title>
  <meta name="description" content="Search, explore, and connect with businesses shaping Kuwait's future. Join Chamber122's directory of local MSMEs.">
  <!-- Global Supabase Client -->
  <script type="module" src="/public/js/supabase-client.global.js?v=3"></script>
  
  <!-- Header Auth -->
  <link rel="stylesheet" href="/css/header.css?v=1">
  <script type="module" src="/public/js/header-auth-slot.js"></script>
  <link rel="stylesheet" href="css/style.css?v=17">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">
      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link active" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn" data-testid="lang-switch-en">EN</button> |
          <button data-lang="ar" class="lang-btn" data-testid="lang-switch-ar">AR</button>
        </span>
        <!-- Auth slot for session-aware header -->
        <span id="auth-slot">
          <a class="btn" href="/auth.html">Login</a>
          <a class="btn primary" href="/auth.html#signup">Sign Up & Get Listed</a>
        </span>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link" data-i18n="nav.home">Home</a>
      <a href="directory.html" class="mobile-link" data-i18n="nav.directory">Directory</a>
      <a href="events.html" class="mobile-link" data-i18n="nav.events">Events</a>
      <a href="bulletin.html" class="mobile-link" data-i18n="nav.bulletin">Bulletin</a>
      <a href="about.html" class="mobile-link" data-i18n="nav.about">About</a>
      <a href="contact.html" class="mobile-link" data-i18n="nav.contact">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        <span data-i18n="common.myBusiness">My Business</span>
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        <span data-i18n="common.myActivities">My Activities</span>
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        <span data-i18n="common.adminPanel">Admin Panel</span>
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        <span data-i18n="cta.login">Login</span>
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        <span data-i18n="cta.signup">Sign Up & Get Listed</span>
      </a>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <div class="chamber-header">
        <h1 class="chamber-title" data-i18n="hero.chamberTitle">Chamber122</h1>
      </div>
      <h2 class="hero-main-title" data-i18n="hero.title">Unite. Promote. Grow. Together.</h2>
      <p class="hero-subtitle" data-i18n="hero.subtitle">Empowering Kuwait's MSMEs through community, collaboration, and shared success. Join Chamber 122 and unlock your business potential.</p>
      
      <!-- Quick Search Bar -->
      <div class="quick-search-container">
        <h3 data-i18n="search.findLocal">Find Local MSMEs</h3>
        <div class="quick-search-bar">
          <div class="search-group">
            <input type="text" id="quick-business-name" class="search-input" placeholder-i18n data-i18n="search.namePh" placeholder="Business name...">
          </div>
          <div class="search-group">
            <select id="quick-category" class="search-input">
              <option value="" data-i18n="search.allCategories">All Categories</option>
              <option value="food" data-i18n="search.categories.food">Food & Beverage</option>
              <option value="fashion" data-i18n="search.categories.fashion">Fashion & Beauty</option>
              <option value="cleaning" data-i18n="search.categories.cleaning">Cleaning Services</option>
              <option value="tech" data-i18n="search.categories.tech">Technology</option>
              <option value="home" data-i18n="search.categories.home">Home Services</option>
            </select>
          </div>
          <div class="search-group">
            <select id="quick-area" class="search-input">
              <option value="" data-i18n="search.allAreas">All Areas</option>
              <option value="kuwait-city">Kuwait City</option>
              <option value="hawally">Hawally</option>
              <option value="farwaniya">Farwaniya</option>
              <option value="jahra">Jahra</option>
              <option value="ahmadi">Ahmadi</option>
            </select>
          </div>
          <button class="search-btn" onclick="performQuickSearch()">
            <i class="fas fa-search"></i> <span data-i18n="search.btn">Search</span>
          </button>
        </div>
        <p class="search-note" data-i18n="search.browseAll">Or <a href="directory.html" class="text-link">browse all MSMEs</a></p>
      </div>
    </div>
  </section>

  <!-- Featured MSMEs Section -->
  <section class="featured-section">
    <div class="section-header">
      <h2 class="section-title" data-i18n="sections.featured">Featured This Week</h2>
      <p class="section-subtitle" data-i18n="sections.featuredSubtitle">New businesses joining our community</p>
    </div>
    
    <div class="featured-carousel">
      <a href="get-listed.html" class="featured-card">
        <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=200&fit=crop" alt="The Kuwaiti Chef">
        <h3>The Kuwaiti Chef</h3>
        <div class="category">Food & Beverage</div>
        <div class="tag">New</div>
        <div class="explore-btn">Get Listed</div>
      </a>
      
      <a href="get-listed.html" class="featured-card">
        <img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=200&fit=crop" alt="Desert Blossoms">
        <h3>Desert Blossoms</h3>
        <div class="category">Fashion & Beauty</div>
        <div class="tag">New</div>
        <div class="explore-btn">Get Listed</div>
      </a>
      
      <a href="get-listed.html" class="featured-card">
        <img src="https://images.unsplash.com/photo-1581578731548-c64695cc6952?w=400&h=200&fit=crop" alt="FixIt Fast">
        <h3>FixIt Fast</h3>
        <div class="category">Home Services</div>
        <div class="tag">New</div>
        <div class="explore-btn">Get Listed</div>
      </a>
      
      <a href="get-listed.html" class="featured-card">
        <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=200&fit=crop" alt="Sparkle Clean">
        <h3>Sparkle Clean</h3>
        <div class="category">Cleaning Services</div>
        <div class="tag">New</div>
        <div class="explore-btn">Get Listed</div>
      </a>
      
      <a href="get-listed.html" class="featured-card">
        <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&h=200&fit=crop" alt="Tech Solutions KW">
        <h3>Tech Solutions KW</h3>
        <div class="category">Technology</div>
        <div class="tag">New</div>
        <div class="explore-btn">Get Listed</div>
      </a>
    </div>
  </section>

  <!-- Upcoming Events Section -->
  <section class="event-highlight">
    <div class="section-header">
      <h2 class="section-title" data-i18n="sections.thisWeekEvent">Upcoming Events</h2>
      <p class="section-subtitle" data-i18n="sections.thisWeekEventSubtitle">Don't miss out on the latest community happenings</p>
    </div>
    
    <div id="upcoming-events-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px;">
      <!-- Dynamic events will be loaded here -->
      <div style="text-align: center; padding: 40px; color: #aaa; grid-column: 1 / -1;">
        <i class="fas fa-calendar-alt" style="font-size: 48px; margin-bottom: 16px; display: block;"></i>
        <h3>Loading upcoming events...</h3>
        <p>Please wait while we fetch the latest events.</p>
      </div>
    </div>
    
    <div style="text-align: center; margin-top: 30px;">
      <a href="events.html" class="btn primary" style="display: inline-block; padding: 12px 24px; background: #ffd166; color: #111; text-decoration: none; border-radius: 8px; font-weight: 600;">
        View All Events
      </a>
    </div>
  </section>

  <!-- Newest Listings Section -->
  <section class="newest-listings">
    <div class="section-header">
      <h2 class="section-title" data-i18n="sections.newestListings">Newest Listings</h2>
      <p class="section-subtitle" data-i18n="sections.newestListingsSubtitle">Welcome our latest community members</p>
    </div>
    
    <div class="newest-grid" id="newest-grid">
      <!-- Newest MSME cards will be populated by JavaScript -->
    </div>
    
    <div class="cta-section">
      <h3 data-i18n="cta.readyToJoin">Ready to Join Our Community?</h3>
      <p data-i18n="cta.listBusiness">List your business today and connect with customers across Kuwait</p>
      <a href="/get-listed.html" class="cta-btn-large cta-primary">
        <i class="fas fa-plus"></i> <span data-i18n="cta.joinCommunity">Join Our Community Today</span>
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3 data-i18n="footer.aboutTitle">Chamber122</h3>
        <p data-i18n="footer.about">Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.quick">Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html" data-i18n="nav.home">Home</a></li>
            <li><a href="directory.html" data-i18n="nav.directory">Directory</a></li>
            <li><a href="events.html" data-i18n="nav.events">Events</a></li>
            <li><a href="bulletin.html" data-i18n="nav.bulletin">Bulletin</a></li>
            <li><a href="get-listed.html" data-i18n="cta.getListed">Get Listed</a></li>
            <li><a href="about.html" data-i18n="nav.about">About</a></li>
            <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.contactInfo">Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | Empowering Kuwait's MSMEs</p>
    </div>
  </footer>

  <!-- Modal Overlay for MSME Details -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()">&times;</button>
      <div class="modal-header">
        <img id="modal-image" src="" alt="">
        <h2 id="modal-title" class="modal-title"></h2>
        <div id="modal-category" class="modal-category"></div>
      </div>
      <div class="modal-body">
        <p id="modal-description" class="modal-description"></p>
        <div class="modal-story">
          <h4>Why We Started</h4>
          <p id="modal-story"></p>
        </div>
        <div class="modal-actions">
          <a href="#" class="modal-btn primary" id="modal-email">
            <i class="fas fa-envelope"></i> Email
          </a>
          <a href="#" class="modal-btn secondary" id="modal-whatsapp">
            <i class="fab fa-whatsapp"></i> WhatsApp
          </a>
          <a href="#" class="modal-btn secondary" id="modal-website">
            <i class="fas fa-globe"></i> Website
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Page-specific logic -->
  <script src="js/main.js?v=7"></script>
  <script type="module" src="js/language-switcher.js"></script>
  <script type="module" src="./js/i18n.js"></script>
  <script type="module" src="js/config.js"></script>
  <script type="module" src="js/auth-state-manager.js"></script>
  <script type="module" src="./js/modal-login-required.js"></script>
  <script type="module" src="./js/gating.js"></script>
  <script type="module" src="js/compliance-banner.js"></script>
  <script type="module" src="js/notification-system.js"></script>
  
  <!-- Load Featured Event -->
  <script type="module">
    import { supabase } from '/public/js/supabase-client.global.js?v=3';
    
    async function loadUpcomingEvents() {
      try {
        const { data: events, error } = await supabase
          .from('activities_base')
          .select('id,business_id,title,description,location,start_at,end_at,cover_image_url,status,is_published,deleted_at,created_at')
          .eq('type', 'event')
          .eq('is_published', true)
          .is('deleted_at', null)
          .gte('end_at', new Date().toISOString())   // still running or future
          .order('start_at', { ascending: true })
          .limit(6);

        if (error) {
          console.error('Error loading upcoming events:', error);
          return;
        }

        const eventsGrid = document.getElementById('upcoming-events-grid');
        if (!eventsGrid) return;

        if (!events || events.length === 0) {
          eventsGrid.innerHTML = `
            <div style="text-align: center; padding: 40px; color: #aaa; grid-column: 1 / -1;">
              <i class="fas fa-calendar-alt" style="font-size: 48px; margin-bottom: 16px; display: block;"></i>
              <h3>No upcoming events</h3>
              <p>Check back soon for new community events!</p>
            </div>
          `;
          return;
        }

        eventsGrid.innerHTML = events.map(event => {
          const startDate = event.start_at ? new Date(event.start_at) : null;
          const endDate = event.end_at ? new Date(event.end_at) : null;
          
          return `
            <div class="event-card" style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 12px; overflow: hidden; transition: transform 0.2s;">
              <div style="height: 200px; background: linear-gradient(135deg, #ffd166, #ff6b6b); position: relative;">
                ${event.cover_image_url ? 
                  `<img src="${event.cover_image_url}" alt="${event.title}" style="width: 100%; height: 100%; object-fit: cover;">` :
                  `<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #111; font-size: 48px;"><i class="fas fa-calendar-alt"></i></div>`
                }
                <div style="position: absolute; top: 12px; right: 12px; background: rgba(0,0,0,0.7); color: #fff; padding: 4px 8px; border-radius: 6px; font-size: 12px; font-weight: 600;">
                  ${event.type || 'Event'}
                </div>
              </div>
              <div style="padding: 20px;">
                <h3 style="margin: 0 0 12px; color: #fff; font-size: 18px; font-weight: 600; line-height: 1.3;">${event.title || 'Untitled Event'}</h3>
                <div style="margin-bottom: 12px; color: #ffd166; font-size: 14px;">
                  <i class="fas fa-clock" style="margin-right: 6px;"></i>
                  ${startDate ? startDate.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }) : 'TBA'}
                  ${startDate ? ` at ${startDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}` : ''}
                </div>
                ${event.location ? `
                  <div style="margin-bottom: 12px; color: #aaa; font-size: 14px;">
                    <i class="fas fa-map-marker-alt" style="margin-right: 6px;"></i>
                    ${event.location}
                  </div>
                ` : ''}
                <p style="color: #ccc; font-size: 14px; line-height: 1.4; margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                  ${event.description || 'Join us for this exciting community event!'}
                </p>
                <a href="/event.html?id=${event.id}" style="display: block; text-align: center; background: #ffd166; color: #111; padding: 10px 16px; border-radius: 6px; text-decoration: none; font-size: 14px; font-weight: 600;">
                  Learn More
                </a>
              </div>
            </div>
          `;
        }).join('');
      } catch (error) {
        console.error('Error loading upcoming events:', error);
      }
    }

    // Load upcoming events when page loads
    document.addEventListener('DOMContentLoaded', loadUpcomingEvents);
  </script>
</body>
</html>

