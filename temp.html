<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <link rel="stylesheet" href="/css/header.css?v=1">
  <script type="module" src="/js/supabase-client.js?v=20"></script>
  <script type="module" src="/js/header-auth-slot.js?v=7"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>About Us | Chamber122</title>
  <meta name="description" content="Learn about Chamber122's mission to support and promote MSMEs in Kuwait. Discover our story, values, and commitment to the business community.">
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=16">
  <link rel="stylesheet" href="css/header.css?v=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">
      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link active" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn">EN</button> |
          <button data-lang="ar" class="lang-btn">AR</button>
        </span>
        <!-- Auth slot for session-aware header -->
        <span id="auth-slot">
          <a class="btn" href="/auth.html">Login</a>
          <a class="btn primary" href="/auth.html#signup">Sign Up &amp; Get Listed</a>
        </span>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="directory.html" class="mobile-link">Directory</a>
      <a href="events.html" class="mobile-link">Events</a>
      <a href="bulletin.html" class="mobile-link">Bulletin</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="contact.html" class="mobile-link">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        My Business
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        My Activities
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        Admin Panel
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        Login
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        Sign Up & Get Listed
      </a>
    </div>
  </nav>

  <!-- About Hero -->
  <section class="about-hero">
    <div class="about-hero-content">
      <div class="hero-badge">
        <i class="fas fa-star"></i>
        <span data-i18n="badge.nonprofit">Nonprofit Organization</span>
      </div>
      <h1 data-i18n="page.title">About Chamber122</h1>
      <p class="hero-subtitle" data-i18n="page.subtitle">Empowering Kuwait's MSME community through connection, support, and growth opportunities.</p>
      <div class="hero-stats">
        <div class="hero-stat">
          <span class="stat-number">500+</span>
          <span class="stat-label" data-i18n="stats.msmes">MSMEs</span>
        </div>
        <div class="hero-stat">
          <span class="stat-number">50+</span>
          <span class="stat-label" data-i18n="stats.events">Events</span>
        </div>
        <div class="hero-stat">
          <span class="stat-number">1000+</span>
          <span class="stat-label" data-i18n="stats.members">Members</span>
        </div>
      </div>
    </div>
    <div class="hero-visual">
      <div class="floating-elements">
        <div class="floating-icon icon-1"><i class="fas fa-building"></i></div>
        <div class="floating-icon icon-2"><i class="fas fa-handshake"></i></div>
        <div class="floating-icon icon-3"><i class="fas fa-chart-line"></i></div>
        <div class="floating-icon icon-4"><i class="fas fa-users"></i></div>
      </div>
    </div>
  </section>

  <!-- Mission Section -->
  <section class="mission-section">
    <div class="container">
      <div class="section-header">
        <span class="section-badge" data-i18n="purpose.title">Our Purpose</span>
        <h2 data-i18n="purpose.mission.title">Our Mission</h2>
        <p class="section-subtitle" data-i18n="purpose.mission.subtitle">Building a stronger business community, one connection at a time</p>
      </div>
      <div class="mission-content">
        <div class="mission-text">
          <div class="mission-card">
            <div class="card-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="44" height="44">
                <circle cx="12" cy="12" r="9" fill="none" stroke="var(--gold-500,#D4AF37)" stroke-width="1.75"/>
                <circle cx="12" cy="12" r="3.2" fill="var(--gold-500,#D4AF37)"/>
                <path d="M2.5 12s3.8-6 9.5-6 9.5 6 9.5 6-3.8 6-9.5 6-9.5-6-9.5-6Z" fill="none" stroke="var(--gold-500,#D4AF37)" stroke-width="1.75" opacity=".5"/>
              </svg>
            </div>
            <h3 data-i18n="purpose.vision.title">Our Vision</h3>
            <p data-i18n="purpose.vision.description">Chamber122 is dedicated to creating a thriving ecosystem for Micro, Small, and Medium Enterprises (MSMEs) in Kuwait. We believe that by connecting businesses, sharing resources, and providing opportunities for growth, we can strengthen the entire business community.</p>
          </div>
          <div class="mission-card">
            <div class="card-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="44" height="44">
                <path d="M8.5 12.5 11 15c.8.8 2 .8 2.8 0l2.7-2.7M3 12l4.5-4.5L12 12m0 0 4.5-4.5L21 12" fill="none" stroke="var(--gold-500,#D4AF37)" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <h3 data-i18n="purpose.approach.title">Our Approach</h3>
            <p data-i18n="purpose.approach.description">Our platform serves as a bridge between established businesses and emerging entrepreneurs, fostering collaboration, innovation, and sustainable economic development.</p>
          </div>
          <div class="mission-card">
            <div class="card-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="44" height="44">
                <path d="M4 19h16M7 16v-5M12 16V8m5 8v-7" fill="none" stroke="var(--gold-500,#D4AF37)" stroke-width="1.75" stroke-linecap="round"/>
              </svg>
            </div>
            <h3 data-i18n="purpose.impact.title">Our Impact</h3>
            <p data-i18n="purpose.impact.description">We measure our success by the growth and success of our members, creating measurable impact through partnerships, mentorship, and community building.</p>
          </div>
        </div>
        <div class="mission-visual">
          <div class="mission-graphic">
            <div class="graphic-center">
              <i class="fas fa-users"></i>
              <span>Community</span>
            </div>
            <div class="graphic-connections">
              <div class="connection connection-1"></div>
              <div class="connection connection-2"></div>
              <div class="connection connection-3"></div>
              <div class="connection connection-4"></div>
            </div>
            <div class="graphic-nodes">
              <div class="node node-1"><i class="fas fa-building"></i></div>
              <div class="node node-2"><i class="fas fa-handshake"></i></div>
              <div class="node node-3"><i class="fas fa-chart-line"></i></div>
              <div class="node node-4"><i class="fas fa-lightbulb"></i></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Why Chamber122 Section -->
  <section class="why-section">
    <div class="container">
      <div class="section-header">
        <span class="section-badge" data-i18n="whyChoose.title">Why Choose Us</span>
        <h2 data-i18n="whyChoose.subtitle">Why Chamber122?</h2>
        <p class="section-subtitle" data-i18n="whyChoose.description">Four pillars for your business success</p>
      </div>
      <div class="why-grid">
        <div class="why-card">
          <div class="why-card-inner">
            <div class="why-icon">
              <i class="fas fa-network-wired"></i>
            </div>
            <h3 data-i18n="whyChoose.networking.title">Networking</h3>
            <p data-i18n="whyChoose.networking.description">Connect with entrepreneurs and industry experts to expand your network.</p>
            <div class="why-features">
              <span class="feature-tag" data-i18n="whyChoose.networking.features.0">Events</span>
              <span class="feature-tag" data-i18n="whyChoose.networking.features.1">Meetups</span>
              <span class="feature-tag" data-i18n="whyChoose.networking.features.2">Partnerships</span>
            </div>
          </div>
        </div>
        <div class="why-card">
          <div class="why-card-inner">
            <div class="why-icon">
              <i class="fas fa-chart-line"></i>
            </div>
            <h3 data-i18n="whyChoose.growth.title">Growth Opportunities</h3>
            <p data-i18n="whyChoose.growth.description">Access exclusive events, training programs, and business development opportunities.</p>
            <div class="why-features">
              <span class="feature-tag" data-i18n="whyChoose.growth.features.0">Training</span>
              <span class="feature-tag" data-i18n="whyChoose.growth.features.1">Mentorship</span>
              <span class="feature-tag" data-i18n="whyChoose.growth.features.2">Resources</span>
            </div>
          </div>
        </div>
        <div class="why-card">
          <div class="why-card-inner">
            <div class="why-icon">
              <i class="fas fa-handshake"></i>
            </div>
            <h3 data-i18n="whyChoose.support.title">Support</h3>
            <p data-i18n="whyChoose.support.description">Get guidance and support from experienced business leaders and entrepreneurs.</p>
            <div class="why-features">
              <span class="feature-tag" data-i18n="whyChoose.support.features.0">24/7 Help</span>
              <span class="feature-tag" data-i18n="whyChoose.support.features.1">Community</span>
              <span class="feature-tag" data-i18n="whyChoose.support.features.2">Expertise</span>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- Founder Message -->
  <section class="founder-section">
    <div class="container">
      <div class="section-header">
        <span class="section-badge" data-i18n="leadership.title">Leadership</span>
        <h2 data-i18n="leadership.subtitle">A Message from Our Founder</h2>
        <p class="section-subtitle" data-i18n="leadership.description">Hear from the visionary behind Chamber122</p>
      </div>
      <div class="founder-content">
        <div class="founder-image">
          <div class="founder-photo">
            <div class="photo-placeholder">
              <i class="fas fa-user"></i>
            </div>
            <div class="founder-badge">
              <i class="fas fa-crown"></i>
              <span>Founder & CEO</span>
            </div>
          </div>
        </div>
        <div class="founder-text">
          <div class="quote-mark">
            <i class="fas fa-quote-left"></i>
          </div>
          <blockquote data-i18n="leadership.founder.message">
            "Having started my own business journey in Kuwait, I understand the challenges that MSMEs face. Chamber122 was born from the belief that together, we are stronger. By creating a platform where businesses can connect, learn, and grow together, we're not just building individual success stories – we're building a stronger economy for all of Kuwait."
          </blockquote>
          <div class="founder-info">
            <h4 data-i18n="leadership.founder.name">Jasim Al-Mutawa</h4>
            <p data-i18n="leadership.founder.title">Founder & CEO, Chamber122</p>
            <div class="founder-credentials">
              <span class="credential" data-i18n="leadership.founder.roles.0">Entrepreneur</span>
              <span class="credential" data-i18n="leadership.founder.roles.1">Business Leader</span>
              <span class="credential" data-i18n="leadership.founder.roles.2">Community Advocate</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Impact Section -->
  <section class="impact-section">
    <div class="container">
      <div class="section-header">
        <span class="section-badge" data-i18n="results.title">Our Results</span>
        <h2 data-i18n="results.subtitle">Our Impact</h2>
        <p class="section-subtitle" data-i18n="results.description">Numbers that speak to our commitment to your success</p>
      </div>
      <div class="impact-grid">
        <div class="impact-item">
          <div class="impact-visual">
            <div class="impact-circle">
              <div class="impact-number" data-i18n="results.businessGrowth.percentage">75%</div>
              <div class="impact-icon">
                <i class="fas fa-chart-line"></i>
              </div>
            </div>
          </div>
          <div class="impact-text">
            <h3 data-i18n="results.businessGrowth.title">Business Growth</h3>
            <p data-i18n="results.businessGrowth.description">of our members report increased revenue within 6 months of joining</p>
          </div>
        </div>
        <div class="impact-item">
          <div class="impact-visual">
            <div class="impact-circle">
              <div class="impact-number" data-i18n="results.partnerships.number">200+</div>
              <div class="impact-icon">
                <i class="fas fa-handshake"></i>
              </div>
            </div>
          </div>
          <div class="impact-text">
            <h3 data-i18n="results.partnerships.title">Partnerships</h3>
            <p data-i18n="results.partnerships.description">successful business partnerships formed through our platform</p>
          </div>
        </div>
        <div class="impact-item">
          <div class="impact-visual">
            <div class="impact-circle">
              <div class="impact-number" data-i18n="results.satisfaction.percentage">95%</div>
              <div class="impact-icon">
                <i class="fas fa-heart"></i>
              </div>
            </div>
          </div>
          <div class="impact-text">
            <h3 data-i18n="results.satisfaction.title">Satisfaction</h3>
            <p data-i18n="results.satisfaction.description">member satisfaction rate with our services and community</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Volunteer Section -->
  <section class="volunteer-section">
    <div class="container">
      <div class="volunteer-content">
        <div class="section-header">
          <span class="section-badge" data-i18n="getInvolved.title">Get Involved</span>
          <h2 data-i18n="getInvolved.subtitle">Join Our Mission</h2>
          <p class="section-subtitle" data-i18n="getInvolved.description">Be part of something bigger than yourself</p>
        </div>
        <div class="volunteer-intro">
          <p data-i18n="getInvolved.intro">We're always looking for passionate individuals who want to make a difference in Kuwait's business community. Whether you're an experienced entrepreneur, a business professional, or someone who believes in the power of community, we'd love to have you on board.</p>
        </div>
        <div class="volunteer-options">
          <div class="volunteer-option">
            <div class="volunteer-icon">
              <i class="fas fa-user-tie"></i>
            </div>
            <h3 data-i18n="getInvolved.mentor.title">Mentor</h3>
            <p data-i18n="getInvolved.mentor.description">Share your expertise and guide emerging entrepreneurs on their journey.</p>
            <div class="volunteer-benefits">
              <span class="benefit" data-i18n="getInvolved.mentor.features.0">Make an Impact</span>
              <span class="benefit" data-i18n="getInvolved.mentor.features.1">Build Network</span>
              <span class="benefit" data-i18n="getInvolved.mentor.features.2">Give Back</span>
            </div>
          </div>
          <div class="volunteer-option">
            <div class="volunteer-icon">
              <i class="fas fa-calendar-check"></i>
            </div>
            <h3 data-i18n="getInvolved.organizer.title">Event Organizer</h3>
            <p data-i18n="getInvolved.organizer.description">Help us organize workshops, networking events, and business development sessions.</p>
            <div class="volunteer-benefits">
              <span class="benefit" data-i18n="getInvolved.organizer.features.0">Leadership</span>
              <span class="benefit" data-i18n="getInvolved.organizer.features.1">Event Planning</span>
              <span class="benefit" data-i18n="getInvolved.organizer.features.2">Community</span>
            </div>
          </div>
          <div class="volunteer-option">
            <div class="volunteer-icon">
              <i class="fas fa-hands-helping"></i>
            </div>
            <h3 data-i18n="getInvolved.ambassador.title">Community Ambassador</h3>
            <p data-i18n="getInvolved.ambassador.description">Represent Chamber122 in your industry and help grow our community.</p>
            <div class="volunteer-benefits">
              <span class="benefit" data-i18n="getInvolved.ambassador.features.0">Representation</span>
              <span class="benefit" data-i18n="getInvolved.ambassador.features.1">Growth</span>
              <span class="benefit" data-i18n="getInvolved.ambassador.features.2">Influence</span>
            </div>
          </div>
        </div>
        <div class="volunteer-cta">
          <a href="contact.html" class="cta-btn cta-primary">
            <i class="fas fa-envelope"></i>
            <span data-i18n="getInvolved.cta.title">Get Involved Today</span>
          </a>
          <p class="cta-note" data-i18n="getInvolved.cta.subtitle">Join hundreds of volunteers making a difference</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3 data-i18n="footer.aboutTitle">Chamber122</h3>
        <p data-i18n="footer.about">Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.quick">Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html" data-i18n="nav.home">Home</a></li>
            <li><a href="directory.html" data-i18n="nav.directory">Directory</a></li>
            <li><a href="events.html" data-i18n="nav.events">Events</a></li>
            <li><a href="bulletin.html" data-i18n="nav.bulletin">Bulletin</a></li>
            <li><a href="get-listed.html" data-i18n="cta.getListed">Get Listed</a></li>
            <li><a href="about.html" data-i18n="nav.about">About</a></li>
            <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.contactInfo">Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | <span data-i18n="footer.empowering">Empowering Kuwait's MSMEs</span></p>
    </div>
  </footer>

  <script src="js/main.js?v=7"></script>
  <script type="module" src="./js/i18n.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard | Chamber122</title>
  <meta name="description" content="Admin dashboard for managing MSMEs, events, bulletins, and guest submissions">
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=16">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Global Header -->
  <div id="site-header"></div>
  
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">
      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn" data-testid="lang-switch-en">EN</button> |
          <button data-lang="ar" class="lang-btn" data-testid="lang-switch-ar">AR</button>
        </span>
        <!-- Auth CTAs (shown when NOT logged in) -->
        <div id="auth-cta" class="flex items-center gap-3" data-testid="auth-cta">
          <a href="auth.html#login" class="btn btn-ghost text-sm" data-testid="login-cta" data-i18n="nav.login">Login</a>
          <a href="auth.html#signup" class="btn btn-primary text-sm px-4 py-2 rounded-2xl shadow-sm" data-testid="signup-cta" data-i18n="nav.signup">
            Sign Up & Get Listed
          </a>
        </div>

        <!-- Account menu (shown ONLY when logged in) -->
        <div id="account-menu" class="relative hidden" data-testid="account-menu">
          <button id="account-btn" class="btn btn-outline flex items-center gap-2">
            <img id="account-avatar" src="" alt="" class="h-7 w-7 rounded-full object-cover hidden">
            <span id="account-name" data-i18n="nav.account">Account</span>
            <svg class="h-4 w-4 opacity-70" viewBox="0 0 20 20"><path d="M5 7l5 6 5-6"/></svg>
          </button>
          <div id="account-dropdown" class="menu hidden">
            <a href="owner-activities.html" data-testid="menu-my-activities" data-i18n="nav.myActivities">My Activities</a>
            <a href="admin-dashboard.html" id="menu-admin" class="hidden" data-testid="menu-admin" data-i18n="nav.admin">Admin Panel</a>
            <a href="#" id="btn-logout" data-testid="logout" data-i18n="nav.logout">Logout</a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Admin Dashboard Content -->
  <main class="admin-dashboard" data-testid="admin-dashboard">
    <div class="admin-container">
      <!-- Dashboard Header -->
      <div class="admin-header">
        <h1>Admin Dashboard</h1>
        <p>Manage MSMEs, events, bulletins, and guest submissions</p>
      </div>

      <!-- Stats Overview -->
      <div class="admin-stats">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-building"></i>
          </div>
          <div class="stat-content">
            <h3 id="total-msmes">0</h3>
            <p>Total MSMEs</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="stat-content">
            <h3 id="pending-approvals">0</h3>
            <p>Pending Approvals</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-calendar"></i>
          </div>
          <div class="stat-content">
            <h3 id="total-events">0</h3>
            <p>Total Events</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-bullhorn"></i>
          </div>
          <div class="stat-content">
            <h3 id="total-bulletins">0</h3>
            <p>Total Bulletins</p>
          </div>
        </div>
      </div>

      <!-- Admin Tabs -->
      <div class="admin-tabs">
        <button class="admin-tab active" data-tab="approvals">MSME Approvals</button>
        <button class="admin-tab" data-tab="needs-setup">Needs Setup</button>
        <button class="admin-tab" data-tab="guest-submissions">Guest Submissions</button>
        <button class="admin-tab" data-tab="content">Content Management</button>
        <button class="admin-tab" data-tab="analytics">Analytics</button>
      </div>

      <!-- Tab Content -->
      <div class="admin-content">
        <!-- MSME Approvals Tab -->
        <div class="admin-tab-content active" id="approvals-tab">
          <div class="admin-section">
            <h2>Pending MSME Approvals</h2>
            <div class="approvals-list" id="approvals-list">
              <!-- Approvals will be loaded here -->
            </div>
          </div>
        </div>

        <!-- Needs Setup Tab -->
        <div class="admin-tab-content" id="needs-setup-tab">
          <div class="admin-section">
            <h2>Users Needing Setup Assistance</h2>
            <p>Users who tried to publish bulletins but have incomplete accounts.</p>
            <div class="needs-setup-list" id="needs-setup">
              <!-- Needs setup items will be loaded here -->
            </div>
          </div>
        </div>

        <!-- Guest Submissions Tab -->
        <div class="admin-tab-content" id="guest-submissions-tab">
          <div class="admin-section">
            <h2>Event Suggestions</h2>
            <div class="submissions-list" id="event-suggestions-list">
              <!-- Event suggestions will be loaded here -->
            </div>
          </div>
          <div class="admin-section">
            <h2>Bulletin Submissions</h2>
            <div class="submissions-list" id="bulletin-submissions-list">
              <!-- Bulletin submissions will be loaded here -->
            </div>
          </div>
        </div>

        <!-- Content Management Tab -->
        <div class="admin-tab-content" id="content-tab">
          <div class="admin-section">
            <h2>Content Management</h2>
            <p>Manage published content, moderate comments, and handle reports.</p>
          </div>
        </div>

        <!-- Analytics Tab -->
        <div class="admin-tab-content" id="analytics-tab">
          <div class="admin-section">
            <h2>System Analytics</h2>
            <p>View system-wide analytics and performance metrics.</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3 data-i18n="footer.aboutTitle">Chamber122</h3>
        <p data-i18n="footer.about">Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.quick">Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html" data-i18n="nav.home">Home</a></li>
            <li><a href="directory.html" data-i18n="nav.directory">Directory</a></li>
            <li><a href="events.html" data-i18n="nav.events">Events</a></li>
            <li><a href="bulletin.html" data-i18n="nav.bulletin">Bulletin</a></li>
            <li><a href="about.html" data-i18n="nav.about">About</a></li>
            <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.contactInfo">Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | <span data-i18n="footer.empowering">Empowering Kuwait's MSMEs</span></p>
    </div>
  </footer>

  <script src="js/main.js?v=7"></script>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/require-auth.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
  <script type="module" src="js/supabase-client.js"></script>
  <script type="module" src="js/admin-dashboard.js"></script>
  <script type="module" src="./js/i18n.js"></script>
  <!-- Import authentication scripts -->
  <script type="module" src="js/modal-login-required.js"></script>
  <script type="module" src="js/guest.js"></script>
  <script type="module">
    import { initNavAuthState } from '/js/nav-auth-state.js';
    initNavAuthState();
  </script>
  
  <!-- Auth Guard -->
  <script type="module">
    import { requireAuth } from '/shared/auth-guard.js';
    const user = await requireAuth(); // redirects if not logged in
  </script>
  <link rel="stylesheet" href="css/modal.css">
  <link rel="stylesheet" href="css/header.css?v=1">
</body>
</html>

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Review Dashboard | Chamber122</title>
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=16">
  <link rel="stylesheet" href="css/header.css?v=1">
  <link rel="stylesheet" href="css/admin-review.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
  <!-- Global Header -->
  <div id="site-header"></div>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="header-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <nav class="header-nav">
        <a href="admin.html" class="nav-link">Admin Dashboard</a>
        <a href="admin-review.html" class="nav-link active">Review</a>
        <button id="logout-btn" class="btn btn-outline">Logout</button>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <!-- Page Header -->
      <div class="page-header">
        <h1 class="page-title">
          Compliance Review Dashboard
          <span class="page-subtitle">لوحة مراجعة الامتثال</span>
        </h1>
        <p class="page-description">
          Review and manage business compliance submissions.
          <span class="page-description-ar">مراجعة وإدارة طلبات الامتثال التجارية.</span>
        </p>
      </div>

      <!-- Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">📋</div>
          <div class="stat-content">
            <div class="stat-number" id="pending-count">0</div>
            <div class="stat-label">Pending Review | قيد المراجعة</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">✅</div>
          <div class="stat-content">
            <div class="stat-number" id="approved-count">0</div>
            <div class="stat-label">Approved | موافق عليه</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">🔄</div>
          <div class="stat-content">
            <div class="stat-number" id="changes-requested-count">0</div>
            <div class="stat-label">Changes Requested | طلب تعديلات</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">❌</div>
          <div class="stat-content">
            <div class="stat-number" id="rejected-count">0</div>
            <div class="stat-label">Rejected | مرفوض</div>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="filters-section">
        <div class="filter-group">
          <label for="status-filter" class="filter-label">Status | الحالة</label>
          <select id="status-filter" class="filter-select">
            <option value="">All | الكل</option>
            <option value="pending">Pending | قيد المراجعة</option>
            <option value="approved">Approved | موافق عليه</option>
            <option value="changes_requested">Changes Requested | طلب تعديلات</option>
            <option value="rejected">Rejected | مرفوض</option>
            <option value="deactivated">Deactivated | معطل</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="search-filter" class="filter-label">Search | البحث</label>
          <input type="text" id="search-filter" class="filter-input" placeholder="Business name or email...">
        </div>
        <button id="refresh-btn" class="btn btn-primary">Refresh | تحديث</button>
      </div>

      <!-- Businesses Table -->
      <div class="table-container">
        <table class="businesses-table">
          <thead>
            <tr>
              <th>Business | المنشأة</th>
              <th>Owner | المالك</th>
              <th>Industry | الصناعة</th>
              <th>Status | الحالة</th>
              <th>Documents | المستندات</th>
              <th>Created | تاريخ الإنشاء</th>
              <th>Actions | الإجراءات</th>
            </tr>
          </thead>
          <tbody id="businesses-tbody">
            <!-- Table rows will be populated by JavaScript -->
          </tbody>
        </table>
      </div>

      <!-- Loading State -->
      <div id="loading-state" class="loading-state" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Loading businesses... | جاري تحميل المنشآت...</p>
      </div>

      <!-- Empty State -->
      <div id="empty-state" class="empty-state" style="display: none;">
        <div class="empty-icon">📋</div>
        <h3>No businesses found | لم يتم العثور على منشآت</h3>
        <p>No businesses match your current filters.</p>
      </div>
    </div>
  </main>

  <!-- Review Modal -->
  <div id="review-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modal-title">Review Business | مراجعة المنشأة</h3>
        <button id="close-modal" class="modal-close">×</button>
      </div>
      <div class="modal-body">
        <!-- Business Info -->
        <div class="review-section">
          <h4>Business Information | معلومات المنشأة</h4>
          <div id="business-info" class="info-grid">
            <!-- Business info will be populated by JavaScript -->
          </div>
        </div>

        <!-- Documents -->
        <div class="review-section">
          <h4>Documents | المستندات</h4>
          <div id="documents-list" class="documents-list">
            <!-- Documents will be populated by JavaScript -->
          </div>
        </div>

        <!-- Review Form -->
        <div class="review-section">
          <h4>Review Decision | قرار المراجعة</h4>
          <form id="review-form" class="review-form">
            <div class="form-group">
              <label class="form-label">Decision | القرار</label>
              <div class="decision-options">
                <label class="decision-option">
                  <input type="radio" name="decision" value="approve" required>
                  <span class="decision-text">
                    <span class="decision-title">Approve | موافقة</span>
                    <span class="decision-desc">Approve this business | الموافقة على هذه المنشأة</span>
                  </span>
                </label>
                <label class="decision-option">
                  <input type="radio" name="decision" value="changes_requested" required>
                  <span class="decision-text">
                    <span class="decision-title">Request Changes | طلب تعديلات</span>
                    <span class="decision-desc">Request specific changes | طلب تعديلات محددة</span>
                  </span>
                </label>
                <label class="decision-option">
                  <input type="radio" name="decision" value="reject" required>
                  <span class="decision-text">
                    <span class="decision-title">Reject | رفض</span>
                    <span class="decision-desc">Reject this submission | رفض هذا الطلب</span>
                  </span>
                </label>
                <label class="decision-option">
                  <input type="radio" name="decision" value="deactivate" required>
                  <span class="decision-text">
                    <span class="decision-title">Deactivate | تعطيل</span>
                    <span class="decision-desc">Deactivate this business | تعطيل هذه المنشأة</span>
                  </span>
                </label>
              </div>
            </div>

            <div class="form-group">
              <label for="review-notes" class="form-label">Notes | ملاحظات</label>
              <textarea id="review-notes" name="notes" class="form-textarea" rows="4" placeholder="Add your review notes..."></textarea>
            </div>

            <div class="form-group" id="reasons-group" style="display: none;">
              <label class="form-label">Required Changes | التغييرات المطلوبة</label>
              <div class="reasons-grid">
                <label class="reason-item">
                  <input type="checkbox" name="reasons" value="license">
                  <span>Business License | رخصة العمل</span>
                </label>
                <label class="reason-item">
                  <input type="checkbox" name="reasons" value="incorporation">
                  <span>Articles of Incorporation | عقد التأسيس</span>
                </label>
                <label class="reason-item">
                  <input type="checkbox" name="reasons" value="signature_auth">
                  <span>Signature Authorization | تفويض التوقيع</span>
                </label>
                <label class="reason-item">
                  <input type="checkbox" name="reasons" value="iban">
                  <span>IBAN Certificate | شهادة الـIBAN</span>
                </label>
                <label class="reason-item">
                  <input type="checkbox" name="reasons" value="business_info">
                  <span>Business Information | معلومات المنشأة</span>
                </label>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" id="cancel-review" class="btn btn-secondary">Cancel | إلغاء</button>
              <button type="submit" id="submit-review" class="btn btn-primary">Submit Review | إرسال المراجعة</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script type="module" src="js/config.js"></script>
  <script type="module" src="js/supabase-client.js"></script>
  <script type="module" src="js/admin-review.js"></script>
  <script type="module" src="js/auth-state-manager.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Admin Panel | Chamber122</title>
  <meta name="description" content="Admin panel for Chamber122. Review and manage business listings, approve or reject submissions.">
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=16">
  <link rel="stylesheet" href="css/header.css?v=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Global Header -->
  <div id="site-header"></div>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">

      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn">EN</button> |
          <button data-lang="ar" class="lang-btn">AR</button>
        </span>

      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="directory.html" class="mobile-link">Directory</a>
      <a href="events.html" class="mobile-link">Events</a>
      <a href="bulletin.html" class="mobile-link">Bulletin</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="contact.html" class="mobile-link">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        My Business
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        My Activities
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        Admin Panel
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        Login
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        Sign Up & Get Listed
      </a>
    </div>
    </div>
  </nav>

  <!-- Admin Dashboard -->
  <section class="form-section">
    <div class="form-wrapper">
      <div class="form-header">
        <h1>Admin Panel</h1>
        <p>Review and manage business listings submitted to Chamber122.</p>
      </div>

      <div id="admin-access" style="display: none;">
        <div class="form-note">
          <i class="fas fa-lock"></i>
          <div>
            <strong>Access Denied</strong><br>
            You don't have admin privileges. Contact the system administrator if you believe this is an error.
          </div>
        </div>
      </div>

      <div id="admin-panel" style="display: none;">
        <div class="admin-stats">
          <div class="stat-card">
            <h3>Pending Reviews</h3>
            <span id="pending-count">0</span>
          </div>
          <div class="stat-card">
            <h3>Total Businesses</h3>
            <span id="total-count">0</span>
          </div>
          <div class="stat-card">
            <h3>Approved Today</h3>
            <span id="approved-today">0</span>
          </div>
        </div>

        <div class="admin-section">
          <h3><i class="fas fa-clock"></i> Pending Reviews</h3>
          <div id="pending-list">
            <!-- Pending businesses will be populated by JavaScript -->
          </div>
        </div>

        <div class="admin-section">
          <h3><i class="fas fa-check-circle"></i> Recently Approved</h3>
          <div id="recent-approved">
            <!-- Recently approved businesses will be populated by JavaScript -->
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3>Chamber122</h3>
        <p>Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3>Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html">Home</a></li>
            <li><a href="directory.html">Directory</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="bulletin.html">Bulletin</a></li>
            <li><a href="get-listed.html">Get Listed</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3>Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | Empowering Kuwait's MSMEs</p>
    </div>
  </footer>

  <script src="js/main.js?v=7"></script>
  <script type="module" src="./js/i18n.js"></script>
  <script type="module" src="js/admin.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply Activities Ownership Migration</title>
    <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
    <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 800px; margin: 0 auto; }
        .section { margin: 20px 0; padding: 20px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
        .info { color: #3b82f6; }
        button { padding: 12px 24px; margin: 8px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; }
        button:hover { background: #2563eb; }
        button:disabled { background: #6b7280; cursor: not-allowed; }
        pre { background: #2d2d2d; padding: 15px; border-radius: 6px; overflow-x: auto; white-space: pre-wrap; }
        .step { margin: 15px 0; padding: 15px; background: #2a2a2a; border-radius: 6px; }
        .step h3 { margin-top: 0; color: #60a5fa; }
        .sql-code { background: #1e1e1e; border: 1px solid #444; border-radius: 4px; padding: 10px; font-family: 'Courier New', monospace; }
    </style>
    <link rel="stylesheet" href="css/header.css?v=1">
</head>
<body>
    <!-- Global Header -->
    <div id="site-header"></div>
    
    <div class="container">
        <h1>🔐 Apply Activities Ownership Migration</h1>
        
        <div class="section">
            <h2>Migration Overview</h2>
            <p>This migration will:</p>
            <ul>
                <li>✅ Update activities table to reference businesses instead of accounts</li>
                <li>✅ Backfill created_by column from business owners</li>
                <li>✅ Add triggers to auto-populate created_by on new activities</li>
                <li>✅ Add RLS policies for secure access control</li>
                <li>✅ Add performance indexes</li>
            </ul>
        </div>

        <div class="section">
            <h2>Step 1: Check Current State</h2>
            <p>First, let's verify the current activities table structure and data.</p>
            <button onclick="checkCurrentState()">Check Current State</button>
            <div id="current-state-result"></div>
        </div>

        <div class="section">
            <h2>Step 2: Apply Migration</h2>
            <p>Copy and paste the SQL migration into your Supabase SQL Editor.</p>
            <button onclick="showMigrationSQL()">Show Migration SQL</button>
            <div id="migration-sql-result"></div>
        </div>

        <div class="section">
            <h2>Step 3: Verify Migration</h2>
            <p>After applying the migration, verify it worked correctly.</p>
            <button onclick="verifyMigration()">Verify Migration</button>
            <div id="verification-result"></div>
        </div>

        <div class="section">
            <h2>Step 4: Test Activities</h2>
            <p>Test that activities can be queried and created correctly.</p>
            <button onclick="testActivities()">Test Activities</button>
            <div id="test-result"></div>
        </div>
    </div>

    <script type="module">
        import { supabase } from './js/supabase-client.js';

        // Step 1: Check Current State
        window.checkCurrentState = async () => {
            const resultDiv = document.getElementById('current-state-result');
            resultDiv.innerHTML = '<p class="info">Checking current state...</p>';
            
            try {
                // Check if user is logged in
                const { data: { user } } = await supabase.auth.getUser();
                if (!user) {
                    resultDiv.innerHTML = '<p class="warning">⚠️ Please log in first to check the database state.</p>';
                    return;
                }

                // Check activities table structure
                const { data: activities, error: activitiesError } = await supabase
                    .from('activities')
                    .select('*')
                    .limit(1);

                if (activitiesError) {
                    resultDiv.innerHTML = `
                        <p class="error">❌ Error accessing activities table:</p>
                        <pre>${activitiesError.message}</pre>
                    `;
                    return;
                }

                // Check businesses table
                const { data: businesses, error: businessesError } = await supabase
                    .from('businesses')
                    .select('id, owner_id')
                    .limit(1);

                if (businessesError) {
                    resultDiv.innerHTML = `
                        <p class="error">❌ Error accessing businesses table:</p>
                        <pre>${businessesError.message}</pre>
                    `;
                    return;
                }

                // Check accounts view
                const { data: accounts, error: accountsError } = await supabase
                    .from('accounts')
                    .select('id, owner_user_id')
                    .limit(1);

                resultDiv.innerHTML = `
                    <p class="success">✅ Database accessible</p>
                    <p class="info">Activities table: ${activities.length > 0 ? 'Has data' : 'Empty'}</p>
                    <p class="info">Businesses table: ${businesses.length > 0 ? 'Has data' : 'Empty'}</p>
                    <p class="info">Accounts view: ${accounts.length > 0 ? 'Has data' : 'Empty'}</p>
                    <p class="info">Current user: ${user.email}</p>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error checking current state:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Step 2: Show Migration SQL
        window.showMigrationSQL = () => {
            const resultDiv = document.getElementById('migration-sql-result');
            
            const migrationSQL = `-- Activities Ownership Migration
-- Updates activities table to work with businesses table and improves RLS

-- 1.1 Update foreign key reference from accounts to businesses
-- First, we need to check if we can safely update the reference
-- This assumes activities.business_id should reference businesses.id instead of accounts.id
alter table public.activities
  drop constraint if exists activities_business_id_fkey;

alter table public.activities
  add constraint activities_business_id_fkey
  foreign key (business_id) references public.businesses(id) on delete cascade;

-- 1.2 Backfill created_by from businesses.owner_id (using the accounts view for compatibility)
update public.activities a
set created_by = b.owner_user_id
from public.accounts b
where a.business_id = b.id
  and a.created_by is null;

-- 1.3 Indexes for performance
create index if not exists idx_activities_created_by on public.activities(created_by);
create index if not exists idx_activities_created_at on public.activities(created_at);

-- 1.4 Helper function: admin checker
create or replace function public.is_admin(uid uuid)
returns boolean language sql stable as
$$
  select exists (select 1 from public.admins where user_id = uid);
$$;
grant execute on function public.is_admin(uuid) to anon, authenticated;

-- 1.5 Trigger function to auto-populate created_by from business owner
create or replace function public.set_activity_owner()
returns trigger language plpgsql as
$$
declare v_owner uuid;
begin
  -- If created_by already provided, keep it; else derive from business_id
  if new.created_by is null then
    -- Try to get owner from businesses table first, fallback to accounts view
    select owner_id into v_owner from public.businesses where id = new.business_id;
    if v_owner is null then
      select owner_user_id into v_owner from public.accounts where id = new.business_id;
    end if;
    new.created_by := v_owner;
  end if;

  -- Ensure created_at has a value
  if new.created_at is null then
    new.created_at := now();
  end if;

  return new;
end;
$$;

-- 1.6 Triggers
drop trigger if exists trg_activities_set_owner_ins on public.activities;
create trigger trg_activities_set_owner_ins
before insert on public.activities
for each row execute function public.set_activity_owner();

drop trigger if exists trg_activities_set_owner_upd on public.activities;
create trigger trg_activities_set_owner_upd
before update on public.activities
for each row execute function public.set_activity_owner();

-- 1.7 RLS Policies
alter table public.activities enable row level security;

-- Clear old policies for a clean slate
drop policy if exists "owner read activities" on public.activities;
drop policy if exists "owner write activities" on public.activities;
drop policy if exists "admin read activities" on public.activities;
drop policy if exists "owner or admin read activities" on public.activities;
drop policy if exists "owner insert activities" on public.activities;
drop policy if exists "owner update activities" on public.activities;

-- Owners can read their activities; admins can read all
create policy "owner or admin read activities"
on public.activities
for select
to authenticated
using (
  created_by = auth.uid() OR public.is_admin(auth.uid())
);

-- Owners can insert rows only if created_by resolves to them
create policy "owner insert activities"
on public.activities
for insert
to authenticated
with check (
  -- allow if explicitly set to self OR derives from a business they own
  created_by = auth.uid()
  OR exists (
    select 1 from public.businesses b
    where b.id = coalesce(new.business_id, public.activities.business_id)
      and b.owner_id = auth.uid()
  )
  OR exists (
    select 1 from public.accounts a
    where a.id = coalesce(new.business_id, public.activities.business_id)
      and a.owner_user_id = auth.uid()
  )
);

-- Owners can update rows they own; admins can update via service if needed
create policy "owner update activities"
on public.activities
for update
to authenticated
using (created_by = auth.uid())
with check (created_by = auth.uid());

-- 1.8 Grant necessary permissions
grant select, insert, update on public.activities to authenticated;
grant usage on sequence public.activities_id_seq to authenticated;`;

            resultDiv.innerHTML = `
                <p class="info">📋 Copy the SQL below and paste it into your Supabase SQL Editor:</p>
                <div class="sql-code">
                    <pre>${migrationSQL}</pre>
                </div>
                <p class="warning">⚠️ Make sure to run this in your Supabase SQL Editor, not here!</p>
            `;
        };

        // Step 3: Verify Migration
        window.verifyMigration = async () => {
            const resultDiv = document.getElementById('verification-result');
            resultDiv.innerHTML = '<p class="info">Verifying migration...</p>';
            
            try {
                const { data: { user } } = await supabase.auth.getUser();
                if (!user) {
                    resultDiv.innerHTML = '<p class="warning">⚠️ Please log in first.</p>';
                    return;
                }

                // Test 1: Check if activities can be queried by created_by
                const { data: activities, error: activitiesError } = await supabase
                    .from('activities')
                    .select('id, title, created_by, created_at')
                    .eq('created_by', user.id)
                    .limit(5);

                if (activitiesError) {
                    resultDiv.innerHTML = `
                        <p class="error">❌ Migration verification failed:</p>
                        <pre>${activitiesError.message}</pre>
                    `;
                    return;
                }

                // Test 2: Check if triggers are working by trying to insert
                const { data: business } = await supabase
                    .from('businesses')
                    .select('id')
                    .eq('owner_id', user.id)
                    .limit(1)
                    .single();

                let triggerTest = 'Skipped (no business found)';
                if (business) {
                    const testActivity = {
                        business_id: business.id,
                        title: `Migration Test ${Date.now()}`,
                        content: 'Testing trigger functionality',
                        status: 'draft'
                    };

                    const { data: inserted, error: insertError } = await supabase
                        .from('activities')
                        .insert([testActivity])
                        .select('id, created_by')
                        .single();

                    if (insertError) {
                        triggerTest = `Failed: ${insertError.message}`;
                    } else {
                        triggerTest = inserted.created_by === user.id ? '✅ Working' : '❌ Failed (wrong owner)';
                    }
                }

                resultDiv.innerHTML = `
                    <p class="success">✅ Migration verification complete</p>
                    <p class="info">Activities query: ✅ Working</p>
                    <p class="info">Found ${activities.length} activities for user</p>
                    <p class="info">Trigger test: ${triggerTest}</p>
                    <pre>${JSON.stringify(activities, null, 2)}</pre>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error verifying migration:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Step 4: Test Activities
        window.testActivities = async () => {
            const resultDiv = document.getElementById('test-result');
            resultDiv.innerHTML = '<p class="info">Testing activities functionality...</p>';
            
            try {
                const { data: { user } } = await supabase.auth.getUser();
                if (!user) {
                    resultDiv.innerHTML = '<p class="warning">⚠️ Please log in first.</p>';
                    return;
                }

                // Test querying activities
                const { data: activities, error: queryError } = await supabase
                    .from('activities')
                    .select('id, title, created_by, created_at')
                    .eq('created_by', user.id)
                    .order('created_at', { ascending: false })
                    .limit(3);

                if (queryError) {
                    resultDiv.innerHTML = `
                        <p class="error">❌ Query test failed:</p>
                        <pre>${queryError.message}</pre>
                    `;
                    return;
                }

                resultDiv.innerHTML = `
                    <p class="success">✅ Activities functionality working</p>
                    <p class="info">Found ${activities.length} activities</p>
                    <p class="info">All activities belong to user: ${user.id}</p>
                    <pre>${JSON.stringify(activities, null, 2)}</pre>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing activities:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Auto-run on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🔐 Activities Ownership Migration Helper loaded');
        });
    </script>
</body>
</html>
<!doctype html>
<html>
  <head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
    <meta charset="utf-8" />
    <title>Signing you in…</title>
  <link rel="stylesheet" href="css/header.css?v=1">
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <!-- Replace with YOUR project values -->
    <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co" />
    <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w" />
  </head>
  <body>
  <div id="site-header"></div>
    <script type="module" src="js/auth-callback.js"></script>
    Signing you in…
  </body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Login / Sign Up | Chamber122</title>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <link rel="stylesheet" href="/css/header.css?v=1">
  <link rel="stylesheet" href="css/style.css?v=18">
  <link rel="stylesheet" href="css/auth.css?v=18">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script type="module" src="/js/supabase-client.js?v=20"></script>
  <script type="module" src="/js/header-auth-slot.js?v=7"></script>
  <script type="module" src="/js/auth-login.js?v=24"></script>
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">

      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn" data-testid="lang-switch-en">EN</button> |
          <button data-lang="ar" class="lang-btn" data-testid="lang-switch-ar">AR</button>
        </span>
        <!-- Auth slot for session-aware header -->
        <span id="auth-slot">
          <a href="auth.html#login" class="btn btn-ghost text-sm" data-testid="login-cta" data-i18n="nav.login">Login</a>
          <a href="auth.html#signup" class="btn btn-primary text-sm px-4 py-2 rounded-2xl shadow-sm" data-testid="signup-cta" data-i18n="nav.signup">
            Sign Up & Get Listed
          </a>
        </span>

        <!-- Account menu (shown ONLY when logged in) -->
        <div id="account-menu" class="relative hidden" data-testid="account-menu">
          <button id="account-btn" class="btn btn-outline flex items-center gap-2">
            <img id="account-avatar" src="" alt="" class="h-7 w-7 rounded-full object-cover hidden">
            <span id="account-name" data-i18n="nav.account">Account</span>
            <svg class="h-4 w-4 opacity-70" viewBox="0 0 20 20"><path d="M5 7l5 6 5-6"/></svg>
          </button>
          <div id="account-dropdown" class="menu hidden">
            <a href="owner-activities.html" data-testid="menu-my-activities" data-i18n="nav.myActivities">My Activities</a>
            <a href="admin-dashboard.html" id="menu-admin" class="hidden" data-testid="menu-admin" data-i18n="nav.admin">Admin Panel</a>
            <a href="#" id="btn-logout" data-testid="logout" data-i18n="nav.logout">Logout</a>
          </div>
        </div>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu" title="Toggle mobile menu">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="directory.html" class="mobile-link">Directory</a>
      <a href="events.html" class="mobile-link">Events</a>
      <a href="bulletin.html" class="mobile-link">Bulletin</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="contact.html" class="mobile-link">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        My Business
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        My Activities
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        Admin Panel
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        Login
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        Sign Up & Get Listed
      </a>
    </div>
    </div>
  </nav>

  <div class="auth-container">
    <div class="auth-card">
      <!-- Sticky Tab Navigation -->
      <div class="auth-tabs" role="tablist" data-testid="auth-tabs">
        <button class="auth-tab" id="tab-login" role="tab" aria-controls="panel-login" data-target="login" data-i18n="auth.loginTab">Login</button>
        <button class="auth-tab" id="tab-signup" role="tab" aria-controls="panel-signup" data-target="signup" data-i18n="auth.signupTab">Sign Up & Get Listed</button>
      </div>

      <!-- Login Panel -->
      <section id="panel-login" role="tabpanel" aria-labelledby="tab-login">
        <div class="auth-form">
          <h3 class="form-title" data-i18n="auth.loginTitle">Login to Your Account</h3>
          
          <!-- Email + Password Login -->
          <form id="login-form" novalidate class="auth-form-section">
            <div class="form-group">
              <label for="email" class="form-label" data-i18n="auth.email">Email</label>
              <input id="email" name="email" type="email" autocomplete="email" class="form-input" data-testid="login-email" placeholder="your@email.com" required>
            </div>
            
            <div class="form-group">
              <label for="password" class="form-label" data-i18n="auth.password">Password</label>
              <div class="password-field">
                <input id="password" name="password" type="password" autocomplete="current-password" class="form-input" data-testid="login-password" placeholder="Enter your password" required>
                <button type="button" class="password-toggle" onclick="togglePassword('password')" aria-label="Toggle password visibility" title="Toggle password visibility">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
            </div>
            
            <button id="login-btn" type="submit" class="btn btn-primary" data-testid="login-submit" data-i18n="auth.logIn">Log In</button>
            <a id="forgotLink" href="#" class="forgot-link" data-i18n="auth.forgotPassword">Forgot password?</a>
          </form>

          <div class="form-divider">
            <span data-i18n="auth.or">or</span>
          </div>

          <!-- Phone OTP Login (Collapsible) -->
          <details id="phoneLoginBlock" class="phone-login-block">
            <summary class="phone-login-summary" data-i18n="auth.usePhoneInstead">Use phone instead</summary>
            <form id="loginPhoneForm" class="auth-form-section" autocomplete="one-time-code">
              <div class="form-group">
                <label for="login-phone" class="form-label" data-i18n="auth.phone">Phone Number</label>
                <input id="login-phone" type="tel" class="form-input" placeholder="+9655xxxxxxx" />
              </div>
              <div class="form-group">
                <button type="button" id="btnSendOtp" class="btn btn-outline" data-i18n="auth.sendCode">Send code</button>
              </div>
              <div class="form-group">
                <label for="login-phone-code" class="form-label" data-i18n="auth.verificationCode">Verification Code</label>
                <input id="login-phone-code" type="text" inputmode="numeric" autocomplete="one-time-code" class="form-input" placeholder="6-digit code" />
                <button type="button" id="btnVerifyOtp" class="btn btn-primary" data-i18n="auth.verifyAndLogin">Verify & Log in</button>
              </div>
            </form>
            <small class="otp-tip" data-i18n="auth.otpTip">Tip: On supported phones, the code may auto-fill.</small>
          </details>

          <div class="form-divider">
            <span data-i18n="auth.or">or</span>
          </div>

          <!-- Magic Link -->
          <details class="magic-link-block">
            <summary class="magic-link-summary" data-i18n="auth.getMagicLink">Or get a magic link to email</summary>
            <form id="magicForm" class="auth-form-section">
              <div class="form-group">
                <label for="magic-email" class="form-label" data-i18n="auth.email">Email</label>
                <input id="magic-email" type="email" class="form-input" placeholder="your@email.com" />
              </div>
              <button id="btnMagic" type="submit" class="btn btn-outline" data-i18n="auth.sendMagicLink">Send magic link</button>
            </form>
          </details>
        </div>
      </section>

      <!-- Signup Panel -->
      <section id="panel-signup" role="tabpanel" aria-labelledby="tab-signup">
        <form id="signup-form" class="auth-form" novalidate>
        <!-- Progress Bar -->
        <div class="signup-steps">
          <div class="step-progress">
            <div id="signup-progress" class="step-progress-bar"></div>
          </div>
          <div class="step-indicators">
            <div class="step-indicator active">1</div>
            <div class="step-indicator">2</div>
            <div class="step-indicator">3</div>
            <div class="step-indicator">4</div>
          </div>
        </div>

        <!-- All Steps Combined -->
        <div id="signup-form-all" class="signup-form-all">
          <h3 class="step-title" data-i18n="auth.step2Title">Business Information</h3>
          <p class="step-subtitle" data-i18n="auth.step2Subtitle">Tell us about your business</p>
          
          <div class="form-group">
            <label for="signup-name" class="form-label" data-i18n="auth.businessName">Business Name *</label>
            <input type="text" id="signup-name" class="form-input" data-testid="signup-name" data-label="Business Name" placeholder="Your business name" required>
          </div>
          
          <div class="form-group">
            <label for="signup-category" class="form-label" data-i18n="auth.category">Category *</label>
            <select id="signup-category" class="form-input form-select" data-testid="signup-category" data-label="Category" required>
              <option value="" data-i18n="auth.selectCategory">Select a category</option>
              <option value="food" data-i18n="auth.categories.food">Food & Beverage</option>
              <option value="fashion" data-i18n="auth.categories.fashion">Fashion & Beauty</option>
              <option value="cleaning" data-i18n="auth.categories.cleaning">Cleaning Services</option>
              <option value="tech" data-i18n="auth.categories.tech">Technology</option>
              <option value="home" data-i18n="auth.categories.home">Home Services</option>
              <option value="retail" data-i18n="auth.categories.retail">Retail</option>
              <option value="healthcare" data-i18n="auth.categories.healthcare">Healthcare</option>
              <option value="education" data-i18n="auth.categories.education">Education</option>
              <option value="other" data-i18n="auth.categories.other">Other</option>
            </select>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="signup-country" class="form-label" data-i18n="auth.country">Country *</label>
              <select id="signup-country" class="form-input form-select" data-testid="signup-country" data-label="Country" required>
                <option value="" data-i18n="auth.selectCountry">Select country</option>
                <option value="Kuwait" data-i18n="auth.countries.kuwait" selected>Kuwait</option>
              </select>
            </div>
            <div class="form-group">
              <label for="signup-city" class="form-label" data-i18n="auth.city">City *</label>
              <input type="text" id="signup-city" class="form-input" data-testid="signup-city" data-label="City" placeholder="Your city" required>
            </div>
          </div>
          
          <div class="form-group">
            <label for="signup-desc" class="form-label" data-i18n="auth.description">Short Description *</label>
            <textarea id="signup-desc" class="form-input form-textarea" data-testid="signup-desc" data-label="Short Description" data-validate="min:10" placeholder="Describe your business in 50-140 characters" required maxlength="140"></textarea>
            <div id="desc-counter" class="char-counter">0/140</div>
          </div>
          
        </div>

          <!-- Step 2: Business Details -->
          <h3 class="step-title" data-i18n="auth.step2Title">Business Details</h3>
          <p class="step-subtitle" data-i18n="auth.step2Subtitle">Additional business information</p>
          
          <div class="form-group">
            <label for="signup-whatsapp" class="form-label" data-i18n="auth.whatsapp">WhatsApp/Phone *</label>
            <input type="tel" id="signup-whatsapp" class="form-input" data-testid="signup-whatsapp" data-label="WhatsApp/Phone" data-validate="phone" placeholder="+965-12345678" required>
          </div>
          
          <div class="form-group">
            <label for="logo-file" class="form-label" data-i18n="auth.logo">Business Logo (Optional)</label>
            <div class="file-upload">
              <input type="file" id="logo-file" class="file-upload-input" data-testid="signup-logo" data-doc="logo" accept="image/*">
              <label for="logo-file" class="file-upload-label">
                <i class="fas fa-upload"></i>
                <span data-i18n="auth.uploadLogo">Upload Logo</span>
              </label>
              <div class="logo-upload-status" id="logo-upload-status" style="display: none; margin-top: 0.5rem; padding: 0.5rem; background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 6px; color: #22c55e; font-size: 0.9rem;">
                <i class="fas fa-check-circle"></i>
                <span>Logo uploaded successfully!</span>
              </div>
              <img id="logo-preview" class="logo-preview hidden" alt="Logo preview" 
                   src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='320' height='180'><rect width='100%25' height='100%25' fill='%23222222'/><text x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23aaaaaa' font-family='Arial' font-size='16'>Logo preview</text></svg>"
                   onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22320%22 height=%22180%22><rect width=%22100%25%22 height=%22100%25%22 fill=%22%23222222%22/><text x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 fill=%22%23aaaaaa%22 font-family=%22Arial%22 font-size=%2216%22>Logo preview</text></svg>'">
            </div>
          </div>

          <!-- Step 3: Required Documents -->
          <h3 class="step-title">Required Documents | المستندات المطلوبة</h3>
          <p class="step-subtitle">Upload the required documents for verification | ارفع المستندات المطلوبة للتحقق</p>
          
          <div class="documents-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
            <!-- Business License -->
            <div class="document-card" data-document="license" style="background: rgba(17, 24, 39, 0.8); border: 1px solid rgba(212, 175, 55, 0.3); border-radius: 12px; padding: 1.5rem;">
              <div class="document-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h4 style="color: white; font-size: 1.1rem; font-weight: 600; margin: 0;">Business License | رخصة العمل</h4>
                <div class="document-status" style="display: flex; align-items: center; gap: 0.5rem;">
                  <span class="status-icon" style="font-size: 1.2rem; color: #9ca3af;">📄</span>
                  <span class="status-text" data-upload-status="license" style="color: #9ca3af; font-size: 0.9rem;">Required</span>
                </div>
              </div>
              <div class="document-upload">
                <input type="file" id="license-file" accept=".pdf,.jpg,.jpeg,.png" class="file-input" data-doc="license" style="display: none;">
                <label for="license-file" class="file-label" style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem; padding: 2rem; border: 2px dashed rgba(212, 175, 55, 0.5); border-radius: 8px; cursor: pointer; transition: all 0.3s ease; text-align: center;">
                  <span class="file-icon" style="font-size: 2rem; color: #6b7280;">📄</span>
                  <span class="file-text" style="color: #9ca3af; font-weight: 500;">Choose File | اختر ملف</span>
                  <span style="color: #6b7280; font-size: 0.8rem;">JPG, PNG, PDF (max 25MB)</span>
                </label>
                <div class="upload-progress" id="license-progress" style="display: none; margin-top: 0.5rem; padding: 0.5rem; background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 6px; color: #3b82f6; font-size: 0.9rem;">
                  <i class="fas fa-spinner fa-spin"></i>
                  <span>Uploading...</span>
                </div>
              </div>
              <div class="document-preview" id="license-preview" style="display: none;">
                <a href="#" class="file-link" target="_blank" style="color: #10b981; text-decoration: none; font-weight: 500;">View File | عرض الملف</a>
                <button type="button" class="remove-file" style="background: #ef4444; color: white; border: none; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-left: 1rem;">Remove | إزالة</button>
              </div>
            </div>

            <!-- Articles of Incorporation -->
            <div class="document-card" data-document="incorporation" style="background: rgba(17, 24, 39, 0.8); border: 1px solid rgba(212, 175, 55, 0.3); border-radius: 12px; padding: 1.5rem;">
              <div class="document-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h4 style="color: white; font-size: 1.1rem; font-weight: 600; margin: 0;">Articles of Incorporation | عقد التأسيس</h4>
                <div class="document-status" style="display: flex; align-items: center; gap: 0.5rem;">
                  <span class="status-icon" style="font-size: 1.2rem; color: #9ca3af;">📄</span>
                  <span class="status-text" data-upload-status="articles" style="color: #9ca3af; font-size: 0.9rem;">Required</span>
                </div>
              </div>
              <div class="document-upload">
                <input type="file" id="incorporation-file" accept=".pdf,.jpg,.jpeg,.png" class="file-input" data-doc="articles" style="display: none;">
                <label for="incorporation-file" class="file-label" style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem; padding: 2rem; border: 2px dashed rgba(212, 175, 55, 0.5); border-radius: 8px; cursor: pointer; transition: all 0.3s ease; text-align: center;">
                  <span class="file-icon" style="font-size: 2rem; color: #6b7280;">📄</span>
                  <span class="file-text" style="color: #9ca3af; font-weight: 500;">Choose File | اختر ملف</span>
                  <span style="color: #6b7280; font-size: 0.8rem;">JPG, PNG, PDF (max 25MB)</span>
                </label>
                <div class="upload-progress" id="articles-progress" style="display: none; margin-top: 0.5rem; padding: 0.5rem; background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 6px; color: #3b82f6; font-size: 0.9rem;">
                  <i class="fas fa-spinner fa-spin"></i>
                  <span>Uploading...</span>
                </div>
              </div>
              <div class="document-preview" id="incorporation-preview" style="display: none;">
                <a href="#" class="file-link" target="_blank" style="color: #10b981; text-decoration: none; font-weight: 500;">View File | عرض الملف</a>
                <button type="button" class="remove-file" style="background: #ef4444; color: white; border: none; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-left: 1rem;">Remove | إزالة</button>
              </div>
            </div>

            <!-- Signature Authorization -->
            <div class="document-card" data-document="signature_auth" style="background: rgba(17, 24, 39, 0.8); border: 1px solid rgba(212, 175, 55, 0.3); border-radius: 12px; padding: 1.5rem;">
              <div class="document-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h4 style="color: white; font-size: 1.1rem; font-weight: 600; margin: 0;">Signature Authorization | تفويض التوقيع</h4>
                <div class="document-status" style="display: flex; align-items: center; gap: 0.5rem;">
                  <span class="status-icon" style="font-size: 1.2rem; color: #9ca3af;">📄</span>
                  <span class="status-text" data-upload-status="signature_auth" style="color: #9ca3af; font-size: 0.9rem;">Required</span>
                </div>
              </div>
              <div class="document-upload">
                <input type="file" id="signature-file" accept=".pdf,.jpg,.jpeg,.png" class="file-input" data-doc="signature_auth" style="display: none;">
                <label for="signature-file" class="file-label" style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem; padding: 2rem; border: 2px dashed rgba(212, 175, 55, 0.5); border-radius: 8px; cursor: pointer; transition: all 0.3s ease; text-align: center;">
                  <span class="file-icon" style="font-size: 2rem; color: #6b7280;">📄</span>
                  <span class="file-text" style="color: #9ca3af; font-weight: 500;">Choose File | اختر ملف</span>
                  <span style="color: #6b7280; font-size: 0.8rem;">JPG, PNG, PDF (max 25MB)</span>
                </label>
                <div class="upload-progress" id="signature_auth-progress" style="display: none; margin-top: 0.5rem; padding: 0.5rem; background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 6px; color: #3b82f6; font-size: 0.9rem;">
                  <i class="fas fa-spinner fa-spin"></i>
                  <span>Uploading...</span>
                </div>
              </div>
              <div class="document-preview" id="signature-preview" style="display: none;">
                <a href="#" class="file-link" target="_blank" style="color: #10b981; text-decoration: none; font-weight: 500;">View File | عرض الملف</a>
                <button type="button" class="remove-file" style="background: #ef4444; color: white; border: none; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-left: 1rem;">Remove | إزالة</button>
              </div>
          </div>
          
            <!-- IBAN Certificate -->
            <div class="document-card" data-document="iban" style="background: rgba(17, 24, 39, 0.8); border: 1px solid rgba(212, 175, 55, 0.3); border-radius: 12px; padding: 1.5rem;">
              <div class="document-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h4 style="color: white; font-size: 1.1rem; font-weight: 600; margin: 0;">IBAN Certificate | شهادة الـIBAN</h4>
                <div class="document-status" style="display: flex; align-items: center; gap: 0.5rem;">
                  <span class="status-icon" style="font-size: 1.2rem; color: #9ca3af;">📄</span>
                  <span class="status-text" data-upload-status="iban" style="color: #9ca3af; font-size: 0.9rem;">Required</span>
                </div>
              </div>
              <div class="document-upload">
                <input type="file" id="iban-file" accept=".pdf,.jpg,.jpeg,.png" class="file-input" data-doc="iban" style="display: none;">
                <label for="iban-file" class="file-label" style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem; padding: 2rem; border: 2px dashed rgba(212, 175, 55, 0.5); border-radius: 8px; cursor: pointer; transition: all 0.3s ease; text-align: center;">
                  <span class="file-icon" style="font-size: 2rem; color: #6b7280;">📄</span>
                  <span class="file-text" style="color: #9ca3af; font-weight: 500;">Choose File | اختر ملف</span>
                  <span style="color: #6b7280; font-size: 0.8rem;">JPG, PNG, PDF (max 25MB)</span>
                </label>
                <div class="upload-progress" id="iban-progress" style="display: none; margin-top: 0.5rem; padding: 0.5rem; background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 6px; color: #3b82f6; font-size: 0.9rem;">
                  <i class="fas fa-spinner fa-spin"></i>
                  <span>Uploading...</span>
                </div>
              </div>
              <div class="document-preview" id="iban-preview" style="display: none;">
                <a href="#" class="file-link" target="_blank" style="color: #10b981; text-decoration: none; font-weight: 500;">View File | عرض الملف</a>
                <button type="button" class="remove-file" style="background: #ef4444; color: white; border: none; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-left: 1rem;">Remove | إزالة</button>
              </div>
            </div>
          </div>

          <!-- Step 4: Email & Password -->
          <h3 class="step-title" data-i18n="auth.step4Title">Account Credentials</h3>
          <p class="step-subtitle" data-i18n="auth.step4Subtitle">Create your login credentials</p>
          
          <div class="form-group">
            <label for="signup-email" class="form-label" data-i18n="auth.email">Email Address *</label>
            <input type="email" id="signup-email" class="form-input" data-testid="signup-email" data-label="Email" data-validate="email" placeholder="your@email.com" required>
          </div>
          
          <div class="form-group">
            <label for="signup-phone" class="form-label" data-i18n="auth.phone">Phone Number (Optional)</label>
            <input type="tel" id="signup-phone" class="form-input" data-testid="signup-phone" data-label="Phone" placeholder="+9655xxxxxxx" />
            <small class="form-help" data-i18n="auth.phoneHelp">Add your phone for SMS login option</small>
          </div>
          
          <div class="form-group">
            <label for="signup-password" class="form-label" data-i18n="auth.password">Password *</label>
            <input type="password" id="signup-password" class="form-input" data-testid="signup-password" data-label="Password" data-validate="min:8" placeholder="Create a strong password" autocomplete="new-password" required>
          </div>
          
          <div class="form-group">
            <label for="signup-confirm-password" class="form-label" data-i18n="auth.confirmPassword">Confirm Password *</label>
            <input type="password" id="signup-confirm-password" class="form-input" data-testid="signup-confirm-password" data-label="Confirm Password" placeholder="Confirm your password" autocomplete="new-password" required>
          </div>
          
          <div class="form-group">
            <div class="checkbox-group">
              <input type="checkbox" id="signup-terms" class="checkbox-input" data-label="Terms" required>
              <label for="signup-terms" class="checkbox-label" data-i18n="auth.acceptTerms">I accept the Terms and Conditions</label>
            </div>
          </div>
          
          <div class="form-navigation">
            <button type="button" id="btnCreateAccount" class="btn btn-primary" data-testid="signup-submit" data-i18n="auth.createAccount">Create My Account</button>
            <button type="button" id="btnCompleteSignup" class="btn btn-success" style="display: none;">Complete Signup</button>
          </div>
        </div>
        </form>
      </section>
    </div>
  </div>
        
  <!-- Compliance Disclaimer -->
        <div class="compliance-disclaimer" style="margin-top: 2rem; padding: 1.5rem; background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 8px; text-align: center;">
          <div class="disclaimer-content">
            <div class="disclaimer-icon" style="font-size: 2rem; margin-bottom: 1rem;">📋</div>
            <h4 style="color: #60a5fa; margin-bottom: 0.5rem; font-weight: 600;">
              Document Review Process
              <span style="display: block; font-size: 0.9rem; font-weight: 400; color: #9ca3af; margin-top: 0.25rem;">
                عملية مراجعة المستندات
              </span>
            </h4>
            <p style="color: #d1d5db; margin-bottom: 0.5rem; font-size: 0.9rem;">
              All submitted documents will be reviewed by the admin team. You can log in and use your account normally while review is pending. If documents are incorrect, you'll be notified to update them. Failure to comply may result in deactivation.
            </p>
            <p style="color: #9ca3af; font-size: 0.85rem; margin: 0;">
              سيتم مراجعة جميع المستندات المقدمة من قبل فريق الإدارة. يمكنك تسجيل الدخول واستخدام حسابك بشكل طبيعي أثناء انتظار المراجعة. إذا كانت المستندات غير صحيحة، سيتم إشعارك لتحديثها. عدم الامتثال قد يؤدي إلى إلغاء التفعيل.
            </p>
          </div>
        </div>
      </section>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3>Chamber122</h3>
        <p>Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3>Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html">Home</a></li>
            <li><a href="directory.html">Directory</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="bulletin.html">Bulletin</a></li>
            <li><a href="get-listed.html">Get Listed</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3>Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | Empowering Kuwait's MSMEs</p>
    </div>
  </footer>

  <script src="js/main.js?v=7"></script>
  <script type="module" src="./js/i18n.js"></script>
  <script type="module" src="js/config.js"></script>
  <script type="module" src="js/auth-state-manager.js"></script>
  <script type="module" src="js/signup-utils.js"></script>
  <script type="module" src="js/signup-stepper.js"></script>
  <script type="module" src="js/file-upload.js"></script>
  <script type="module" src="js/storage.js"></script>
  <script type="module" src="js/file-validate.js"></script>
  <script type="module" src="js/upload-doc.js"></script>
  <script type="module" src="js/signup-and-upload.js"></script>
  <script type="module" src="js/auth-signup.js?v=21"></script>
  <script src="js/error-handler.js?v=21"></script>
  <script type="module" src="js/signup-with-documents.js?v=21"></script>
  <script type="module" src="js/account-completeness.js"></script>
  <script type="module">
    import { initSignupPage } from '/js/signup-with-documents.js';
    
    // Initialize signup page when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      initSignupPage();
    });
  </script>
  <!-- Import authentication scripts -->
  <script type="module" src="js/modal-login-required.js"></script>
  <script type="module" src="js/guest.js"></script>
  <script type="module">
    import {
      signupWithEmailPassword,
      loginWithEmailPassword,
      sendPhoneOtp,
      verifyPhoneOtp,
      sendEmailMagicLink
    } from '/js/auth-api.js?v=21';
    import { initNavAuthState } from '/js/nav-auth-state.js';
    
    // Initialize navbar auth state
    initNavAuthState();
    
    document.addEventListener('DOMContentLoaded', () => {
      // Debug: Log configuration on page load
      import('./js/config-dev.js?v=21').then(({ logConfig }) => {
        logConfig();
      });
      
      // LOGIN: email + password - handled by auth-login.js

      // FORGOT PASSWORD - handled by auth-login.js

      // LOGIN: phone OTP (only when user chooses it)
      document.querySelector('#btnSendOtp')?.addEventListener('click', async () => {
        const phone = document.querySelector('#login-phone').value.trim();
        if (!phone) { alert('Enter your phone'); return; }
        try {
          await sendPhoneOtp(phone);
          alert('Code sent by SMS.');
          // Try WebOTP auto-fill (best-effort)
          if ('OTPCredential' in window && navigator.credentials) {
            const ac = new AbortController(); setTimeout(()=>ac.abort(), 60000);
            try {
              const cred = await navigator.credentials.get({ otp:{ transport:['sms'] }, signal: ac.signal });
              if (cred?.code) document.querySelector('#login-phone-code').value = cred.code;
            } catch(_) {}
          }
        } catch (err) { alert(err.message); }
      });

      document.querySelector('#btnVerifyOtp')?.addEventListener('click', async () => {
        const phone = document.querySelector('#login-phone').value.trim();
        const code = document.querySelector('#login-phone-code').value.trim();
        if (!phone || !code) { alert('Enter phone and code'); return; }
        try {
          await verifyPhoneOtp({ phone, code });
          location.replace('/owner-activities.html');
        } catch (err) { alert(err.message); }
      });

      // SIGNUP: email + password (+ optional phone)
      document.querySelector('#signup-form')?.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.querySelector('#signup-email').value.trim();
        const pw = document.querySelector('#signup-password').value;
        const phone = (document.querySelector('#signup-phone').value || '').trim() || null;
        
        if (!email || !pw) {
          alert('Please fill in all required fields');
          return;
        }
        
        if (pw !== document.querySelector('#signup-confirm-password').value) {
          alert('Passwords do not match');
          return;
        }
        
        const btn = e.target.querySelector('button[type="submit"]');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Account...';
        btn.disabled = true;
        
        try {
          const r = await signupWithEmailPassword({ email, password: pw, phone });
          if (r.requiresConfirm) {
            alert('Account created. Check your email to confirm, then log in.');
          } else {
            location.replace('/owner-activities.html');
          }
        } catch (err) {
          if (String(err.message).includes('already exists')) {
            const go = confirm(err.message + '\nGo to login now?');
            if (go) {
              document.querySelector('#login-email').value = email;
              location.hash = '#login';
            }
          } else {
            alert(err.message);
          }
        } finally {
          btn.innerHTML = originalText;
          btn.disabled = false;
        }
      });

      // MAGIC LINK: optional
      document.querySelector('#magicForm')?.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.querySelector('#magic-email').value.trim()
                     || document.querySelector('#login-email').value.trim()
                     || document.querySelector('#signup-email').value.trim();
        if (!email) { alert('Enter email'); return; }
        try {
          await sendEmailMagicLink(email);
          alert('Magic link sent to your email.');
        } catch (err) { alert(err.message); }
      });
    });
  </script>
  <link rel="stylesheet" href="css/modal.css?v=18">
  
  <script>
    // Password toggle function
    function togglePassword(fieldId) {
      const field = document.getElementById(fieldId);
      const toggle = field.parentNode.querySelector('.password-toggle i');
      
      if (field.type === 'password') {
        field.type = 'text';
        toggle.classList.remove('fa-eye');
        toggle.classList.add('fa-eye-slash');
      } else {
        field.type = 'password';
        toggle.classList.remove('fa-eye-slash');
        toggle.classList.add('fa-eye');
      }
    }

    // Handle URL hash routing
    document.addEventListener('DOMContentLoaded', function() {
      // Small delay to ensure all event listeners are set up
      setTimeout(() => {
        const hash = window.location.hash;
        if (hash === '#signup') {
          document.getElementById('tab-signup')?.click();
        } else if (hash === '#login') {
          document.getElementById('tab-login')?.click();
        }
      }, 100);
    });

    // Show reason if provided in URL
    const params = new URLSearchParams(location.search);
    const reason = params.get('reason');
    if (reason) {
      // Show reason in a banner at the top of the auth card
      const authCard = document.querySelector('.auth-card');
      if (authCard) {
        const reasonBanner = document.createElement('div');
        reasonBanner.style.cssText = 'background: rgba(255, 209, 102, 0.1); border: 1px solid #ffd166; border-radius: 8px; padding: 12px; margin-bottom: 16px; color: #ffd166;';
        reasonBanner.textContent = reason;
        authCard.insertBefore(reasonBanner, authCard.firstChild);
      }
    }
  </script>

  <!-- Old validation script removed - using signup-with-documents.js instead -->
  <!--
    (function () {
      // Configuration
      const CONFIG = {
        stepSelector: '.signup-step[data-step]',
        nextSelectors: '#signup-next-1, #signup-next-2, #signup-next-3, [data-next], button.next, .next-btn, #signup-next',
        backSelectors: '#btnBack, [data-back], button.back, .back-btn, .signup-back',
        maxSteps: 4
      };

      // Utility functions
      const $ = (selector, root = document) => root.querySelector(selector);
      const $$ = (selector, root = document) => Array.from(root.querySelectorAll(selector));

      // State management
      let currentStep = 1;
      let isInitialized = false;

      // Get current step element and number
      function getCurrentStep() {
        const steps = $$(CONFIG.stepSelector);
        const activeStep = steps.find(step => 
          !step.classList.contains('hidden') && 
          step.offsetParent !== null
        );
        
        if (activeStep) {
          const stepNum = parseInt(activeStep.dataset.step) || 1;
          return { element: activeStep, number: stepNum, allSteps: steps };
        }
        
        return { element: steps[0] || null, number: 1, allSteps: steps };
      }

      // Show step by number
      function showStep(stepNumber) {
        if (stepNumber < 1 || stepNumber > CONFIG.maxSteps) {
          console.warn(`[Stepper] Invalid step number: ${stepNumber}`);
          return;
        }

        const { allSteps } = getCurrentStep();
        
        // Hide all steps and show target step
        allSteps.forEach(step => {
          const isTarget = parseInt(step.dataset.step) === stepNumber;
          step.classList.toggle('hidden', !isTarget);
          step.classList.toggle('active', isTarget);
          
          // Manage required attributes
          patchRequiredAttributes(step, isTarget);
        });

        // Update step indicators
        updateStepIndicators(stepNumber);
        
        // Update progress bar
        updateProgressBar(stepNumber);
        
        // Update state
        currentStep = stepNumber;
        window.currentStep = stepNumber;
        
        console.log(`[Stepper] Now showing step ${stepNumber}`);
      }

      // Update step indicators
      function updateStepIndicators(stepNumber) {
        const indicators = $$('.step-indicator');
        indicators.forEach((indicator, index) => {
          const stepNum = index + 1;
          indicator.classList.remove('active', 'completed');
          
          if (stepNum === stepNumber) {
            indicator.classList.add('active');
          } else if (stepNum < stepNumber) {
            indicator.classList.add('completed');
          }
        });
      }

      // Update progress bar
      function updateProgressBar(stepNumber) {
        const progressBar = $('#signup-progress');
        if (progressBar) {
          const progress = (stepNumber / CONFIG.maxSteps) * 100;
          progressBar.style.width = `${progress}%`;
        }
      }

      // Patch required attributes to prevent hidden field validation
      function patchRequiredAttributes(stepElement, isVisible) {
        if (!stepElement) return;
        
        const inputs = $$('input, select, textarea', stepElement);
        inputs.forEach(input => {
          if (isVisible) {
            // Restore required if it was previously required
            if (input.dataset.wasRequired === 'true') {
              input.required = true;
              delete input.dataset.wasRequired;
            }
          } else {
            // Store and remove required to prevent validation blocking
            if (input.required) {
              input.dataset.wasRequired = 'true';
              input.required = false;
            }
          }
        });

        // Mark form as novalidate to prevent native validation
        const form = stepElement.closest('form');
        if (form) {
          form.setAttribute('novalidate', 'novalidate');
        }
      }

      // Get field value safely
      function getFieldValue(fieldId, root = document) {
        const field = $(`#${fieldId}`, root) || $(`[name="${fieldId}"]`, root);
        if (!field) return '';
        
        if (field.type === 'checkbox') {
          return field.checked;
        }
        
        return (field.value || '').trim();
      }

      // Validate step 1 (Business Information) - ONLY business fields, no WhatsApp
      function validateStep1(stepElement) {
        const name = getFieldValue('signup-name', stepElement);
        const category = getFieldValue('signup-category', stepElement);
        const country = getFieldValue('signup-country', stepElement);
        const city = getFieldValue('signup-city', stepElement);
        const description = getFieldValue('signup-desc', stepElement);

        console.log('[Stepper] Validating step 1 (business fields only):', {
          name, category, country, city, 
          description: description.substring(0, 20) + '...'
        });

        const nameValid = name.length >= 2;
        const categoryValid = category !== '';
        const countryValid = country !== '';
        const cityValid = city !== '';
        const descriptionValid = description.length >= 10; // Changed from 50 to 10

        const isValid = nameValid && categoryValid && countryValid && 
                       cityValid && descriptionValid;
        
        console.log('[Stepper] Step 1 validation result:', isValid);
        
        if (!isValid) {
          if (!nameValid) console.error('[Stepper] Business name must be at least 2 characters');
          if (!categoryValid) console.error('[Stepper] Category is required');
          if (!countryValid) console.error('[Stepper] Country is required');
          if (!cityValid) console.error('[Stepper] City is required');
          if (!descriptionValid) console.error('[Stepper] Description must be at least 10 characters');
        }

        return isValid;
      }

      // Validate step 2 (Business Details - WhatsApp required)
      function validateStep2(stepElement) {
        const whatsapp = getFieldValue('signup-whatsapp', stepElement);
        
        console.log('[Stepper] Validating step 2 (WhatsApp required):', {
          whatsapp: whatsapp ? '***' : 'empty'
        });

        const whatsappValid = whatsapp.length >= 5;
        
        console.log('[Stepper] Step 2 validation result:', whatsappValid);
        
        if (!whatsappValid) {
          console.error('[Stepper] WhatsApp/Phone is required (at least 5 characters)');
        }

        return whatsappValid;
      }

      // Validate step 3 (Required Documents)
      function validateStep3(stepElement) {
        // Check if all required documents are uploaded
        const requiredDocuments = ['license', 'incorporation', 'signature_auth', 'iban'];
        let uploadedCount = 0;
        
        requiredDocuments.forEach(docType => {
          const fileInput = document.getElementById(`${docType}-file`);
          if (fileInput && fileInput.files && fileInput.files.length > 0) {
            uploadedCount++;
          }
        });

        console.log('[Stepper] Validating step 3 (Documents):', {
          required: requiredDocuments.length,
          uploaded: uploadedCount
        });

        const isValid = uploadedCount === requiredDocuments.length;
        
        if (!isValid) {
          console.error('[Stepper] Please upload all required documents');
        }

        return isValid;
      }

      // Validate step 4 (Account Credentials)
      function validateStep4(stepElement) {
        const email = getFieldValue('signup-email', stepElement);
        const password = getFieldValue('signup-password', stepElement);
        const confirmPassword = getFieldValue('signup-confirm-password', stepElement);
        const terms = getFieldValue('signup-terms', stepElement);

        console.log('[Stepper] Validating step 4:', {
          email: email ? '***@***' : 'empty',
          password: password ? '***' : 'empty',
          confirmPassword: confirmPassword ? '***' : 'empty',
          terms
        });

        // Email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const emailValid = emailRegex.test(email);
        
        // Password validation
        const passwordValid = password.length >= 6;
        
        // Password match validation
        const passwordMatch = password === confirmPassword;
        
        // Terms validation
        const termsValid = terms === true;

        const isValid = emailValid && passwordValid && passwordMatch && termsValid;
        
        console.log('[Stepper] Step 4 validation result:', isValid);
        
        if (!isValid) {
          if (!emailValid) console.error('[Stepper] Invalid email format');
          if (!passwordValid) console.error('[Stepper] Password must be at least 6 characters');
          if (!passwordMatch) console.error('[Stepper] Passwords do not match');
          if (!termsValid) console.error('[Stepper] You must accept the terms and conditions');
        }

        return isValid;
      }

      // Show toast notification
      function showToast(message, type = 'info') {
        // Remove existing toasts
        const existingToasts = document.querySelectorAll('.signup-toast');
        existingToasts.forEach(toast => toast.remove());
        
        const toast = document.createElement('div');
        toast.className = 'signup-toast';
        toast.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          padding: 1rem 1.5rem;
          border-radius: 6px;
          color: white;
          font-weight: 500;
          z-index: 10001;
          max-width: 400px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
          ${type === 'error' ? 'background: #ef4444;' : 
            type === 'success' ? 'background: #10b981;' : 
            'background: #3b82f6;'}
        `;
        toast.textContent = message;
        
        document.body.appendChild(toast);
        
        // Auto remove after 5 seconds
        setTimeout(() => {
          if (toast.parentNode) {
            toast.parentNode.removeChild(toast);
          }
        }, 5000);
      }

      // OLD HANDLE NEXT CLICK DISABLED - Using new step-level validation system
      async function handleNextClick(event) {
        // This function is disabled - new validation system handles everything
        console.log('[Stepper] Old handleNextClick disabled - using new validation system');
        return;
        
        // DISABLED CODE BELOW - DO NOT UNCOMMENT
        if (false) {
        event.preventDefault();
        
        const { element: currentElement, number: stepNumber } = getCurrentStep();
        
        console.log(`[Stepper] Next clicked - current step: ${stepNumber}`);
        
        // Prevent form submission
        if (event.submitter && event.submitter.form) {
          event.submitter.form.noValidate = true;
        }

        // Debug bypass - set window.SIGNUP_DEBUG_BYPASS = true in console to skip validation
        if (window.SIGNUP_DEBUG_BYPASS === true) {
          console.warn('[Stepper] DEBUG BYPASS enabled - skipping validation');
          showStep(stepNumber + 1);
          return;
        }

        // Validate current step
        let validationPassed = true;
        
        if (stepNumber === 1) {
          validationPassed = validateStep1(currentElement);
        } else if (stepNumber === 2) {
          validationPassed = validateStep2(currentElement);
        } else if (stepNumber === 3) {
          validationPassed = validateStep3(currentElement);
        } else if (stepNumber === 4) {
          validationPassed = validateStep4(currentElement);
        }

        if (!validationPassed) {
          console.log('[Stepper] Validation failed - staying on current step');
          return;
        }

        console.log('[Stepper] Validation passed - processing step data');

        // OLD VALIDATION SYSTEM COMPLETELY DISABLED - Using new per-step validation instead
        // This entire block is disabled to prevent email prompts on Step 1
        if (false) {
          try {
            // Import the signup utils
            const { ensureSignedIn, collectStepOneFields, collectStepTwoFields, collectStepThreeFields, collectStepFourFields } = await import('./js/signup-utils.js');
            const { supabase, getAccountAndCompleteness } = await import('/js/supabase-client.js');
            
            // Ensure user is signed in
            const user = await ensureSignedIn();
            if (!user) {
              console.log('[Stepper] User not signed in - showing sign-in modal');
              return; // User will complete sign-in and click Next again
            }

            console.log('[Stepper] User signed in:', user.email);

            // Collect and save step data
            let stepData = {};
            if (stepNumber === 1) {
              stepData = collectStepOneFields();
              // Save to businesses table
              const { error } = await supabase.from('businesses').upsert({
                owner_id: user.id,
                name: stepData.name,
                industry: stepData.category,
                country: stepData.country,
                city: stepData.city,
                short_description: stepData.description,
                whatsapp: stepData.whatsapp
              }, { onConflict: 'owner_id' });
              
              if (error) {
                console.error('[Stepper] Error saving step 1:', error);
                showToast('Error saving business information: ' + error.message, 'error');
                return;
              }
            }
            // Add other steps as needed...

            // Check completeness and determine next step
            const { data: completenessData, error: completenessError } = await getAccountAndCompleteness();
            if (completenessError) {
              console.error('[Stepper] Error checking completeness:', completenessError);
              showToast('Error checking progress: ' + completenessError.message, 'error');
              return;
            }

            const nextStep = completenessData?.next_step;
            console.log('[Stepper] Next step from completeness:', nextStep);

            if (nextStep === 'done' || nextStep === 'dashboard') {
              console.log('[Stepper] Signup complete - redirecting to dashboard');
              window.location.assign('/owner-activities.html');
              return;
            }

          } catch (error) {
            console.error('[Stepper] Error processing step:', error);
            showToast('Error processing step: ' + error.message, 'error');
            return;
          }
        }

        console.log('[Stepper] Moving to next step');
        showStep(stepNumber + 1);
      }

      // Handle back button click
      function handleBackClick(event) {
        event.preventDefault();
        
        const { number: stepNumber } = getCurrentStep();
        const previousStep = Math.max(1, stepNumber - 1);
        
        console.log(`[Stepper] Back clicked - going from step ${stepNumber} to ${previousStep}`);
        showStep(previousStep);
      }

      // Initialize event listeners
      function initializeEventListeners() {
        if (isInitialized) {
          console.warn('[Stepper] Already initialized - skipping');
          return;
        }

        // OLD BUTTON BINDING DISABLED - Using new validation system
        // const nextButtons = $$(CONFIG.nextSelectors);
        // nextButtons.forEach(button => {
        //   if (button) {
        //     button.type = 'button'; // Prevent form submission
        //     button.addEventListener('click', handleNextClick);
        //     console.log('[Stepper] Bound next button:', button.id || button.className);
        //   }
        // });

        // Bind back buttons
        const backButtons = $$(CONFIG.backSelectors);
        backButtons.forEach(button => {
          if (button) {
            button.type = 'button'; // Prevent form submission
            button.addEventListener('click', handleBackClick);
            console.log('[Stepper] Bound back button:', button.id || button.className);
          }
        });

        // Initialize step display
        showStep(1);
        
        isInitialized = true;
        console.log('[Stepper] Initialization complete');
      }

      // Initialize when DOM is ready
      function initialize() {
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initializeEventListeners);
        } else {
          initializeEventListeners();
        }
      }

      // Start initialization
      initialize();

      // Debug helpers
      window.__signupDebug = {
        getCurrentStep: () => getCurrentStep().number,
        showStep: (n) => showStep(n),
        forceNext: () => handleNextClick(new Event('click')),
        validateStep1: () => validateStep1(getCurrentStep().element),
        validateStep2: () => validateStep2(getCurrentStep().element),
        bypass: () => { window.SIGNUP_DEBUG_BYPASS = true; },
        unbypass: () => { window.SIGNUP_DEBUG_BYPASS = false; }
      };

    })();
  -->

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MSME Bulletin | Chamber122</title>
  <meta name="description" content="Stay updated with community announcements, job postings, and opportunities for MSMEs in Kuwait.">
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <link rel="stylesheet" href="/css/header.css?v=1">
  <link rel="stylesheet" href="/css/style.css?v=16">
  <link rel="stylesheet" href="/css/modal.css?v=2">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script type="module" src="/js/supabase-client.js?v=20"></script>
  <script type="module" src="/js/header-auth-slot.js?v=7"></script>
  <script type="module" src="/js/bulletins.js?v=2"></script>
  <style>
    /* Bulletin List Styling */
    .bulletin-list-container {
      display: grid;
      gap: 20px;
      margin-top: 30px;
    }
    
    .bulletin-card {
      background: #1a1a1a;
      border: 1px solid #2a2a2a;
      border-radius: 12px;
      padding: 20px;
      transition: all 0.2s ease;
    }
    
    .bulletin-card:hover {
      border-color: var(--gold);
      transform: translateY(-2px);
    }
    
    .bulletin-header {
      margin-bottom: 15px;
    }
    
    .bulletin-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .bulletin-type {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
      color: white;
    }
    
    .bulletin-date {
      color: #a0a0a0;
      font-size: 0.85rem;
    }
    
    .bulletin-title {
      color: #e0e0e0;
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }
    
    .bulletin-description {
      color: #c0c0c0;
      line-height: 1.6;
      margin-bottom: 15px;
    }
    
    .bulletin-location,
    .bulletin-deadline {
      color: #a0a0a0;
      font-size: 0.9rem;
      margin-bottom: 8px;
    }
    
    .bulletin-location i,
    .bulletin-deadline i {
      margin-right: 6px;
      color: var(--gold);
    }
    
    .bulletin-details {
      border-top: 1px solid #2a2a2a;
      padding-top: 15px;
      margin-top: 15px;
    }
    
    .bulletin-company {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #a0a0a0;
    }
    
    .company-logo {
      width: 24px;
      height: 24px;
      border-radius: 4px;
      object-fit: cover;
    }
    
    .attachment-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--gold);
      text-decoration: none;
      margin-top: 10px;
      padding: 6px 12px;
      background: rgba(212, 175, 55, 0.1);
      border-radius: 6px;
      transition: all 0.2s;
    }
    
    .attachment-link:hover {
      background: rgba(212, 175, 55, 0.2);
    }
    
    .no-bulletins {
      text-align: center;
      color: #a0a0a0;
      padding: 40px;
      font-style: italic;
    }
    
    /* Modal Styling */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    .modal-content {
      background: #1a1a1a;
      border: 1px solid #2a2a2a;
      border-radius: 12px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .modal-header {
      padding: 20px;
      border-bottom: 1px solid #2a2a2a;
      position: relative;
    }
    
    .modal-header h2 {
      margin: 0;
      color: #e0e0e0;
    }
    
    .modal-header p {
      margin: 5px 0 0 0;
      color: #a0a0a0;
      font-size: 0.9rem;
    }
    
    .modal-close {
      position: absolute;
      top: 15px;
      right: 20px;
      background: none;
      border: none;
      color: #a0a0a0;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .modal-close:hover {
      color: #e0e0e0;
    }
    
    .modal-body {
      padding: 20px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 6px;
      color: #e0e0e0;
      font-weight: 500;
    }
    
    .form-input {
      width: 100%;
      padding: 10px 12px;
      background: #0f0f0f;
      border: 1px solid #2a2a2a;
      border-radius: 6px;
      color: #e0e0e0;
      font-size: 0.9rem;
    }
    
    .form-input:focus {
      outline: none;
      border-color: var(--gold);
    }
    
    .form-help {
      display: block;
      margin-top: 4px;
      color: #a0a0a0;
      font-size: 0.8rem;
    }
    
    .form-actions {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #2a2a2a;
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .btn-secondary {
      background: #374151;
      color: #e0e0e0;
    }
    
    .btn-secondary:hover {
      background: #4b5563;
    }
    
    .btn-primary {
      background: var(--gold);
      color: #0f0f0f;
    }
    
    .btn-primary:hover {
      background: #e6b800;
    }
    
    /* FAB Styling */
    .floating-action {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 100;
    }
    
    .fab {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #ef4444;
      color: white;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .fab:hover {
      background: #dc2626;
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
    }
    
    @media (max-width: 768px) {
      .modal-content {
        width: 95%;
        margin: 20px;
      }
      
      .form-actions {
        flex-direction: column;
      }
      
      .fab {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
      }
      
      .floating-action {
        bottom: 20px;
        right: 20px;
      }
    }
  </style>
</head>
<body data-type="announcement">
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">
      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link active" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn" data-testid="lang-switch-en">EN</button> |
          <button data-lang="ar" class="lang-btn" data-testid="lang-switch-ar">AR</button>
        </span>
        <!-- Auth slot for session-aware rendering -->
        <span id="auth-slot">
          <a class="btn" href="/auth.html">Login</a>
          <a class="btn primary" href="/auth.html#signup">Sign Up &amp; Get Listed</a>
        </span>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="directory.html" class="mobile-link">Directory</a>
      <a href="events.html" class="mobile-link">Events</a>
      <a href="bulletin.html" class="mobile-link">Bulletin</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="contact.html" class="mobile-link">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        My Business
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        My Activities
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        Admin Panel
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        Login
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        Sign Up & Get Listed
      </a>
    </div>
  </nav>

  <!-- Bulletin Header -->
  <section class="bulletin-header">
    <div class="bulletin-hero">
      <h1 data-i18n="page.title">MSME Bulletin</h1>
      <p data-i18n="page.subtitle">Stay updated with announcements, job postings, training opportunities, and funding information from the MSME community</p>
    </div>
    
    <!-- Search and Filter Bar -->
    <div class="filter-container">
      <div class="filter-bar">
        <div class="filter-group">
          <label for="q" data-i18n="search.label">Search Bulletin</label>
          <input type="text" id="q" class="filter-input" placeholder-i18n data-i18n="search.placeholder" placeholder="Search by title, description, or business...">
        </div>
        <div class="filter-group">
          <label for="range" data-i18n="filters.dateRange">Date Range</label>
          <select id="range" class="filter-input">
            <option value="all" data-i18n="filters.allPosts">All Posts</option>
            <option value="today" data-i18n="filters.today">Today</option>
            <option value="upcoming" data-i18n="filters.upcoming">Upcoming</option>
            <option value="past" data-i18n="filters.past">Past</option>
          </select>
        </div>
      </div>
    </div>
  </section>

  <!-- Bulletin Grid -->
  <section class="bulletin-grid-section">
    <div class="bulletin-grid" id="bulletin-grid">
      <!-- Bulletin posts will be populated by JavaScript -->
    </div>

    <div class="load-more-container">
      <button class="load-more-btn" onclick="loadMoreActivities()">
        <i class="fas fa-plus"></i> Load More Posts
      </button>
    </div>
  </section>

  <!-- Required Elements for Bulletin Feature -->
  <div id="bulletinList"></div>
  <button id="fabAddBulletin" class="fab-red" data-bulletin="add" aria-label="Add bulletin">+</button>
  <div id="bulletinModal" hidden></div>
  
  <!-- Bulletin List Container for New Modal System -->
  <div id="bulletins-list" data-bulletins="list"></div>
  
  <!-- Modal Root (script will create if missing) -->
  <div id="modal-root" class="modal-root"></div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3 data-i18n="footer.aboutTitle">Chamber122</h3>
        <p data-i18n="footer.about">Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.quick">Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html" data-i18n="nav.home">Home</a></li>
            <li><a href="directory.html" data-i18n="nav.directory">Directory</a></li>
            <li><a href="events.html" data-i18n="nav.events">Events</a></li>
            <li><a href="bulletin.html" data-i18n="nav.bulletin">Bulletin</a></li>
            <li><a href="get-listed.html" data-i18n="cta.getListed">Get Listed</a></li>
            <li><a href="about.html" data-i18n="nav.about">About</a></li>
            <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.contactInfo">Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | <span data-i18n="footer.empowering">Empowering Kuwait's MSMEs</span></p>
    </div>
  </footer>

  <script src="/js/main.js?v=7"></script>
  <script type="module" src="/js/activities-list.js"></script>
  <script type="module" src="/js/language-switcher.js"></script>
  <script type="module" src="./js/i18n.js"></script>
  
  <!-- Bulletin Feature Scripts -->
  <link rel="stylesheet" href="/bulletin/bulletin.css" />
  <script type="module" src="/bulletin/fab.js"></script>
  <script type="module" src="/bulletin/list.js"></script>

  <!-- Auth Required Modal -->
  <div id="auth-required-modal" style="position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.6); z-index:9999;">
    <div style="width:min(520px,92vw); background:#0f0f0f; color:#eaeaea; border:1px solid #2a2a2a; border-radius:16px; padding:20px;">
      <h3 style="margin:0 0 8px; font-size:20px;">Login required</h3>
      <p id="auth-required-reason" style="margin:0 0 16px; opacity:.9;">You need to be signed in to continue.</p>
      <div style="display:flex; gap:12px; justify-content:flex-end; flex-wrap:wrap;">
        <button id="bulletin-auth-cancel" style="padding:10px 14px; background:#1a1a1a; border:1px solid #3a3a3a; color:#dcdcdc; border-radius:10px; cursor:pointer;">Cancel</button>
        <button id="auth-guest" style="padding:10px 14px; background:#111; border:1px solid #3a3a3a; color:#ffd166; border-radius:10px; cursor:pointer;">Continue as Guest</button>
        <button id="auth-go" style="padding:10px 14px; background:#ffd166; color:#111; border:none; border-radius:10px; cursor:pointer; font-weight:600;">Sign in</button>
      </div>
    </div>
  </div>

  <!-- Guest Email Prompt -->
  <div id="guest-email-modal" style="position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.6); z-index:10000;">
    <div style="width:min(420px,92vw); background:#0f0f0f; color:#eaeaea; border:1px solid #2a2a2a; border-radius:16px; padding:20px;">
      <h3 style="margin:0 0 8px; font-size:18px;">Continue as Guest</h3>
      <p style="margin:0 0 8px; opacity:.9;">Enter your email. Your submission will be <b>reviewed</b> before publishing.</p>
      <label for="bulletin-guest-email-input" class="sr-only">Email address</label>
      <input id="bulletin-guest-email-input" type="email" placeholder="you@example.com" style="width:100%; padding:10px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; margin:8px 0;" aria-label="Email address">
      <div style="display:flex; gap:12px; justify-content:flex-end;">
        <button id="guest-cancel" style="padding:10px 14px; background:#1a1a1a; border:1px solid #3a3a3a; color:#dcdcdc; border-radius:10px; cursor:pointer;">Cancel</button>
        <button id="guest-continue" style="padding:10px 14px; background:#ffd166; color:#111; border:none; border-radius:10px; cursor:pointer; font-weight:600;">Continue</button>
      </div>
    </div>
  </div>

  <!-- Guest Bulletin Modal -->
  <div id="guest-bulletin-modal" data-testid="guest-bulletin-modal" style="position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.6); z-index:9998;">
    <div style="width:min(600px,94vw); background:#0f0f0f; color:#eaeaea; border:1px solid #2a2a2a; border-radius:16px; padding:20px;">
      <h3 style="margin:0 0 8px;">Post to Bulletin (Guest)</h3>
      <p style="margin:0 0 12px; opacity:.9;">Guest posts are reviewed before publishing.</p>
      <label for="gb-title">Title</label>
      <input id="gb-title" data-testid="guest-bulletin-title" style="width:100%; padding:10px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; margin:6px 0;">
      <label for="gb-content">Content</label>
      <textarea id="gb-content" data-testid="guest-bulletin-content" rows="5" style="width:100%; padding:10px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; margin:6px 0;"></textarea>
      <div style="display:flex; gap:12px; justify-content:flex-end; margin-top:10px;">
        <button id="gb-cancel" data-testid="guest-bulletin-cancel" style="padding:10px 14px; background:#1a1a1a; border:1px solid #3a3a3a; color:#dcdcdc; border-radius:10px; cursor:pointer;">Cancel</button>
        <button id="gb-submit" data-testid="guest-bulletin-submit" style="padding:10px 14px; background:#ffd166; color:#111; border:none; border-radius:10px; cursor:pointer; font-weight:600;">Submit for Review</button>
      </div>
    </div>
  </div>

  <script type="module">
    import { startGuest } from '/js/guest.js';

    const authModal = document.getElementById('auth-required-modal');
    const reasonEl  = document.getElementById('auth-required-reason');
    const btnCancel = document.getElementById('auth-cancel');
    const btnGuest  = document.getElementById('auth-guest');
    const btnGo     = document.getElementById('auth-go');

    const guestModal    = document.getElementById('guest-email-modal');
    const guestInput    = document.getElementById('guest-email-input');
    const guestCancel   = document.getElementById('guest-cancel');
    const guestContinue = document.getElementById('guest-continue');

    let _ctx = { reason: '', redirect: location.pathname + location.search, onGuestReady: null };

    window.showAuthRequiredModal = function ({ reason = '', redirect = location.pathname + location.search, onGuestReady = null } = {}) {
      _ctx = { reason, redirect, onGuestReady };
      if (reasonEl) reasonEl.textContent = reason || 'You need to be signed in to continue.';
      authModal.style.display = 'flex';
    };

    function closeAuth() { authModal.style.display = 'none'; }
    function openGuest() { guestModal.style.display = 'flex'; }
    function closeGuest() { guestModal.style.display = 'none'; }

    btnCancel?.addEventListener('click', closeAuth);
    authModal?.addEventListener('click', (e) => { if (e.target === authModal) closeAuth(); });
    btnGo?.addEventListener('click', () => {
      const params = new URLSearchParams({ redirect: _ctx.redirect, reason: _ctx.reason });
      location.href = `/auth.html?${params.toString()}`;
    });

    btnGuest?.addEventListener('click', () => {
      closeAuth();
      openGuest();
      guestInput?.focus();
    });

    guestCancel?.addEventListener('click', closeGuest);
    guestModal?.addEventListener('click', (e) => { if (e.target === guestModal) closeGuest(); });
    guestContinue?.addEventListener('click', () => {
      const email = (guestInput?.value || '').trim();
      try {
        startGuest(email);
        closeGuest();
        if (typeof _ctx.onGuestReady === 'function') _ctx.onGuestReady();
      } catch {
        alert('Please enter a valid email to continue as Guest.');
      }
    });
  </script>

  <!-- Import authentication and gating scripts -->
  <script type="module" src="/js/gating.js"></script>
  <script type="module" src="/js/modal-login-required.js"></script>
  <script type="module" src="/js/guest.js"></script>
  <script type="module" src="/js/compliance-guards.js"></script>
  <link rel="stylesheet" href="/css/modal.css">
  
  <!-- Initialize authentication state -->
</body>
</html>

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Compliance & Verification | Chamber122</title>
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=16">
  <link rel="stylesheet" href="css/header.css?v=1">
  <link rel="stylesheet" href="css/compliance.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
  <!-- Global Header -->
  <div id="site-header"></div>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="header-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <nav class="header-nav">
        <a href="index.html" class="nav-link" data-i18n="global.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="global.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="global.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="global.bulletin">Bulletin</a>
        <a href="owner.html" class="nav-link" data-i18n="global.dashboard">Dashboard</a>
        <button id="logout-btn" class="btn btn-outline" style="display: none;">Logout</button>
      </nav>
    </div>
  </header>

  <!-- Compliance Status Banner -->
  <div id="compliance-banner" class="compliance-banner" style="display: none;">
    <div class="banner-content">
      <div class="banner-icon">📋</div>
      <div class="banner-text">
        <div class="banner-title" id="banner-title">Compliance Status</div>
        <div class="banner-subtitle" id="banner-subtitle">Status message</div>
      </div>
      <button id="banner-action" class="btn btn-primary">Update Now</button>
    </div>
  </div>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <!-- Page Header -->
      <div class="page-header">
        <h1 class="page-title">
          Compliance & Verification
          <span class="page-subtitle">الامتثال والتحقق</span>
        </h1>
        <p class="page-description">
          Complete your business information and upload required documents for verification.
          <span class="page-description-ar">أكمل معلومات عملك وارفع المستندات المطلوبة للتحقق.</span>
        </p>
      </div>

      <!-- Compliance Status Card -->
      <div class="compliance-status-card">
        <div class="status-header">
          <h3>Current Status | الحالة الحالية</h3>
          <div id="status-chip" class="status-chip status-pending">
            <span class="status-text">Under Review | قيد المراجعة</span>
          </div>
        </div>
        <div id="status-details" class="status-details">
          <!-- Status details will be populated by JavaScript -->
        </div>
      </div>

      <!-- Compliance Form -->
      <div class="compliance-form-container">
        <!-- Step Navigation -->
        <div class="step-navigation">
          <div class="step-item active" data-step="1">
            <div class="step-number">1</div>
            <div class="step-label">Business Info | معلومات العمل</div>
          </div>
          <div class="step-item" data-step="2">
            <div class="step-number">2</div>
            <div class="step-label">Documents | المستندات</div>
          </div>
        </div>

        <!-- Step 1: Business Information -->
        <div id="step-1" class="compliance-step active">
          <div class="step-header">
            <h3>Business Information | معلومات العمل</h3>
            <p>Provide your business details and contact information.</p>
          </div>

          <form id="business-form" class="compliance-form">
            <div class="form-grid">
              <!-- Business Name -->
              <div class="form-group">
                <label for="business-name" class="form-label">
                  Business Name | اسم المنشأة
                  <span class="required">*</span>
                </label>
                <input type="text" id="business-name" name="name" class="form-input" required>
              </div>

              <!-- Industry -->
              <div class="form-group">
                <label for="business-industry" class="form-label">
                  Industry | الصناعة
                </label>
                <select id="business-industry" name="industry" class="form-select">
                  <option value="">Select Industry | اختر الصناعة</option>
                  <option value="retail">Retail | تجارة التجزئة</option>
                  <option value="restaurant">Restaurant | مطعم</option>
                  <option value="services">Services | خدمات</option>
                  <option value="manufacturing">Manufacturing | تصنيع</option>
                  <option value="technology">Technology | تكنولوجيا</option>
                  <option value="healthcare">Healthcare | رعاية صحية</option>
                  <option value="education">Education | تعليم</option>
                  <option value="other">Other | أخرى</option>
                </select>
              </div>

              <!-- Country -->
              <div class="form-group">
                <label for="business-country" class="form-label">
                  Country | الدولة
                </label>
                <select id="business-country" name="country" class="form-select">
                  <option value="">Select Country | اختر الدولة</option>
                  <option value="UAE">United Arab Emirates | الإمارات العربية المتحدة</option>
                  <option value="SA">Saudi Arabia | المملكة العربية السعودية</option>
                  <option value="KW">Kuwait | الكويت</option>
                  <option value="QA">Qatar | قطر</option>
                  <option value="BH">Bahrain | البحرين</option>
                  <option value="OM">Oman | عمان</option>
                  <option value="other">Other | أخرى</option>
                </select>
              </div>

              <!-- Contact Email -->
              <div class="form-group">
                <label for="contact-email" class="form-label">
                  Contact Email | البريد الإلكتروني
                </label>
                <input type="email" id="contact-email" name="contact_email" class="form-input">
              </div>

              <!-- Phone -->
              <div class="form-group">
                <label for="phone" class="form-label">
                  Phone | رقم الهاتف
                </label>
                <input type="tel" id="phone" name="phone" class="form-input">
              </div>

              <!-- WhatsApp -->
              <div class="form-group">
                <label for="whatsapp" class="form-label">
                  WhatsApp | واتساب
                </label>
                <input type="tel" id="whatsapp" name="whatsapp" class="form-input">
              </div>

              <!-- Languages -->
              <div class="form-group">
                <label class="form-label">
                  Languages | اللغات
                </label>
                <div class="language-chips">
                  <label class="language-chip">
                    <input type="checkbox" name="languages" value="ar" checked>
                    <span>العربية</span>
                  </label>
                  <label class="language-chip">
                    <input type="checkbox" name="languages" value="en" checked>
                    <span>English</span>
                  </label>
                </div>
              </div>

              <!-- About Short -->
              <div class="form-group full-width">
                <label for="about-short" class="form-label">
                  Business Description | وصف العمل
                </label>
                <textarea id="about-short" name="about_short" class="form-textarea" rows="3" placeholder="Brief description of your business..."></textarea>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" id="next-step-1" class="btn btn-primary">Next | التالي</button>
            </div>
          </form>
        </div>

        <!-- Step 2: Documents Upload -->
        <div id="step-2" class="compliance-step">
          <div class="step-header">
            <h3>Required Documents | المستندات المطلوبة</h3>
            <p>Upload the required documents for verification.</p>
          </div>

          <div class="documents-grid">
            <!-- Business License -->
            <div class="document-card" data-document="license">
              <div class="document-header">
                <h4>Business License | رخصة العمل</h4>
                <div class="document-status">
                  <span class="status-icon">❌</span>
                  <span class="status-text">Not Uploaded</span>
                </div>
              </div>
              <div class="document-upload">
                <input type="file" id="license-file" accept=".pdf,.jpg,.jpeg,.png" class="file-input">
                <label for="license-file" class="file-label">
                  <span class="file-icon">📄</span>
                  <span class="file-text">Choose File | اختر ملف</span>
                </label>
              </div>
              <div class="document-preview" id="license-preview" style="display: none;">
                <a href="#" class="file-link" target="_blank">View File | عرض الملف</a>
                <button type="button" class="remove-file">Remove | إزالة</button>
              </div>
            </div>

            <!-- Articles of Incorporation -->
            <div class="document-card" data-document="incorporation">
              <div class="document-header">
                <h4>Articles of Incorporation | عقد التأسيس</h4>
                <div class="document-status">
                  <span class="status-icon">❌</span>
                  <span class="status-text">Not Uploaded</span>
                </div>
              </div>
              <div class="document-upload">
                <input type="file" id="incorporation-file" accept=".pdf,.jpg,.jpeg,.png" class="file-input">
                <label for="incorporation-file" class="file-label">
                  <span class="file-icon">📄</span>
                  <span class="file-text">Choose File | اختر ملف</span>
                </label>
              </div>
              <div class="document-preview" id="incorporation-preview" style="display: none;">
                <a href="#" class="file-link" target="_blank">View File | عرض الملف</a>
                <button type="button" class="remove-file">Remove | إزالة</button>
              </div>
            </div>

            <!-- Signature Authorization -->
            <div class="document-card" data-document="signature_auth">
              <div class="document-header">
                <h4>Signature Authorization | تفويض التوقيع</h4>
                <div class="document-status">
                  <span class="status-icon">❌</span>
                  <span class="status-text">Not Uploaded</span>
                </div>
              </div>
              <div class="document-upload">
                <input type="file" id="signature-file" accept=".pdf,.jpg,.jpeg,.png" class="file-input">
                <label for="signature-file" class="file-label">
                  <span class="file-icon">📄</span>
                  <span class="file-text">Choose File | اختر ملف</span>
                </label>
              </div>
              <div class="document-preview" id="signature-preview" style="display: none;">
                <a href="#" class="file-link" target="_blank">View File | عرض الملف</a>
                <button type="button" class="remove-file">Remove | إزالة</button>
              </div>
            </div>

            <!-- IBAN Certificate -->
            <div class="document-card" data-document="iban">
              <div class="document-header">
                <h4>IBAN Certificate | شهادة الـIBAN</h4>
                <div class="document-status">
                  <span class="status-icon">❌</span>
                  <span class="status-text">Not Uploaded</span>
                </div>
              </div>
              <div class="document-upload">
                <input type="file" id="iban-file" accept=".pdf,.jpg,.jpeg,.png" class="file-input">
                <label for="iban-file" class="file-label">
                  <span class="file-icon">📄</span>
                  <span class="file-text">Choose File | اختر ملف</span>
                </label>
              </div>
              <div class="document-preview" id="iban-preview" style="display: none;">
                <a href="#" class="file-link" target="_blank">View File | عرض الملف</a>
                <button type="button" class="remove-file">Remove | إزالة</button>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" id="prev-step-2" class="btn btn-secondary">Back | رجوع</button>
            <button type="button" id="save-documents" class="btn btn-primary">Save Documents | حفظ المستندات</button>
            <button type="button" id="submit-review" class="btn btn-success" style="display: none;">Submit for Review | إرسال للمراجعة</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Scripts -->
  <script type="module" src="js/config.js"></script>
  <script type="module" src="js/supabase-client.js"></script>
  <script type="module" src="js/file-upload.js"></script>
  <script type="module" src="js/compliance.js"></script>
  <script type="module" src="js/auth-state-manager.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <link rel="stylesheet" href="/css/header.css?v=1">
  <script type="module" src="/js/supabase-client.js?v=20"></script>
  <script type="module" src="/js/header-auth-slot.js?v=7"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Contact Us | Chamber122</title>
  <meta name="description" content="Get in touch with Chamber122. Contact us for support, partnerships, or any questions about our MSME community platform.">
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=16">
  <link rel="stylesheet" href="css/header.css?v=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">

      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link active" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn">EN</button> |
          <button data-lang="ar" class="lang-btn">AR</button>
        </span>
        <!-- Auth slot for session-aware header -->
        <span id="auth-slot">
          <a class="btn" href="/auth.html">Login</a>
          <a class="btn primary" href="/auth.html#signup">Sign Up &amp; Get Listed</a>
        </span>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="directory.html" class="mobile-link">Directory</a>
      <a href="events.html" class="mobile-link">Events</a>
      <a href="bulletin.html" class="mobile-link">Bulletin</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="contact.html" class="mobile-link">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        My Business
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        My Activities
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        Admin Panel
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        Login
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        Sign Up & Get Listed
      </a>
    </div>
  </nav>

  <!-- Contact Hero -->
  <section class="contact-hero">
    <div class="contact-floating-elements">
      <div class="contact-floating-icon icon-1">
        <i class="fas fa-envelope"></i>
      </div>
      <div class="contact-floating-icon icon-2">
        <i class="fas fa-phone"></i>
      </div>
      <div class="contact-floating-icon icon-3">
        <i class="fas fa-comments"></i>
      </div>
      <div class="contact-floating-icon icon-4">
        <i class="fas fa-handshake"></i>
      </div>
    </div>
    <div class="contact-hero-content">
      <h1 data-i18n="page.title">Contact Us</h1>
      <p class="hero-subtitle" data-i18n="page.subtitle">We're here to help you succeed. Reach out for support, partnerships, or any questions about Chamber122.</p>
    </div>
  </section>

  <!-- Contact Content -->
  <section class="contact-content">
    <div class="contact-container">
      <!-- Get In Touch Section - Prominent -->
      <div class="get-in-touch-section">
        <div class="get-in-touch-header">
          <h2 data-i18n="getInTouch.title">Get In Touch</h2>
          <p data-i18n="getInTouch.subtitle">Connect with us through your preferred channel</p>
        </div>
        
        <div class="contact-methods-grid">
          <div class="contact-method-card whatsapp">
            <div class="contact-icon">
              <i class="fab fa-whatsapp"></i>
            </div>
            <div class="contact-details">
              <h3 data-i18n="getInTouch.phone.title">Phone</h3>
              <p data-i18n="getInTouch.phone.description">Quick responses for urgent matters</p>
              <a href="https://wa.me/96522396999" class="contact-link">
                <i class="fas fa-phone"></i> <span data-i18n="getInTouch.phone.number">+965 22396999</span>
              </a>
            </div>
          </div>
          
          <div class="contact-method-card email">
            <div class="contact-icon">
              <i class="fas fa-envelope"></i>
            </div>
            <div class="contact-details">
              <h3 data-i18n="getInTouch.email.title">Email</h3>
              <p data-i18n="getInTouch.email.description">For detailed inquiries and support</p>
              <a href="mailto:info@chamber122.com" class="contact-link">
                <i class="fas fa-envelope"></i> <span data-i18n="getInTouch.email.address">info@chamber122.com</span>
              </a>
            </div>
          </div>
          
          <div class="contact-method-card instagram">
            <div class="contact-icon">
              <i class="fab fa-instagram"></i>
            </div>
            <div class="contact-details">
              <h3 data-i18n="getInTouch.instagram.title">Instagram</h3>
              <p data-i18n="getInTouch.instagram.description">Follow us for updates and community highlights</p>
              <a href="https://instagram.com/chamber_122_kw" class="contact-link">
                <i class="fab fa-instagram"></i> <span data-i18n="getInTouch.instagram.handle">@chamber_122_kw</span>
              </a>
            </div>
          </div>
          
          <div class="contact-method-card tiktok">
            <div class="contact-icon">
              <i class="fab fa-tiktok"></i>
            </div>
            <div class="contact-details">
              <h3 data-i18n="getInTouch.tiktok.title">TikTok</h3>
              <p data-i18n="getInTouch.tiktok.description">Watch our latest content and updates</p>
              <a href="https://www.tiktok.com/@chamber122" class="contact-link">
                <i class="fab fa-tiktok"></i> <span data-i18n="getInTouch.tiktok.handle">@Chamber 122</span>
              </a>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Contact Form Section -->
      <div class="contact-form-section">
        <div class="form-header">
          <h2 data-i18n="form.title">Send Us a Message</h2>
          <p data-i18n="form.subtitle">Fill out the form below and we'll get back to you within 24 hours.</p>
        </div>
        
        <form id="contact-form" class="contact-form">
          <div class="form-row">
          <div class="form-group">
            <label for="contact-name" data-i18n="form.fullName.label">Full Name *</label>
            <input type="text" id="contact-name" name="contact-name" class="form-input" required placeholder-i18n data-i18n="form.fullName.placeholder" placeholder="Enter your full name">
          </div>
          
          <div class="form-group">
            <label for="contact-email" data-i18n="form.email.label">Email Address *</label>
            <input type="email" id="contact-email" name="contact-email" class="form-input" required placeholder-i18n data-i18n="form.email.placeholder" placeholder="your@email.com">
            </div>
          </div>
          
          <div class="form-row">
          <div class="form-group">
            <label for="contact-phone" data-i18n="form.phone.label">Phone Number</label>
            <input type="tel" id="contact-phone" name="contact-phone" class="form-input" placeholder-i18n data-i18n="form.phone.placeholder" placeholder="+965-12345678">
          </div>
          
          <div class="form-group">
            <label for="contact-subject" data-i18n="form.subject.label">Subject *</label>
            <select id="contact-subject" name="contact-subject" class="form-input" required>
              <option value="" data-i18n="form.subject.placeholder">Select a subject...</option>
              <option value="general" data-i18n="form.subject.options.general">General Inquiry</option>
              <option value="business-listing" data-i18n="form.subject.options.business-listing">Business Listing Support</option>
              <option value="partnership" data-i18n="form.subject.options.partnership">Partnership Opportunity</option>
              <option value="technical" data-i18n="form.subject.options.technical">Technical Support</option>
              <option value="event" data-i18n="form.subject.options.event">Event Collaboration</option>
              <option value="feedback" data-i18n="form.subject.options.feedback">Feedback & Suggestions</option>
              <option value="volunteer" data-i18n="form.subject.options.volunteer">Volunteer Opportunity</option>
              <option value="other" data-i18n="form.subject.options.other">Other</option>
            </select>
            </div>
          </div>
          
          <div class="form-group">
            <label for="contact-message" data-i18n="form.message.label">Message *</label>
            <textarea id="contact-message" name="contact-message" class="form-input" rows="6" required placeholder-i18n data-i18n="form.message.placeholder" placeholder="Tell us how we can help you..."></textarea>
          </div>
          
          <button type="submit" class="submit-btn">
            <i class="fas fa-paper-plane"></i> <span data-i18n="form.submit">Send Message</span>
          </button>
        </form>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq-section">
    <div class="faq-content">
      <h2 data-i18n="faq.title">Frequently Asked Questions</h2>
      <div class="faq-grid">
        <div class="faq-item">
          <h3 data-i18n="faq.questions.cost.question">How much does it cost to list my business?</h3>
          <p data-i18n="faq.questions.cost.answer">Chamber122 is completely free for all MSMEs in Kuwait. We're a nonprofit organization committed to supporting our local business community.</p>
        </div>
        
        <div class="faq-item">
          <h3 data-i18n="faq.questions.approval.question">How long does it take to get my business approved?</h3>
          <p data-i18n="faq.questions.approval.answer">Most business listings are reviewed and approved within 2-3 business days. We'll notify you via email once your listing is live.</p>
        </div>
        
        <div class="faq-item">
          <h3 data-i18n="faq.questions.update.question">Can I update my business information after listing?</h3>
          <p data-i18n="faq.questions.update.answer">Yes! Once you create an account, you can log in anytime to update your business information, photos, and contact details.</p>
        </div>
        
        <div class="faq-item">
          <h3 data-i18n="faq.questions.promote.question">How can I promote my events or special offers?</h3>
          <p data-i18n="faq.questions.promote.answer">Use our Events page to submit upcoming events, sales, or promotions. You can also post announcements on our Bulletin board.</p>
        </div>
        
        <div class="faq-item">
          <h3 data-i18n="faq.questions.support.question">Do you offer business support or consulting?</h3>
          <p data-i18n="faq.questions.support.answer">While we don't provide direct consulting, we regularly host training sessions and networking events. We also share funding and training opportunities through our Bulletin.</p>
        </div>
        
        <div class="faq-item">
          <h3 data-i18n="faq.questions.volunteer.question">How can I volunteer or partner with Chamber122?</h3>
          <p data-i18n="faq.questions.volunteer.answer">We welcome volunteers and strategic partners! Contact us using the form above or reach out directly via WhatsApp to discuss opportunities.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3 data-i18n="footer.aboutTitle">Chamber122</h3>
        <p data-i18n="footer.about">Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
       <div class="footer-section">
         <h3 data-i18n="footer.quick">Quick Links</h3>
         <div class="quick-links">
           <ul class="quick-links-list">
             <li><a href="index.html" data-i18n="nav.home">Home</a></li>
             <li><a href="directory.html" data-i18n="nav.directory">Directory</a></li>
             <li><a href="events.html" data-i18n="nav.events">Events</a></li>
             <li><a href="bulletin.html" data-i18n="nav.bulletin">Bulletin</a></li>
             <li><a href="get-listed.html" data-i18n="cta.getListed">Get Listed</a></li>
             <li><a href="about.html" data-i18n="nav.about">About</a></li>
             <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
           </ul>
         </div>
       </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.contactInfo">Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | <span data-i18n="footer.empowering">Empowering Kuwait's MSMEs</span></p>
    </div>
  </footer>

  <script src="js/main.js?v=7"></script>
  <script type="module" src="./js/i18n.js"></script>
  <script>
    // Contact form handling
    document.getElementById('contact-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Show loading state
      const submitBtn = document.querySelector('.submit-btn');
      const originalText = submitBtn.innerHTML;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
      submitBtn.disabled = true;
      
      // Simulate form submission
      setTimeout(() => {
        alert('Thank you for your message! We\'ll get back to you within 24 hours.');
        this.reset();
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
      }, 2000);
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | Chamber122</title>
  <meta name="description" content="Your Chamber122 dashboard - manage your business, activities, and bulletins">
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <link rel="stylesheet" href="/css/header.css?v=1">
  <link rel="stylesheet" href="css/style.css?v=17">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script type="module" src="/js/supabase-client.js?v=20"></script>
  <script type="module" src="/js/header-auth-slot.js?v=7"></script>
  <script type="module" src="/js/require-auth.js?v=1"></script>
  <style>
    .dashboard-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }
    
    .dashboard-header {
      margin-bottom: 2rem;
    }
    
    .dashboard-title {
      font-size: 2.5rem;
      font-weight: 700;
      color: #e8e9f3;
      margin-bottom: 0.5rem;
    }
    
    .dashboard-subtitle {
      color: #a0a0a0;
      font-size: 1.1rem;
    }
    
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }
    
    .dashboard-card {
      background: #1a1a1a;
      border: 1px solid #2a2a2a;
      border-radius: 12px;
      padding: 1.5rem;
      transition: all 0.3s ease;
    }
    
    .dashboard-card:hover {
      border-color: #6f75ff;
      transform: translateY(-2px);
    }
    
    .card-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }
    
    .card-icon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }
    
    .card-icon.business {
      background: linear-gradient(135deg, #6f75ff, #4f46e5);
      color: white;
    }
    
    .card-icon.activities {
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
    }
    
    .card-icon.bulletins {
      background: linear-gradient(135deg, #f59e0b, #d97706);
      color: white;
    }
    
    .card-icon.directory {
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      color: white;
    }
    
    .card-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: #e8e9f3;
      margin: 0;
    }
    
    .card-description {
      color: #a0a0a0;
      margin-bottom: 1.5rem;
      line-height: 1.5;
    }
    
    .card-actions {
      display: flex;
      gap: 0.75rem;
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.2s ease;
      border: none;
      cursor: pointer;
    }
    
    .btn-primary {
      background: #6f75ff;
      color: white;
    }
    
    .btn-primary:hover {
      background: #5a5fcf;
      transform: translateY(-1px);
    }
    
    .btn-secondary {
      background: #2a2a2a;
      color: #e8e9f3;
      border: 1px solid #3a3a3a;
    }
    
    .btn-secondary:hover {
      background: #3a3a3a;
      transform: translateY(-1px);
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 3rem;
    }
    
    .stat-card {
      background: #1a1a1a;
      border: 1px solid #2a2a2a;
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
    }
    
    .stat-number {
      font-size: 2rem;
      font-weight: 700;
      color: #6f75ff;
      margin-bottom: 0.5rem;
    }
    
    .stat-label {
      color: #a0a0a0;
      font-size: 0.9rem;
    }
    
    .recent-activity {
      background: #1a1a1a;
      border: 1px solid #2a2a2a;
      border-radius: 12px;
      padding: 1.5rem;
    }
    
    .activity-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 0;
      border-bottom: 1px solid #2a2a2a;
    }
    
    .activity-item:last-child {
      border-bottom: none;
    }
    
    .activity-icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #2a2a2a;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6f75ff;
    }
    
    .activity-content {
      flex: 1;
    }
    
    .activity-title {
      color: #e8e9f3;
      font-weight: 500;
      margin-bottom: 0.25rem;
    }
    
    .activity-time {
      color: #a0a0a0;
      font-size: 0.85rem;
    }
    
    .welcome-message {
      background: linear-gradient(135deg, #6f75ff, #4f46e5);
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      color: white;
    }
    
    .welcome-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    
    .welcome-text {
      opacity: 0.9;
      line-height: 1.6;
    }
    
    @media (max-width: 768px) {
      .dashboard-container {
        padding: 1rem;
      }
      
      .dashboard-title {
        font-size: 2rem;
      }
      
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
      
      .card-actions {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- Auth slot for session-aware header -->
  <div style="position: fixed; top: 0; right: 20px; z-index: 1000; padding: 10px;">
    <span id="auth-slot">
      <a class="btn" href="/auth.html">Login</a>
      <a class="btn primary" href="/auth.html#signup">Sign Up & Get Listed</a>
    </span>
  </div>

  <div class="dashboard-container">
    <!-- Welcome Section -->
    <div class="welcome-message">
      <h1 class="welcome-title">Welcome to Chamber122!</h1>
      <p class="welcome-text">Your gateway to Kuwait's MSME community. Manage your business, connect with others, and grow together.</p>
    </div>

    <!-- Quick Stats -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-number" id="businessCount">-</div>
        <div class="stat-label">Businesses Listed</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="activityCount">-</div>
        <div class="stat-label">Activities Posted</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="bulletinCount">-</div>
        <div class="stat-label">Bulletins Shared</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="memberSince">-</div>
        <div class="stat-label">Member Since</div>
      </div>
    </div>

    <!-- Main Dashboard Grid -->
    <div class="dashboard-grid">
      <!-- My Business Card -->
      <div class="dashboard-card">
        <div class="card-header">
          <div class="card-icon business">
            <i class="fas fa-building"></i>
          </div>
          <h3 class="card-title">My Business</h3>
        </div>
        <p class="card-description">Manage your business profile, update information, and showcase your services to the community.</p>
        <div class="card-actions">
          <a href="/owner.html" class="btn btn-primary">
            <i class="fas fa-edit"></i>
            Manage Business
          </a>
          <a href="/directory.html" class="btn btn-secondary">
            <i class="fas fa-search"></i>
            Browse Directory
          </a>
        </div>
      </div>

      <!-- Activities Card -->
      <div class="dashboard-card">
        <div class="card-header">
          <div class="card-icon activities">
            <i class="fas fa-calendar-alt"></i>
          </div>
          <h3 class="card-title">Events</h3>
        </div>
        <p class="card-description">Create and manage events, workshops, and activities. Share your expertise with the community.</p>
        <div class="card-actions">
          <a href="/events.html" class="btn btn-primary">
            <i class="fas fa-plus"></i>
            Create Event
          </a>
          <a href="/events.html" class="btn btn-secondary">
            <i class="fas fa-list"></i>
            View All Events
          </a>
        </div>
      </div>

      <!-- Bulletins Card -->
      <div class="dashboard-card">
        <div class="card-header">
          <div class="card-icon bulletins">
            <i class="fas fa-bullhorn"></i>
          </div>
          <h3 class="card-title">Bulletins</h3>
        </div>
        <p class="card-description">Share announcements, job postings, and opportunities with the MSME community.</p>
        <div class="card-actions">
          <a href="/bulletin.html" class="btn btn-primary">
            <i class="fas fa-plus"></i>
            Create Bulletin
          </a>
          <a href="/bulletin.html" class="btn btn-secondary">
            <i class="fas fa-list"></i>
            View All Bulletins
          </a>
        </div>
      </div>

      <!-- Directory Card -->
      <div class="dashboard-card">
        <div class="card-header">
          <div class="card-icon directory">
            <i class="fas fa-users"></i>
          </div>
          <h3 class="card-title">Community</h3>
        </div>
        <p class="card-description">Connect with other MSMEs, discover new opportunities, and grow your network.</p>
        <div class="card-actions">
          <a href="/directory.html" class="btn btn-primary">
            <i class="fas fa-search"></i>
            Browse Members
          </a>
          <a href="/community.html" class="btn btn-secondary">
            <i class="fas fa-comments"></i>
            Community Hub
          </a>
        </div>
      </div>
    </div>

    <!-- Recent Activity Section -->
    <div class="recent-activity">
      <h3 style="color: #e8e9f3; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
        <i class="fas fa-clock"></i>
        Recent Activity
      </h3>
      <div id="recentActivityList">
        <div class="activity-item">
          <div class="activity-icon">
            <i class="fas fa-user-plus"></i>
          </div>
          <div class="activity-content">
            <div class="activity-title">Welcome to Chamber122!</div>
            <div class="activity-time">Just now</div>
          </div>
        </div>
        <div class="activity-item">
          <div class="activity-icon">
            <i class="fas fa-info-circle"></i>
          </div>
          <div class="activity-content">
            <div class="activity-title">Complete your business profile to get started</div>
            <div class="activity-time">Get started</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { supabase } from '/js/supabase-client.js';

    // Load dashboard data
    async function loadDashboardData() {
      try {
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) return;

        // Load user profile
        const { data: profile } = await supabase
          .from('profiles')
          .select('full_name, created_at')
          .eq('user_id', user.id)
          .single();

        // Load business count
        const { count: businessCount } = await supabase
          .from('businesses')
          .select('*', { count: 'exact', head: true })
          .eq('owner_id', user.id);

        // Load activities count
        const { count: activityCount } = await supabase
          .from('activities')
          .select('*', { count: 'exact', head: true })
          .eq('owner_id', user.id);

        // Load bulletins count
        const { count: bulletinCount } = await supabase
          .from('bulletins')
          .select('*', { count: 'exact', head: true })
          .eq('owner_id', user.id);

        // Update stats
        document.getElementById('businessCount').textContent = businessCount || 0;
        document.getElementById('activityCount').textContent = activityCount || 0;
        document.getElementById('bulletinCount').textContent = bulletinCount || 0;
        
        // Update member since
        if (profile?.created_at) {
          const memberDate = new Date(profile.created_at);
          const memberSince = memberDate.toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'short' 
          });
          document.getElementById('memberSince').textContent = memberSince;
        }

        // Update welcome message with user's name
        if (profile?.full_name) {
          const welcomeTitle = document.querySelector('.welcome-title');
          welcomeTitle.textContent = `Welcome back, ${profile.full_name}!`;
        }

      } catch (error) {
        console.error('Error loading dashboard data:', error);
      }
    }

    // Load data when page loads
    document.addEventListener('DOMContentLoaded', loadDashboardData);
  </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Debug Auth</title>
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; }
    .error { color: red; background: #fee; padding: 1rem; margin: 1rem 0; border-radius: 4px; }
    .success { color: green; background: #efe; padding: 1rem; margin: 1rem 0; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>Debug Auth Console Errors</h1>
  <div id="status">Loading...</div>
  <div id="errors"></div>

  <script type="module">
    const statusDiv = document.getElementById('status');
    const errorsDiv = document.getElementById('errors');
    
    // Capture console errors
    const originalError = console.error;
    const errors = [];
    
    console.error = function(...args) {
      errors.push(args.join(' '));
      errorsDiv.innerHTML += `<div class="error">${args.join(' ')}</div>`;
      originalError.apply(console, args);
    };
    
    try {
      statusDiv.innerHTML = '<div class="success">Testing imports...</div>';
      
      // Test supabase client
      const { supabase } = await import('/js/supabase-client.js');
      statusDiv.innerHTML += '<div class="success">✅ Supabase client loaded</div>';
      
      // Test auth utils
      const { signupWithEmailPassword } = await import('/js/auth-signup-utils.js');
      statusDiv.innerHTML += '<div class="success">✅ Auth utils loaded</div>';
      
      // Test nav auth
      const { initNavAuthState } = await import('/js/nav-auth-state.js');
      statusDiv.innerHTML += '<div class="success">✅ Nav auth loaded</div>';
      
      // Test signup with documents
      const { initSignupPage } = await import('/js/signup-with-documents.js');
      statusDiv.innerHTML += '<div class="success">✅ Signup with documents loaded</div>';
      
      statusDiv.innerHTML += '<div class="success">🎉 All imports successful!</div>';
      
    } catch (error) {
      statusDiv.innerHTML += `<div class="error">❌ Error: ${error.message}</div>`;
      console.error('Import error:', error);
    }
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Complete Login Debug</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: #fff; }
    .debug-section { background: #2a2a2a; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #007bff; }
    .error { border-left-color: #ff6b6b; }
    .success { border-left-color: #51cf66; }
    .warning { border-left-color: #ffd43b; }
    input, button { padding: 10px; margin: 5px; border-radius: 4px; border: 1px solid #555; width: 100%; max-width: 300px; }
    input { background: #333; color: #fff; }
    button { background: #007bff; color: #fff; cursor: pointer; }
    button:disabled { background: #555; cursor: not-allowed; }
    .log { background: #000; padding: 10px; margin: 10px 0; border-radius: 4px; font-family: monospace; white-space: pre-wrap; max-height: 200px; overflow-y: auto; font-size: 12px; }
    .status { padding: 5px 10px; border-radius: 4px; margin: 5px 0; }
    .status.ok { background: #28a745; color: white; }
    .status.error { background: #dc3545; color: white; }
    .status.warning { background: #ffc107; color: black; }
  </style>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="/js/supabase-client.js?v=20"></script>
</head>
<body>
  <h1>🔧 Complete Login Debug Tool</h1>
  
  <div class="debug-section">
    <h3>📋 Environment Check</h3>
    <div id="env-status"></div>
  </div>

  <div class="debug-section">
    <h3>🔌 Supabase Client Check</h3>
    <div id="client-status"></div>
    <button onclick="testSupabaseConnection()">Test Supabase Connection</button>
    <div id="connection-result"></div>
  </div>

  <div class="debug-section">
    <h3>📝 Form Test (Same as auth.html)</h3>
    <form id="login-form" novalidate>
      <input id="email" name="email" type="email" placeholder="Email" required>
      <input id="password" name="password" type="password" placeholder="Password" required>
      <button id="login-btn" type="submit">Log In</button>
    </form>
    <div id="form-test-results"></div>
  </div>

  <div class="debug-section">
    <h3>🔐 Login Test</h3>
    <div id="login-status"></div>
    <button onclick="testLogin()">Test Login with Test Credentials</button>
    <div id="login-result"></div>
  </div>

  <div class="debug-section">
    <h3>📊 Console Log</h3>
    <div id="console-log" class="log">Loading...</div>
    <button onclick="clearLog()">Clear Log</button>
  </div>

  <script type="module">
    import { supabase } from '/js/supabase-client.js';

    let logContainer = document.getElementById('console-log');
    
    function log(message, type = 'info') {
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = `[${timestamp}] ${message}`;
      logContainer.textContent += logEntry + '\n';
      logContainer.scrollTop = logContainer.scrollHeight;
      console.log(`[DEBUG] ${message}`);
    }

    function setStatus(elementId, message, type = 'ok') {
      const element = document.getElementById(elementId);
      element.innerHTML = `<div class="status ${type}">${message}</div>`;
    }

    // Make functions global
    window.log = log;
    window.setStatus = setStatus;

    window.clearLog = () => {
      logContainer.textContent = 'Console cleared...\n';
    };

    // Environment check
    document.addEventListener('DOMContentLoaded', () => {
      log('🚀 Starting complete login debug...');
      
      // Check environment
      if (window.SUPABASE_URL && window.SUPABASE_ANON_KEY) {
        setStatus('env-status', '✅ Environment variables loaded correctly', 'ok');
        log('✅ Environment variables found');
        log(`URL: ${window.SUPABASE_URL}`);
        log(`Key: ${window.SUPABASE_ANON_KEY.substring(0, 30)}...`);
      } else {
        setStatus('env-status', '❌ Missing environment variables', 'error');
        log('❌ Missing SUPABASE_URL or SUPABASE_ANON_KEY');
      }

      // Check client
      if (window._sb) {
        setStatus('client-status', '✅ Supabase client loaded', 'ok');
        log('✅ Supabase client available');
      } else {
        setStatus('client-status', '❌ Supabase client not found', 'error');
        log('❌ window._sb not found');
      }

      // Test connection
      window.testSupabaseConnection = async () => {
        log('🔌 Testing Supabase connection...');
        try {
          const { data, error } = await supabase.auth.getSession();
          if (error) {
            log(`❌ Connection error: ${error.message}`);
            setStatus('connection-result', `❌ Error: ${error.message}`, 'error');
          } else {
            log(`✅ Connection successful. Session: ${data.session ? 'Active' : 'None'}`);
            setStatus('connection-result', `✅ Connected. Session: ${data.session ? 'Active' : 'None'}`, 'ok');
          }
        } catch (err) {
          log(`❌ Connection failed: ${err.message}`);
          setStatus('connection-result', `❌ Failed: ${err.message}`, 'error');
        }
      };

      // Test form
      const form = document.getElementById('login-form');
      const emailInput = document.getElementById('email');
      const passwordInput = document.getElementById('password');
      const loginBtn = document.getElementById('login-btn');

      log('📝 Testing form elements...');
      if (form && emailInput && passwordInput && loginBtn) {
        setStatus('form-test-results', '✅ All form elements found', 'ok');
        log('✅ Form elements found correctly');
        
        // Test form submission
        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          log('📝 Form submitted!');
          
          const email = emailInput.value.trim();
          const password = passwordInput.value;
          
          if (!email || !password) {
            log('❌ Email or password empty');
            setStatus('form-test-results', '❌ Please enter email and password', 'error');
            return;
          }
          
          log(`📧 Email: ${email}`);
          log(`🔒 Password length: ${password.length}`);
          
          // Test with Supabase
          try {
            log('🔐 Attempting login...');
            const { data, error } = await supabase.auth.signInWithPassword({ email, password });
            
            if (error) {
              log(`❌ Login failed: ${error.message}`);
              setStatus('form-test-results', `❌ Login failed: ${error.message}`, 'error');
            } else {
              log(`✅ Login successful! User: ${data.user?.email}`);
              setStatus('form-test-results', `✅ Login successful! Redirecting...`, 'ok');
              setTimeout(() => {
                window.location.href = '/dashboard.html';
              }, 2000);
            }
          } catch (err) {
            log(`❌ Login exception: ${err.message}`);
            setStatus('form-test-results', `❌ Exception: ${err.message}`, 'error');
          }
        });
      } else {
        setStatus('form-test-results', '❌ Form elements missing', 'error');
        log('❌ Form elements missing');
        log(`Form: ${!!form}, Email: ${!!emailInput}, Password: ${!!passwordInput}, Button: ${!!loginBtn}`);
      }

      // Test login function
      window.testLogin = async () => {
        log('🔐 Testing login with demo credentials...');
        setStatus('login-status', '🔄 Testing login...', 'warning');
        
        try {
          // Use a test email - replace with a real one you know works
          const testEmail = 'test@example.com';
          const testPassword = 'testpassword123';
          
          log(`Testing with: ${testEmail}`);
          
          const { data, error } = await supabase.auth.signInWithPassword({ 
            email: testEmail, 
            password: testPassword 
          });
          
          if (error) {
            log(`❌ Test login failed: ${error.message}`);
            setStatus('login-result', `❌ Test failed: ${error.message}`, 'error');
            setStatus('login-status', '❌ Test login failed', 'error');
          } else {
            log(`✅ Test login successful! User: ${data.user?.email}`);
            setStatus('login-result', `✅ Test successful! User: ${data.user?.email}`, 'ok');
            setStatus('login-status', '✅ Test login successful', 'ok');
          }
        } catch (err) {
          log(`❌ Test login exception: ${err.message}`);
          setStatus('login-result', `❌ Exception: ${err.message}`, 'error');
          setStatus('login-status', '❌ Test login failed', 'error');
        }
      };
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Login - Simple</title>
    <style>
        body { font-family: sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 400px; margin: 50px auto; padding: 20px; border: 1px solid #333; border-radius: 8px; background: #2a2a2a; }
        input, button { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 4px; border: 1px solid #555; background: #3a3a3a; color: white; }
        button { background: #007bff; cursor: pointer; border-color: #007bff; }
        button:hover { background: #0056b3; }
        #status { margin-top: 15px; padding: 10px; border-radius: 4px; }
        #status.success { background: #d4edda; color: #155724; }
        #status.error { background: #f8d7da; color: #721c24; }
        .log { background: #1a1a1a; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto; margin-top: 10px; }
    </style>
    <script>
        window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
        window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
    </script>
</head>
<body>
    <div class="container">
        <h1>🔧 Debug Login</h1>
        <form id="loginForm">
            <input type="email" id="email" placeholder="Enter your email" required>
            <input type="password" id="password" placeholder="Enter your password" required>
            <button type="submit">Debug Login</button>
        </form>
        <div id="status">Ready to test...</div>
        <div id="log" class="log"></div>
    </div>

    <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2.57.4';

        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.textContent += `[${timestamp}] ${message}\n`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[DEBUG-LOGIN] ${message}`);
        }

        function updateStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = type;
        }

        log('Starting debug login test...');
        
        // Test environment
        if (!window.SUPABASE_URL || !window.SUPABASE_ANON_KEY) {
            log('ERROR: Missing environment variables');
            updateStatus('❌ Missing environment variables', 'error');
        } else {
            log('✅ Environment variables loaded');
            log(`URL: ${window.SUPABASE_URL}`);
            log(`Key: ${window.SUPABASE_ANON_KEY.substring(0, 20)}...`);
        }

        // Initialize Supabase
        let supabase;
        try {
            supabase = createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY, {
                auth: {
                    autoRefreshToken: true,
                    persistSession: true,
                    detectSessionInUrl: true,
                },
            });
            log('✅ Supabase client created');
        } catch (error) {
            log(`❌ Supabase client creation failed: ${error.message}`);
            updateStatus('❌ Client creation failed', 'error');
        }

        // Check for existing session
        if (supabase) {
            try {
                const { data: sessionData } = await supabase.auth.getSession();
                if (sessionData?.session) {
                    log(`✅ Existing session found: ${sessionData.session.user.email}`);
                    updateStatus(`✅ Already logged in: ${sessionData.session.user.email}`, 'success');
                } else {
                    log('ℹ️ No existing session');
                }
            } catch (error) {
                log(`⚠️ Session check error: ${error.message}`);
            }
        }

        // Handle login form
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            
            log(`Attempting login for: ${email}`);
            updateStatus('🔄 Attempting login...', 'info');
            
            if (!supabase) {
                log('❌ Supabase client not available');
                updateStatus('❌ Client not available', 'error');
                return;
            }
            
            try {
                const { data, error } = await supabase.auth.signInWithPassword({ 
                    email, 
                    password 
                });
                
                if (error) {
                    log(`❌ Login error: ${error.message}`);
                    updateStatus(`❌ Login failed: ${error.message}`, 'error');
                    return;
                }
                
                log(`✅ Login response: ${JSON.stringify(data, null, 2)}`);
                
                if (data?.session?.user) {
                    log(`✅ Session created for: ${data.session.user.email}`);
                    updateStatus(`✅ Login successful! User: ${data.session.user.email}`, 'success');
                    
                    // Test session persistence
                    setTimeout(async () => {
                        try {
                            const { data: sessionCheck } = await supabase.auth.getSession();
                            if (sessionCheck?.session) {
                                log(`✅ Session persists: ${sessionCheck.session.user.email}`);
                            } else {
                                log('❌ Session lost after login');
                            }
                        } catch (err) {
                            log(`❌ Session check failed: ${err.message}`);
                        }
                    }, 1000);
                } else {
                    log('⚠️ Login successful but no session returned');
                    updateStatus('⚠️ Login successful but no session (email confirmation required?)', 'error');
                }
                
            } catch (err) {
                log(`❌ Login exception: ${err.message}`);
                updateStatus(`❌ Login failed: ${err.message}`, 'error');
            }
        });

        log('Debug login test ready');
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login Debug Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: #fff; }
    .debug-section { background: #2a2a2a; padding: 15px; margin: 10px 0; border-radius: 8px; }
    input, button { padding: 10px; margin: 5px; border-radius: 4px; border: 1px solid #555; }
    input { background: #333; color: #fff; }
    button { background: #007bff; color: #fff; cursor: pointer; }
    button:disabled { background: #555; cursor: not-allowed; }
    .log { background: #000; padding: 10px; margin: 10px 0; border-radius: 4px; font-family: monospace; white-space: pre-wrap; max-height: 300px; overflow-y: auto; }
    .error { color: #ff6b6b; }
    .success { color: #51cf66; }
    .warning { color: #ffd43b; }
  </style>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="/js/supabase-client.js?v=20"></script>
</head>
<body>
  <h1>🔧 Login Debug Test</h1>
  
  <div class="debug-section">
    <h3>1. Environment Check</h3>
    <div id="env-check">Checking environment...</div>
  </div>

  <div class="debug-section">
    <h3>2. Supabase Client Test</h3>
    <div id="client-check">Checking Supabase client...</div>
    <button onclick="testClient()">Test Supabase Client</button>
  </div>

  <div class="debug-section">
    <h3>3. Login Test</h3>
    <form id="debug-login-form">
      <input id="debug-email" type="email" placeholder="Email" required>
      <input id="debug-password" type="password" placeholder="Password" required>
      <button type="submit">Test Login</button>
    </form>
    <div id="login-result"></div>
  </div>

  <div class="debug-section">
    <h3>4. Console Log</h3>
    <div id="console-log" class="log">Console messages will appear here...</div>
    <button onclick="clearLog()">Clear Log</button>
  </div>

  <script type="module">
    import { supabase } from '/js/supabase-client.js';

    let logContainer = document.getElementById('console-log');
    
    function log(message, type = 'info') {
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = `[${timestamp}] ${message}\n`;
      logContainer.textContent += logEntry;
      logContainer.scrollTop = logContainer.scrollHeight;
      console.log(`[DEBUG] ${message}`);
    }

    function logError(message) {
      log(`ERROR: ${message}`, 'error');
    }

    function logSuccess(message) {
      log(`SUCCESS: ${message}`, 'success');
    }

    function logWarning(message) {
      log(`WARNING: ${message}`, 'warning');
    }

    // Make functions global for onclick handlers
    window.log = log;
    window.logError = logError;
    window.logSuccess = logSuccess;
    window.logWarning = logWarning;

    window.clearLog = () => {
      logContainer.textContent = 'Console messages will appear here...\n';
    };

    // Environment check
    document.addEventListener('DOMContentLoaded', () => {
      log('DOM loaded, starting debug checks...');
      
      // Check environment
      const envDiv = document.getElementById('env-check');
      if (window.SUPABASE_URL && window.SUPABASE_ANON_KEY) {
        envDiv.innerHTML = '<span class="success">✅ Environment variables loaded</span>';
        logSuccess('Environment variables found');
        log(`URL: ${window.SUPABASE_URL}`);
        log(`Key: ${window.SUPABASE_ANON_KEY.substring(0, 20)}...`);
      } else {
        envDiv.innerHTML = '<span class="error">❌ Missing environment variables</span>';
        logError('Missing SUPABASE_URL or SUPABASE_ANON_KEY');
      }

      // Check client
      const clientDiv = document.getElementById('client-check');
      if (window._sb) {
        clientDiv.innerHTML = '<span class="success">✅ Supabase client available</span>';
        logSuccess('Supabase client loaded');
      } else {
        clientDiv.innerHTML = '<span class="error">❌ Supabase client not found</span>';
        logError('window._sb not found');
      }

      // Test client function
      window.testClient = async () => {
        log('Testing Supabase client...');
        try {
          const { data, error } = await supabase.auth.getSession();
          if (error) {
            logError(`getSession error: ${error.message}`);
          } else {
            logSuccess(`getSession successful: ${data.session ? 'User logged in' : 'No session'}`);
          }
        } catch (err) {
          logError(`Client test failed: ${err.message}`);
        }
      };

      // Login form handler
      const form = document.getElementById('debug-login-form');
      const resultDiv = document.getElementById('login-result');
      
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        log('Login form submitted...');
        
        const email = document.getElementById('debug-email').value.trim();
        const password = document.getElementById('debug-password').value;
        
        if (!email || !password) {
          logError('Email and password required');
          resultDiv.innerHTML = '<span class="error">Please enter email and password</span>';
          return;
        }
        
        log(`Attempting login with email: ${email}`);
        resultDiv.innerHTML = '<span class="warning">Logging in...</span>';
        
        try {
          const { data, error } = await supabase.auth.signInWithPassword({ email, password });
          
          if (error) {
            logError(`Login failed: ${error.message}`);
            resultDiv.innerHTML = `<span class="error">Login failed: ${error.message}</span>`;
          } else {
            logSuccess(`Login successful! User: ${data.user?.email}`);
            resultDiv.innerHTML = `<span class="success">Login successful! Redirecting...</span>`;
            setTimeout(() => {
              window.location.href = '/dashboard.html';
            }, 2000);
          }
        } catch (err) {
          logError(`Login exception: ${err.message}`);
          resultDiv.innerHTML = `<span class="error">Login exception: ${err.message}</span>`;
        }
      });
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Debug Login Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #0b0c12; color: #e9e9f1; }
    .card { background: #101321; border: 1px solid #222640; border-radius: 16px; padding: 20px; margin: 20px 0; }
    input, button { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #262b45; background: #0c1022; color: #f2f3ff; }
    button { background: #6f75ff; border: 0; font-weight: 700; cursor: pointer; }
    .error { color: #ff6b6b; }
    .success { color: #51cf66; }
    pre { background: #1a1a1a; padding: 10px; border-radius: 4px; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>Debug Login Test</h1>
  
  <div class="card">
    <h3>Test Login</h3>
    <input type="email" id="email" placeholder="your@email.com" value="test@example.com">
    <input type="password" id="password" placeholder="password" value="testpass123">
    <button onclick="testLogin()">Test Login</button>
    <div id="result"></div>
  </div>

  <div class="card">
    <h3>Supabase Status</h3>
    <button onclick="checkSupabase()">Check Supabase Connection</button>
    <div id="supabase-status"></div>
  </div>

  <div class="card">
    <h3>Console Logs</h3>
    <pre id="logs"></pre>
  </div>

  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>

  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2.57.4';
    import { supabase } from './js/supabase-client.js';

    function log(message, type = 'info') {
      const logs = document.getElementById('logs');
      const timestamp = new Date().toLocaleTimeString();
      const color = type === 'error' ? '#ff6b6b' : type === 'success' ? '#51cf66' : '#e9e9f1';
      logs.innerHTML += `<div style="color: ${color}">[${timestamp}] ${message}</div>`;
      console.log(`[${timestamp}] ${message}`);
    }

    window.testLogin = async function() {
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;
      const result = document.getElementById('result');
      
      log(`Attempting login with email: ${email}`);
      
      try {
        const { data, error } = await supabase.auth.signInWithPassword({ email, password });
        
        if (error) {
          log(`Login error: ${error.message}`, 'error');
          result.innerHTML = `<div class="error">Error: ${error.message}</div>`;
        } else {
          log(`Login successful!`, 'success');
          log(`User: ${JSON.stringify(data.user, null, 2)}`, 'success');
          result.innerHTML = `<div class="success">Login successful! User ID: ${data.user.id}</div>`;
        }
      } catch (err) {
        log(`Exception during login: ${err.message}`, 'error');
        result.innerHTML = `<div class="error">Exception: ${err.message}</div>`;
      }
    };

    window.checkSupabase = async function() {
      const status = document.getElementById('supabase-status');
      
      try {
        log('Checking Supabase connection...');
        
        // Test basic connection
        const { data, error } = await supabase.from('profiles').select('count').limit(1);
        
        if (error) {
          log(`Supabase connection error: ${error.message}`, 'error');
          status.innerHTML = `<div class="error">Connection Error: ${error.message}</div>`;
        } else {
          log('Supabase connection successful!', 'success');
          status.innerHTML = `<div class="success">Supabase connected successfully</div>`;
        }
        
        // Test auth
        const { data: session } = await supabase.auth.getSession();
        log(`Current session: ${session?.session ? 'Active' : 'None'}`, session?.session ? 'success' : 'info');
        
      } catch (err) {
        log(`Supabase check exception: ${err.message}`, 'error');
        status.innerHTML = `<div class="error">Exception: ${err.message}</div>`;
      }
    };

    // Initial checks
    log('Debug page loaded');
    checkSupabase();
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Debug Session Persistence</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #0b0c12; color: #e9e9f1; }
    .card { background: #101321; border: 1px solid #222640; border-radius: 16px; padding: 20px; margin: 20px 0; }
    button { padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #262b45; background: #6f75ff; color: #f2f3ff; cursor: pointer; }
    .error { color: #ff6b6b; }
    .success { color: #51cf66; }
    pre { background: #1a1a1a; padding: 10px; border-radius: 4px; overflow-x: auto; white-space: pre-wrap; }
    .header-preview { border: 2px solid #444; padding: 10px; margin: 10px 0; background: #1a1a1a; }
  </style>
</head>
<body>
  <h1>Session Persistence Debug</h1>
  
  <div class="card">
    <h3>Test Session Hydration</h3>
    <button onclick="testSessionHydration()">Test Session Hydration</button>
    <div id="hydration-result"></div>
  </div>

  <div class="card">
    <h3>Check LocalStorage</h3>
    <button onclick="checkLocalStorage()">Check LocalStorage</button>
    <div id="storage-result"></div>
  </div>

  <div class="card">
    <h3>Test Header Rendering</h3>
    <button onclick="testHeaderRendering()">Test Header Rendering</button>
    <div id="header-result"></div>
    <div id="header-preview" class="header-preview"></div>
  </div>

  <div class="card">
    <h3>Console Logs</h3>
    <pre id="logs"></pre>
  </div>

  <!-- Header mount point -->
  <div id="site-header"></div>

  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>

  <script type="module">
    import { supabase } from './js/supabase-client.js';
    import { ensureSessionHydrated, onAnyAuthChange } from './js/auth-session.js';

    function log(message, type = 'info') {
      const logs = document.getElementById('logs');
      const timestamp = new Date().toLocaleTimeString();
      const color = type === 'error' ? '#ff6b6b' : type === 'success' ? '#51cf66' : '#e9e9f1';
      logs.innerHTML += `<div style="color: ${color}">[${timestamp}] ${message}</div>`;
      console.log(`[${timestamp}] ${message}`);
    }

    window.testSessionHydration = async function() {
      const result = document.getElementById('hydration-result');
      log('Testing session hydration...');
      
      try {
        const session = await ensureSessionHydrated();
        
        if (session?.user) {
          log(`Session hydrated successfully! User: ${session.user.email}`, 'success');
          result.innerHTML = `<div class="success">✅ Session hydrated! User: ${session.user.email}</div>`;
        } else {
          log('No session found after hydration', 'error');
          result.innerHTML = `<div class="error">❌ No session found</div>`;
        }
      } catch (err) {
        log(`Hydration error: ${err.message}`, 'error');
        result.innerHTML = `<div class="error">❌ Error: ${err.message}</div>`;
      }
    };

    window.checkLocalStorage = function() {
      const result = document.getElementById('storage-result');
      log('Checking localStorage...');
      
      try {
        const keys = Object.keys(localStorage).filter(k => k.includes('sb-'));
        log(`Found ${keys.length} Supabase keys in localStorage`);
        
        keys.forEach(key => {
          const value = localStorage.getItem(key);
          log(`Key: ${key}`);
          log(`Value length: ${value?.length} chars`);
          if (value) {
            try {
              const parsed = JSON.parse(value);
              log(`Parsed keys: ${Object.keys(parsed).join(', ')}`);
              if (parsed.currentSession) {
                log(`Has currentSession: ${!!parsed.currentSession.access_token}`, 'success');
              }
            } catch (e) {
              log(`Could not parse ${key}: ${e.message}`, 'error');
            }
          }
        });
        
        if (keys.length > 0) {
          result.innerHTML = `<div class="success">✅ Found ${keys.length} Supabase keys in localStorage</div>`;
        } else {
          result.innerHTML = `<div class="error">❌ No Supabase keys found in localStorage</div>`;
        }
      } catch (err) {
        log(`LocalStorage check error: ${err.message}`, 'error');
        result.innerHTML = `<div class="error">❌ Error: ${err.message}</div>`;
      }
    };

    window.testHeaderRendering = async function() {
      const result = document.getElementById('header-result');
      const preview = document.getElementById('header-preview');
      log('Testing header rendering...');
      
      try {
        // Import the header functions (we'll simulate them)
        const session = await ensureSessionHydrated();
        
        if (session?.user) {
          log(`Rendering logged-in header for: ${session.user.email}`, 'success');
          preview.innerHTML = `
            <strong>Logged In Header:</strong><br>
            User: ${session.user.email}<br>
            ID: ${session.user.id}<br>
            Avatar: ${session.user.user_metadata?.avatar_url || 'None'}
          `;
          result.innerHTML = `<div class="success">✅ Should show logged-in header</div>`;
        } else {
          log('Rendering logged-out header', 'error');
          preview.innerHTML = `<strong>Logged Out Header:</strong><br>Should show Login/Signup buttons`;
          result.innerHTML = `<div class="error">❌ Should show logged-out header</div>`;
        }
      } catch (err) {
        log(`Header rendering error: ${err.message}`, 'error');
        result.innerHTML = `<div class="error">❌ Error: ${err.message}</div>`;
      }
    };

    // Set up auth change listener
    onAnyAuthChange((evt, session) => {
      log(`Auth state changed: ${evt} - ${session ? 'Logged in' : 'Logged out'}`, session ? 'success' : 'error');
    });

    // Initial checks
    log('Debug page loaded');
    checkLocalStorage();
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Signup Button</title>
    <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
    <meta name="supabase-anon" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        .form-input { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #555; border-radius: 4px; background: #333; color: white; }
    </style>
</head>
<body>
    <h1>🔧 Debug Signup Button</h1>
    
    <div class="test-section">
        <h2>Step 1: Business Information</h2>
        <input type="text" name="country" class="form-input" placeholder="Country" value="Test Country">
        <input type="text" name="city" class="form-input" placeholder="City" value="Test City">
        <input type="text" name="business_name" class="form-input" placeholder="Business Name" value="Test Business">
        <input type="text" name="industry" class="form-input" placeholder="Industry" value="Technology">
        <textarea name="short_description" class="form-input" placeholder="Description">Test description</textarea>
        
        <div class="step-navigation">
            <button type="button" class="btn btn-secondary">Back</button>
            <button type="button" id="signup-next-1" class="btn btn-primary">Next</button>
        </div>
    </div>

    <div class="test-section">
        <h2>Console Output</h2>
        <div id="console-output"></div>
    </div>

    <!-- Simple click test -->
    <script>
        console.log("[Debug] Page loaded");
        
        // Test 1: Direct event listener
        document.getElementById('signup-next-1').addEventListener('click', function(e) {
            e.preventDefault();
            console.log("[Debug] Direct click handler fired");
            document.getElementById('console-output').innerHTML += '<p class="success">✅ Direct click handler fired</p>';
        });
        
        // Test 2: Event delegation
        document.addEventListener('click', function(e) {
            if (e.target.id === 'signup-next-1') {
                console.log("[Debug] Event delegation fired");
                document.getElementById('console-output').innerHTML += '<p class="info">ℹ️ Event delegation fired</p>';
            }
        });
        
        // Test 3: Check for overlays
        function checkOverlay() {
            const btn = document.getElementById('signup-next-1');
            const rect = btn.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            const element = document.elementFromPoint(x, y);
            
            if (element === btn) {
                console.log("[Debug] No overlay detected");
                document.getElementById('console-output').innerHTML += '<p class="success">✅ No overlay detected</p>';
            } else {
                console.warn("[Debug] Overlay detected:", element);
                document.getElementById('console-output').innerHTML += '<p class="error">❌ Overlay detected: ' + element.tagName + '</p>';
                element.style.outline = '2px solid red';
            }
        }
        
        // Run overlay check on load
        window.addEventListener('load', checkOverlay);
        
        // Test 4: Button properties
        window.addEventListener('load', function() {
            const btn = document.getElementById('signup-next-1');
            console.log("[Debug] Button properties:", {
                id: btn.id,
                type: btn.type,
                disabled: btn.disabled,
                style: btn.style.cssText,
                computedStyle: window.getComputedStyle(btn).pointerEvents
            });
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <link rel="stylesheet" href="/css/header.css?v=1">
  <script type="module" src="/js/supabase-client.js?v=20"></script>
  <script type="module" src="/js/header-auth-slot.js?v=7"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MSME Directory | Chamber122</title>
  <meta name="description" content="Browse and discover local MSMEs in Kuwait. Search by category, location, and find the perfect business for your needs.">
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=16">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">
      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link active" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn" data-testid="lang-switch-en">EN</button> |
          <button data-lang="ar" class="lang-btn" data-testid="lang-switch-ar">AR</button>
        </span>
        <!-- Auth slot for session-aware header -->
        <span id="auth-slot">
          <a class="btn" href="/auth.html">Login</a>
          <a class="btn primary" href="/auth.html#signup">Sign Up &amp; Get Listed</a>
        </span>

      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="directory.html" class="mobile-link">Directory</a>
      <a href="events.html" class="mobile-link">Events</a>
      <a href="bulletin.html" class="mobile-link">Bulletin</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="contact.html" class="mobile-link">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        My Business
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        My Activities
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        Admin Panel
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        Login
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        Sign Up & Get Listed
      </a>
    </div>
  </nav>

  <!-- Directory Header -->
  <section class="directory-header">
    <div class="directory-hero">
      <h1 data-i18n="page.title">MSME Directory</h1>
      <p data-i18n="page.subtitle">Discover and connect with Kuwait's growing community of micro, small, and medium enterprises</p>
    </div>
    
    <!-- Advanced Search/Filter Bar -->
    <div class="filter-container">
      <div class="filter-bar">
        <div class="filter-group">
          <label for="q" data-i18n="search.label">Search</label>
          <input type="text" id="q" class="filter-input" placeholder-i18n data-i18n="search.placeholder" placeholder="Search by name or description...">
        </div>
        <div class="filter-group">
          <label for="cat" data-i18n="filter.category">Category</label>
          <select id="cat" class="filter-input">
            <option value="" data-i18n="filter.allCategories">All Categories</option>
            <option value="Food & Beverage" data-i18n="filter.categories.food">Food & Beverage</option>
            <option value="Fashion & Beauty" data-i18n="filter.categories.fashion">Fashion & Beauty</option>
            <option value="Cleaning Services" data-i18n="filter.categories.cleaning">Cleaning Services</option>
            <option value="Technology" data-i18n="filter.categories.technology">Technology</option>
            <option value="Home Services" data-i18n="filter.categories.home">Home Services</option>
            <option value="Health & Wellness" data-i18n="filter.categories.health">Health & Wellness</option>
            <option value="Education" data-i18n="filter.categories.education">Education</option>
            <option value="Retail" data-i18n="filter.categories.retail">Retail</option>
            <option value="Automotive" data-i18n="filter.categories.automotive">Automotive</option>
            <option value="Other" data-i18n="filter.categories.other">Other</option>
          </select>
        </div>
        <button id="searchBtn" class="filter-btn">
          <i class="fas fa-search"></i> <span data-i18n="search.label">Search</span>
        </button>
      </div>
    </div>
  </section>

  <!-- Featured MSMEs Carousel -->
  <section class="featured-section">
    <div class="section-header">
      <h2 class="section-title" data-i18n="sections.featured">Featured MSMEs</h2>
      <p class="section-subtitle" data-i18n="sections.featuredSubtitle">Highlighted businesses in our community</p>
    </div>
    
    <div class="featured-carousel">
      <div class="featured-card" onclick="openMSMEOverlay('al-kuwaiti-kitchen')">
        <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=200&fit=crop" alt="Al Kuwaiti Kitchen">
        <h3>Al Kuwaiti Kitchen</h3>
        <div class="category">Food & Beverage</div>
        <div class="tag featured">Featured</div>
        <div class="explore-btn" data-i18n="msme.viewProfile">View Profile</div>
      </div>
      
      <div class="featured-card" onclick="openMSMEOverlay('desert-rose-boutique')">
        <img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=200&fit=crop" alt="Desert Rose Boutique">
        <h3>Desert Rose Boutique</h3>
        <div class="category">Fashion & Beauty</div>
        <div class="tag featured">Featured</div>
        <div class="explore-btn" data-i18n="msme.viewProfile">View Profile</div>
      </div>
      
      <div class="featured-card" onclick="openMSMEOverlay('techflow-kuwait')">
        <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&h=200&fit=crop" alt="TechFlow Kuwait">
        <h3>TechFlow Kuwait</h3>
        <div class="category">Technology</div>
        <div class="tag featured">Featured</div>
        <div class="explore-btn" data-i18n="msme.viewProfile">View Profile</div>
      </div>
    </div>
  </section>

  <!-- MSME Grid Directory -->
  <section class="directory-grid-section">
    <div id="list" class="directory-grid">
      <!-- MSME cards will be populated by JavaScript -->
    </div>
    
    <div class="load-more-container">
      <button id="loadMore" class="load-more-btn" style="display: none;">
        <i class="fas fa-plus"></i> Load More Businesses
      </button>
    </div>
    
    <div class="cta-section">
      <h3 data-i18n="cta.businessMissing">Is Your Business Missing?</h3>
      <p data-i18n="cta.joinCommunity">Join our community and get discovered by customers across Kuwait</p>
      <a href="get-listed.html" class="cta-btn-large">
        <i class="fas fa-plus"></i> <span data-i18n="cta.joinToday">Join Our Community Today</span>
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3 data-i18n="footer.aboutTitle">Chamber122</h3>
        <p data-i18n="footer.about">Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.quick">Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html" data-i18n="nav.home">Home</a></li>
            <li><a href="directory.html" data-i18n="nav.directory">Directory</a></li>
            <li><a href="events.html" data-i18n="nav.events">Events</a></li>
            <li><a href="bulletin.html" data-i18n="nav.bulletin">Bulletin</a></li>
            <li><a href="get-listed.html" data-i18n="cta.getListed">Get Listed</a></li>
            <li><a href="about.html" data-i18n="nav.about">About</a></li>
            <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.contactInfo">Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | <span data-i18n="footer.empowering">Empowering Kuwait's MSMEs</span></p>
    </div>
  </footer>

  <!-- Modal Overlay for MSME Details -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()">&times;</button>
      <div class="modal-header">
        <img id="modal-image" src="" alt="">
        <h2 id="modal-title" class="modal-title"></h2>
        <div id="modal-category" class="modal-category"></div>
      </div>
      <div class="modal-body">
        <p id="modal-description" class="modal-description"></p>
        <div class="modal-story">
          <h4>Why We Started</h4>
          <p id="modal-story"></p>
        </div>
        <div class="modal-actions">
          <a href="#" class="modal-btn primary" id="modal-whatsapp">
            <i class="fab fa-whatsapp"></i> WhatsApp
          </a>
          <a href="#" class="modal-btn secondary" id="modal-email">
            <i class="fas fa-envelope"></i> Email
          </a>
          <a href="#" class="modal-btn secondary" id="modal-website">
            <i class="fas fa-globe"></i> Website
          </a>
          <a href="#" class="modal-btn secondary" id="modal-instagram">
            <i class="fab fa-instagram"></i> Instagram
          </a>
        </div>
      </div>
    </div>
  </div>

  <script src="js/main.js?v=7"></script>
  <script type="module" src="js/directory.js"></script>
  <script type="module" src="js/msme-overlay.js"></script>
  <script type="module" src="js/analytics.js"></script>
  <script type="module" src="js/language-switcher.js"></script>
  <script type="module" src="./js/i18n.js"></script>
  <!-- Import authentication and gating scripts -->
  <script type="module" src="js/modal-login-required.js"></script>
  <script type="module" src="js/guest.js"></script>
  <link rel="stylesheet" href="css/modal.css">
  <link rel="stylesheet" href="css/header.css?v=1">
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <link rel="stylesheet" href="/css/header.css?v=1">
  <script type="module" src="/js/supabase-client.js?v=20"></script>
  <script type="module" src="/js/header-auth-slot.js?v=7"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Events & Promotions | Chamber122</title>
  <meta name="description" content="Discover MSME events, promotions, training sessions, and networking opportunities in Kuwait.">
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=18">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body data-type="event">
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">
      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link active" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn" data-testid="lang-switch-en">EN</button> |
          <button data-lang="ar" class="lang-btn" data-testid="lang-switch-ar">AR</button>
        </span>
        <!-- Auth slot for session-aware rendering -->
        <span id="auth-slot">
          <a class="btn" href="/auth.html">Login</a>
          <a class="btn primary" href="/auth.html#signup">Sign Up &amp; Get Listed</a>
        </span>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="directory.html" class="mobile-link">Directory</a>
      <a href="events.html" class="mobile-link">Events</a>
      <a href="bulletin.html" class="mobile-link">Bulletin</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="contact.html" class="mobile-link">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        My Business
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        My Activities
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        Admin Panel
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        Login
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        Sign Up & Get Listed
      </a>
    </div>
  </nav>

  <!-- Events Header -->
  <section class="events-header">
    <div class="events-hero">
      <h1 data-i18n="page.title">Events & Promotions</h1>
      <p data-i18n="page.subtitle">Discover upcoming events, training sessions, and promotional activities from Kuwait's MSME community</p>
    </div>
    
    <!-- Search and Filter Bar -->
    <div class="filter-container">
      <div class="filter-bar">
        <div class="filter-group">
          <label for="q" data-i18n="search.label">Search Events</label>
          <input type="text" id="q" class="filter-input" placeholder-i18n data-i18n="search.placeholder" placeholder="Search by title, description, or business...">
        </div>
        <div class="filter-group">
          <label for="range" data-i18n="filters.dateRange">Date Range</label>
          <select id="range" class="filter-input">
            <option value="all" data-i18n="filters.allEvents">All Events</option>
            <option value="today">Today</option>
            <option value="upcoming" data-i18n="filters.upcoming">Upcoming</option>
            <option value="past" data-i18n="filters.past">Past Events</option>
          </select>
        </div>
        <div class="filter-group">
          <button id="add-event-btn" class="add-event-btn" data-testid="add-event-btn">
            <i class="fas fa-plus"></i> <span data-i18n="buttons.addEvent">Add Event</span>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Events Actions -->
  <section class="events-actions">
    <!-- Add Event button is now in the filter bar above -->
  </section>

  <!-- Events Grid -->
  <section class="events-grid-section">
    <div class="events-grid" id="events-grid">
      <!-- Events will be populated by JavaScript -->
    </div>
    <!-- Also create the list container that activities.js expects -->
    <div id="activitiesList" class="list" style="display: none;"></div>
    
    <div class="load-more-container">
      <button class="load-more-btn" onclick="loadMoreActivities()">
        <i class="fas fa-plus"></i> Load More Events
      </button>
    </div>
  </section>

  <!-- Calendar View -->
  <section class="events-calendar-section" id="events-calendar-view" style="display: none;">
    <div id="calendar" data-cal="container" class="card" style="max-width: 800px; margin: 0 auto; padding: 20px;">
      <div class="row" style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
        <button id="calendar-prev" data-cal="prev" aria-label="Previous month" style="padding: 8px 12px; border: 1px solid #333; background: #1a1a1a; color: #fff; border-radius: 6px; cursor: pointer;">‹</button>
        <div id="calendar-month" data-cal="month" style="flex:1;text-align:center;font-weight:700; color: #fff; font-size: 18px;"></div>
        <button id="calendar-next" data-cal="next" aria-label="Next month" style="padding: 8px 12px; border: 1px solid #333; background: #1a1a1a; color: #fff; border-radius: 6px; cursor: pointer;">›</button>
      </div>
      <div id="calendar-grid" data-cal="grid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; margin-top: 10px;"></div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3 data-i18n="footer.aboutTitle">Chamber122</h3>
        <p data-i18n="footer.about">Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.quick">Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html" data-i18n="nav.home">Home</a></li>
            <li><a href="directory.html" data-i18n="nav.directory">Directory</a></li>
            <li><a href="events.html" data-i18n="nav.events">Events</a></li>
            <li><a href="bulletin.html" data-i18n="nav.bulletin">Bulletin</a></li>
            <li><a href="get-listed.html" data-i18n="cta.getListed">Get Listed</a></li>
            <li><a href="about.html" data-i18n="nav.about">About</a></li>
            <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.contactInfo">Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | <span data-i18n="footer.empowering">Empowering Kuwait's MSMEs</span></p>
    </div>
  </footer>

  <script src="/js/main.js?v=7"></script>
  <script type="module" src="/js/activities-list.js"></script>
  <script type="module" src="/js/language-switcher.js"></script>
  <script type="module" src="/js/i18n.js"></script>
  <script type="module" src="/js/events.js?v=4" defer></script>
  <!-- Auth Required Modal -->
  <div id="auth-required-modal" data-testid="auth-required-modal" style="position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.6); z-index:9999;">
    <div style="width:min(520px,92vw); background:#0f0f0f; color:#eaeaea; border:1px solid #2a2a2a; border-radius:16px; padding:20px;">
      <h3 style="margin:0 0 8px; font-size:20px;">Login required</h3>
      <p id="auth-required-reason" style="margin:0 0 16px; opacity:.9;">You need to be signed in to continue.</p>
      <div style="display:flex; gap:12px; justify-content:flex-end; flex-wrap:wrap;">
        <button id="events-auth-cancel" data-testid="auth-cancel" style="padding:10px 14px; background:#1a1a1a; border:1px solid #3a3a3a; color:#dcdcdc; border-radius:10px; cursor:pointer;">Cancel</button>
        <button id="auth-guest" data-testid="auth-continue-guest" style="padding:10px 14px; background:#111; border:1px solid #3a3a3a; color:#ffd166; border-radius:10px; cursor:pointer;">Continue as Guest</button>
        <button id="auth-go" data-testid="auth-sign-in" style="padding:10px 14px; background:#ffd166; color:#111; border:none; border-radius:10px; cursor:pointer; font-weight:600;">Sign in</button>
      </div>
    </div>
  </div>

  <!-- Guest Email Prompt -->
  <div id="guest-email-modal" style="position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.6); z-index:10000;">
    <div style="width:min(420px,92vw); background:#0f0f0f; color:#eaeaea; border:1px solid #2a2a2a; border-radius:16px; padding:20px;">
      <h3 style="margin:0 0 8px; font-size:18px;">Continue as Guest</h3>
      <p style="margin:0 0 8px; opacity:.9;">Enter your email. Your submission will be <b>reviewed</b> before publishing.</p>
      <input id="events-guest-email-input" data-testid="guest-email-input" type="email" placeholder="you@example.com" style="width:100%; padding:10px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; margin:8px 0;">
      <div style="display:flex; gap:12px; justify-content:flex-end;">
        <button id="guest-cancel" style="padding:10px 14px; background:#1a1a1a; border:1px solid #3a3a3a; color:#dcdcdc; border-radius:10px; cursor:pointer;">Cancel</button>
        <button id="guest-continue" data-testid="guest-continue-btn" style="padding:10px 14px; background:#ffd166; color:#111; border:none; border-radius:10px; cursor:pointer; font-weight:600;">Continue</button>
      </div>
    </div>
  </div>

  <!-- Event Creation Modal -->
  <div id="event-form-modal" class="event-modal" style="position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.8); z-index:10000;">
    <div class="event-modal-content" style="width:min(700px,95vw); max-height:90vh; background:#0f0f0f; color:#eaeaea; border:1px solid #2a2a2a; border-radius:16px; padding:0; overflow:hidden;">
      <!-- Modal Header -->
      <div class="event-modal-header" style="padding:20px; border-bottom:1px solid #2a2a2a; display:flex; justify-content:space-between; align-items:center;">
        <h3 style="margin:0; font-size:20px; color:#ffd166;">Create New Event</h3>
        <button id="close-event-modal" style="background:none; border:none; color:#aaa; font-size:24px; cursor:pointer; padding:0; width:30px; height:30px; display:flex; align-items:center; justify-content:center;">&times;</button>
      </div>
      
      <!-- Modal Body -->
      <div class="event-modal-body" style="padding:20px; max-height:70vh; overflow-y:auto;">
        <form id="event-creation-form">
          <!-- Business Selection (for authenticated users) -->
          <div id="business-selection" class="form-group" style="margin-bottom:20px;">
            <label for="event-business" style="display:block; margin-bottom:8px; font-weight:600;">Select Business</label>
            <select id="event-business" name="business_id" style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
              <option value="">Loading businesses...</option>
            </select>
          </div>
          
          <!-- Event Type -->
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-type" style="display:block; margin-bottom:8px; font-weight:600;">Event Type</label>
            <select id="event-type" name="type" required style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
              <option value="">Select event type...</option>
              <option value="networking">Networking</option>
              <option value="training">Training/Workshop</option>
              <option value="promotion">Promotion/Sale</option>
              <option value="market">Market/Fair</option>
              <option value="workshop">Workshop</option>
              <option value="conference">Conference</option>
              <option value="exhibition">Exhibition</option>
              <option value="other">Other</option>
            </select>
          </div>
          
          <!-- Event Title -->
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-title" style="display:block; margin-bottom:8px; font-weight:600;">Event Title *</label>
            <input type="text" id="event-title" name="title" required placeholder="Enter event title..." style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
          </div>
          
          <!-- Event Description -->
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-description" style="display:block; margin-bottom:8px; font-weight:600;">Description</label>
            <textarea id="event-description" name="description" rows="4" placeholder="Describe your event..." style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px; resize:vertical;"></textarea>
          </div>
          
          <!-- Date and Time -->
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-bottom:20px;">
            <div class="form-group">
              <label for="event-date" style="display:block; margin-bottom:8px; font-weight:600;">Event Date *</label>
              <input type="date" id="event-date" name="date" required style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
            </div>
            <div class="form-group">
              <label for="event-time" style="display:block; margin-bottom:8px; font-weight:600;">Start Time</label>
              <input type="time" id="event-time" name="time" style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
            </div>
          </div>
          
          <!-- End Date and Time -->
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-bottom:20px;">
            <div class="form-group">
              <label for="event-end-date" style="display:block; margin-bottom:8px; font-weight:600;">End Date</label>
              <input type="date" id="event-end-date" name="end_date" style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
            </div>
            <div class="form-group">
              <label for="event-end-time" style="display:block; margin-bottom:8px; font-weight:600;">End Time</label>
              <input type="time" id="event-end-time" name="end_time" style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
            </div>
          </div>
          
          <!-- Location -->
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-location" style="display:block; margin-bottom:8px; font-weight:600;">Location</label>
            <input type="text" id="event-location" name="location" placeholder="Enter event location..." style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
          </div>
          
          <!-- Contact Information -->
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-bottom:20px;">
            <div class="form-group">
              <label for="event-contact" style="display:block; margin-bottom:8px; font-weight:600;">Contact Email</label>
              <input type="email" id="event-contact" name="contact_email" placeholder="contact@example.com" style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
            </div>
            <div class="form-group">
              <label for="event-phone" style="display:block; margin-bottom:8px; font-weight:600;">Contact Phone</label>
              <input type="tel" id="event-phone" name="contact_phone" placeholder="+965 XXXX XXXX" style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
            </div>
          </div>
          
          <!-- Website/Link -->
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-link" style="display:block; margin-bottom:8px; font-weight:600;">Website/Registration Link</label>
            <input type="url" id="event-link" name="link" placeholder="https://example.com" style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
          </div>
          
          <!-- Cover Image Upload -->
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-image" style="display:block; margin-bottom:8px; font-weight:600;">Cover Image</label>
            <input type="file" id="event-image" name="cover_image" accept="image/*" style="width:100%; padding:12px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; font-size:14px;">
            <small style="color:#aaa; font-size:12px; margin-top:4px; display:block;">Upload an image to make your event stand out (optional)</small>
          </div>
          
          <!-- Status Message -->
          <div id="event-status-message" style="margin-bottom:20px; padding:12px; border-radius:8px; display:none;"></div>
        </form>
      </div>
      
      <!-- Modal Footer -->
      <div class="event-modal-footer" style="padding:20px; border-top:1px solid #2a2a2a; display:flex; gap:12px; justify-content:flex-end;">
        <button id="cancel-event" style="padding:12px 20px; background:#1a1a1a; border:1px solid #3a3a3a; color:#dcdcdc; border-radius:10px; cursor:pointer; font-weight:500;">Cancel</button>
        <button id="submit-event" style="padding:12px 20px; background:#ffd166; color:#111; border:none; border-radius:10px; cursor:pointer; font-weight:600;">Create Event</button>
      </div>
    </div>
  </div>

  <!-- Suggest Event (Guest) -->
  <div id="suggest-event-modal" data-testid="suggest-event-modal" style="position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.6); z-index:9998;">
    <div style="width:min(600px,94vw); background:#0f0f0f; color:#eaeaea; border:1px solid #2a2a2a; border-radius:16px; padding:20px;">
      <h3 style="margin:0 0 8px;">Suggest an Event (Guest)</h3>
      <p style="margin:0 0 12px; opacity:.9;">Your suggestion goes to our team for review before publishing.</p>
      <label>Title</label>
      <input id="se-title" data-testid="suggest-event-title" style="width:100%; padding:10px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; margin:6px 0;">
      <label>Date</label>
      <input id="se-date" data-testid="suggest-event-date" type="date" style="width:100%; padding:10px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; margin:6px 0;">
      <label>Location</label>
      <input id="se-location" data-testid="suggest-event-location" style="width:100%; padding:10px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; margin:6px 0;">
      <label>Description</label>
      <textarea id="se-desc" data-testid="suggest-event-desc" rows="4" style="width:100%; padding:10px; border-radius:10px; border:1px solid #3a3a3a; background:#121212; color:#eee; margin:6px 0;"></textarea>
      <div style="display:flex; gap:12px; justify-content:flex-end; margin-top:10px;">
        <button id="se-cancel" data-testid="suggest-event-cancel" style="padding:10px 14px; background:#1a1a1a; border:1px solid #3a3a3a; color:#dcdcdc; border-radius:10px; cursor:pointer;">Cancel</button>
        <button id="se-submit" data-testid="suggest-event-submit" style="padding:10px 14px; background:#ffd166; color:#111; border:none; border-radius:10px; cursor:pointer; font-weight:600;">Submit for Review</button>
      </div>
    </div>
  </div>

  <script type="module">
    import { startGuest } from '/js/guest.js';

    const authModal = document.getElementById('auth-required-modal');
    const reasonEl  = document.getElementById('auth-required-reason');
    const btnCancel = document.getElementById('auth-cancel');
    const btnGuest  = document.getElementById('auth-guest');
    const btnGo     = document.getElementById('auth-go');

    const guestModal    = document.getElementById('guest-email-modal');
    const guestInput    = document.getElementById('guest-email-input');
    const guestCancel   = document.getElementById('guest-cancel');
    const guestContinue = document.getElementById('guest-continue');

    let _ctx = { reason: '', redirect: location.pathname + location.search, onGuestReady: null };

    window.showAuthRequiredModal = function ({ reason = '', redirect = location.pathname + location.search, onGuestReady = null } = {}) {
      _ctx = { reason, redirect, onGuestReady };
      if (reasonEl) reasonEl.textContent = reason || 'You need to be signed in to continue.';
      authModal.style.display = 'flex';
    };

    function closeAuth() { authModal.style.display = 'none'; }
    function openGuest() { guestModal.style.display = 'flex'; }
    function closeGuest() { guestModal.style.display = 'none'; }

    btnCancel?.addEventListener('click', closeAuth);
    authModal?.addEventListener('click', (e) => { if (e.target === authModal) closeAuth(); });
    btnGo?.addEventListener('click', () => {
      const params = new URLSearchParams({ redirect: _ctx.redirect, reason: _ctx.reason });
      location.href = `/auth.html?${params.toString()}`;
    });

    btnGuest?.addEventListener('click', () => {
      closeAuth();
      openGuest();
      guestInput?.focus();
    });

    guestCancel?.addEventListener('click', closeGuest);
    guestModal?.addEventListener('click', (e) => { if (e.target === guestModal) closeGuest(); });
    guestContinue?.addEventListener('click', () => {
      const email = (guestInput?.value || '').trim();
      try {
        startGuest(email);
        closeGuest();
        if (typeof _ctx.onGuestReady === 'function') _ctx.onGuestReady();
      } catch {
        alert('Please enter a valid email to continue as Guest.');
      }
    });
  </script>

  <script type="module">
    import { isAuthenticated, getCurrentAccountState } from '/js/supabase.js';
    import { isGuestActive } from '/js/guest.js';
    import { sb } from '/js/supabase.js';
    import { openEventForm } from '/js/events.js?v=3';

    const addBtn = document.getElementById('add-event-btn');
    const suggestModal = document.getElementById('suggest-event-modal');
    const seCancel = document.getElementById('se-cancel');
    const seSubmit = document.getElementById('se-submit');

    function openSuggest() { suggestModal.style.display = 'flex'; }
    function closeSuggest() { suggestModal.style.display = 'none'; }

    addBtn?.addEventListener('click', async (e) => {
      e.preventDefault();
      console.log('Add Event button clicked!');
      
      // TEMPORARY: Skip all authentication checks and just open the modal
      console.log('Opening event form directly (bypassing auth checks)');
      openEventForm();
      
      // Original authentication code (commented out for testing)
      /*
      try {
        const authed = await isAuthenticated();
        console.log('Authentication status:', authed);
        
        if (authed) {
          // Check detailed account state
          const { approved, emailVerified, completeness, isFullyLoggedIn, account } = await getCurrentAccountState();
          console.log('Account state:', { approved, emailVerified, completeness, isFullyLoggedIn, account });
          
          if (isFullyLoggedIn) {
            // Fully logged in - open event creation modal
            console.log('Opening event form for fully logged in user');
            openEventForm();
          } else {
            // Not fully logged in - show detailed status message
            let statusMessage = '';
            if (!account) {
              statusMessage = 'Please create your business profile to add events.';
            } else if (!approved) {
              statusMessage = `Your account is ${account.status}. Complete your profile to enable instant publishing.`;
            } else if (!emailVerified) {
              statusMessage = 'Please verify your email address to enable instant publishing.';
            } else if (completeness < 80) {
              statusMessage = `Profile completeness: ${completeness}%. Complete your profile (80%+) to enable instant publishing.`;
            } else {
              statusMessage = 'Complete your profile to enable instant publishing.';
            }
            
            console.log('Showing auth modal with reason:', statusMessage);
            showAuthRequiredModal({
              reason: statusMessage,
              redirect: `/owner-activities.html?tab=events&return=${encodeURIComponent(location.pathname)}`,
              onGuestReady: () => openSuggest()
            });
          }
        } else {
          // Not authenticated - show auth modal
          console.log('User not authenticated, showing auth modal');
          showAuthRequiredModal({
            reason: 'Sign in to add an event, or continue as Guest to suggest one for review.',
            redirect: `/owner-activities.html?tab=events&return=${encodeURIComponent(location.pathname)}`,
            onGuestReady: () => openSuggest()
          });
        }
      } catch (error) {
        console.error('Error in button click handler:', error);
        // Fallback: just try to open the form
        console.log('Fallback: trying to open event form directly');
        openEventForm();
      }
      */
    });

    seCancel?.addEventListener('click', closeSuggest);
    seSubmit?.addEventListener('click', async () => {
      const title = document.getElementById('se-title').value.trim();
      const date  = document.getElementById('se-date').value;
      const loc   = document.getElementById('se-location').value.trim();
      const desc  = document.getElementById('se-desc').value.trim();
      if (!title || !date) return alert('Title and Date are required.');
      if (!isGuestActive()) return alert('Guest email missing. Continue as Guest again.');

      try {
        const guestEmail = localStorage.getItem('ch122_guest_email') || null;
        const { error } = await sb().from('event_suggestions').insert({
          title, date, location: loc, description: desc,
          submitter_email: guestEmail, status: 'pending'
        });
        if (error) throw error;
        closeSuggest();
        alert('Thanks! Your event suggestion was submitted for review.');
      } catch (e) {
        console.error(e);
        alert('Could not submit suggestion. Please try again.');
      }
    });
  </script>

  <!-- Import authentication and gating scripts -->
  <script type="module" src="js/gating.js"></script>
  <script type="module" src="js/modal-login-required.js"></script>
  <script type="module" src="js/guest.js"></script>
  <script type="module" src="js/compliance-guards.js"></script>
  <link rel="stylesheet" href="css/modal.css">
  <link rel="stylesheet" href="css/header.css?v=1">
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Get Listed | Chamber122</title>
  <meta name="description" content="Join Chamber122's directory of local MSMEs. Get your business listed for free and connect with customers in Kuwait.">
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=16">
  <link rel="stylesheet" href="css/header.css?v=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Global Header -->
  <div id="site-header"></div>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">

      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn">EN</button> |
          <button data-lang="ar" class="lang-btn">AR</button>
        </span>

      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="directory.html" class="mobile-link">Directory</a>
      <a href="events.html" class="mobile-link">Events</a>
      <a href="bulletin.html" class="mobile-link">Bulletin</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="contact.html" class="mobile-link">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        My Business
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        My Activities
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        Admin Panel
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        Login
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        Sign Up & Get Listed
      </a>
    </div>
  </nav>

  <!-- Form Section -->
  <section class="form-section">
    <div class="form-wrapper">
      <div class="form-header">
        <h1>Get Listed on Chamber122</h1>
        <p>Join our growing community of local MSMEs and connect with customers in Kuwait. It's completely free!</p>
      </div>

      <form id="msme-form" action="#" method="post" enctype="multipart/form-data">
        <!-- Business Information -->
        <div class="form-section-group">
          <h3><i class="fas fa-building"></i> Business Information</h3>
          
          <div class="form-group">
            <label for="businessName">Business Name *</label>
            <input type="text" id="businessName" name="businessName" class="form-input" required placeholder="Enter your business name">
          </div>

          <div class="form-group">
            <label for="ownerName">Owner's Full Name *</label>
            <input type="text" id="ownerName" name="ownerName" class="form-input" required placeholder="Enter owner's full name">
          </div>

          <div class="form-group">
            <label for="email">Email Address *</label>
            <input type="email" id="email" name="email" class="form-input" required placeholder="your@email.com">
          </div>

          <div class="form-group">
            <label for="phone">Phone Number *</label>
            <input type="tel" id="phone" name="phone" class="form-input" required placeholder="+965-12345678">
          </div>
        </div>

        <!-- Business Details -->
        <div class="form-section-group">
          <h3><i class="fas fa-info-circle"></i> Business Details</h3>
          
          <div class="form-group">
            <label for="category">Business Category *</label>
            <select id="category" name="category" class="form-input" required>
              <option value="">Select a category...</option>
              <option value="food">Food & Beverage</option>
              <option value="fashion">Fashion & Beauty</option>
              <option value="cleaning">Cleaning Services</option>
              <option value="tech">Technology</option>
              <option value="home">Home Services</option>
              <option value="health">Health & Wellness</option>
              <option value="education">Education</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label for="city">City *</label>
            <select id="city" name="city" class="form-input" required>
              <option value="">Select your city...</option>
              <option value="kuwait-city">Kuwait City</option>
              <option value="hawally">Hawally</option>
              <option value="farwaniya">Farwaniya</option>
              <option value="jahra">Jahra</option>
              <option value="mubarak-al-kabeer">Mubarak Al-Kabeer</option>
              <option value="ahmadi">Ahmadi</option>
            </select>
          </div>

          <div class="form-group">
            <label for="country">Country</label>
            <input type="text" id="country" name="country" class="form-input" value="Kuwait" readonly>
          </div>

          <div class="form-group">
            <label for="description">Business Description *</label>
            <textarea id="description" name="description" class="form-input" rows="4" required placeholder="Tell us about your business, what you offer, and what makes you unique..."></textarea>
          </div>
        </div>

        <!-- Story Section -->
        <div class="form-section-group">
          <h3><i class="fas fa-heart"></i> Your Story</h3>
          
          <div class="form-group">
            <label for="story">Why Did You Start This Business? *</label>
            <textarea id="story" name="story" class="form-input" rows="4" required placeholder="Share your journey, inspiration, and what drives you..."></textarea>
            <p class="field-note">This helps customers connect with your brand and understand your mission.</p>
          </div>
        </div>

        <!-- Media & Links -->
        <div class="form-section-group">
          <h3><i class="fas fa-link"></i> Media & Links</h3>
          
          <div class="form-group">
            <label for="logo">Business Logo</label>
            <input type="file" id="logo" name="logo" class="form-input" accept="image/*">
            <p class="field-note">Upload your business logo (JPG, PNG, max 2MB)</p>
          </div>

          <div class="form-group">
            <label for="photos">Business Photos (Optional)</label>
            <input type="file" id="photos" name="photos" class="form-input" multiple accept="image/*">
            <p class="field-note">Add up to 5 photos of your business, products, or services</p>
          </div>

          <div class="form-group">
            <label for="website">Website (Optional)</label>
            <input type="url" id="website" name="website" class="form-input" placeholder="https://yourwebsite.com">
          </div>

          <div class="form-group">
            <label for="instagram">Instagram Handle (Optional)</label>
            <input type="text" id="instagram" name="instagram" class="form-input" placeholder="@yourbusiness">
          </div>
        </div>

        <!-- Submission -->
        <div class="form-section-group">
          <p id="form-status"></p>
          
          <div class="form-note">
            <i class="fas fa-info-circle"></i>
            <div>
              <strong>What happens next?</strong><br>
              Once submitted, your listing will be reviewed by our team within 2-3 business days. 
              We'll notify you via email once it's live on our directory.
            </div>
          </div>

          <button type="submit" class="submit-btn">
            <i class="fas fa-paper-plane"></i> Submit Listing
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3>Chamber122</h3>
        <p>Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3>Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html">Home</a></li>
            <li><a href="directory.html">Directory</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="bulletin.html">Bulletin</a></li>
            <li><a href="get-listed.html">Get Listed</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3>Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | Empowering Kuwait's MSMEs</p>
    </div>
  </footer>

  <script src="js/main.js?v=7"></script>
  <script type="module" src="./js/i18n.js"></script>
  <script type="module" src="js/get-listed.js"></script>
  <script type="module">
    import { initNavAuthState } from '/js/nav-auth-state.js';
    initNavAuthState();
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Chamber122 - Discover Amazing MSMEs in Kuwait</title>
  <meta name="description" content="Search, explore, and connect with businesses shaping Kuwait's future. Join Chamber122's directory of local MSMEs.">
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <link rel="stylesheet" href="/css/header.css?v=1">
  <script type="module" src="/js/supabase-client.js?v=20"></script>
  <script type="module" src="/js/header-auth-slot.js?v=7"></script>
  <link rel="stylesheet" href="css/style.css?v=17">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">
      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link active" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn" data-testid="lang-switch-en">EN</button> |
          <button data-lang="ar" class="lang-btn" data-testid="lang-switch-ar">AR</button>
        </span>
        <!-- Auth slot for session-aware header -->
        <span id="auth-slot">
          <a class="btn" href="/auth.html">Login</a>
          <a class="btn primary" href="/auth.html#signup">Sign Up & Get Listed</a>
        </span>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link" data-i18n="nav.home">Home</a>
      <a href="directory.html" class="mobile-link" data-i18n="nav.directory">Directory</a>
      <a href="events.html" class="mobile-link" data-i18n="nav.events">Events</a>
      <a href="bulletin.html" class="mobile-link" data-i18n="nav.bulletin">Bulletin</a>
      <a href="about.html" class="mobile-link" data-i18n="nav.about">About</a>
      <a href="contact.html" class="mobile-link" data-i18n="nav.contact">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        <span data-i18n="common.myBusiness">My Business</span>
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        <span data-i18n="common.myActivities">My Activities</span>
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        <span data-i18n="common.adminPanel">Admin Panel</span>
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        <span data-i18n="cta.login">Login</span>
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        <span data-i18n="cta.signup">Sign Up & Get Listed</span>
      </a>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <div class="chamber-header">
        <h1 class="chamber-title" data-i18n="hero.chamberTitle">Chamber122</h1>
      </div>
      <h2 class="hero-main-title" data-i18n="hero.title">Unite. Promote. Grow. Together.</h2>
      <p class="hero-subtitle" data-i18n="hero.subtitle">Empowering Kuwait's MSMEs through community, collaboration, and shared success. Join Chamber 122 and unlock your business potential.</p>
      
      <!-- Quick Search Bar -->
      <div class="quick-search-container">
        <h3 data-i18n="search.findLocal">Find Local MSMEs</h3>
        <div class="quick-search-bar">
          <div class="search-group">
            <input type="text" id="quick-business-name" class="search-input" placeholder-i18n data-i18n="search.namePh" placeholder="Business name...">
          </div>
          <div class="search-group">
            <select id="quick-category" class="search-input">
              <option value="" data-i18n="search.allCategories">All Categories</option>
              <option value="food" data-i18n="search.categories.food">Food & Beverage</option>
              <option value="fashion" data-i18n="search.categories.fashion">Fashion & Beauty</option>
              <option value="cleaning" data-i18n="search.categories.cleaning">Cleaning Services</option>
              <option value="tech" data-i18n="search.categories.tech">Technology</option>
              <option value="home" data-i18n="search.categories.home">Home Services</option>
            </select>
          </div>
          <div class="search-group">
            <select id="quick-area" class="search-input">
              <option value="" data-i18n="search.allAreas">All Areas</option>
              <option value="kuwait-city">Kuwait City</option>
              <option value="hawally">Hawally</option>
              <option value="farwaniya">Farwaniya</option>
              <option value="jahra">Jahra</option>
              <option value="ahmadi">Ahmadi</option>
            </select>
          </div>
          <button class="search-btn" onclick="performQuickSearch()">
            <i class="fas fa-search"></i> <span data-i18n="search.btn">Search</span>
          </button>
        </div>
        <p class="search-note" data-i18n="search.browseAll">Or <a href="directory.html" class="text-link">browse all MSMEs</a></p>
      </div>
    </div>
  </section>

  <!-- Featured MSMEs Section -->
  <section class="featured-section">
    <div class="section-header">
      <h2 class="section-title" data-i18n="sections.featured">Featured This Week</h2>
      <p class="section-subtitle" data-i18n="sections.featuredSubtitle">New businesses joining our community</p>
    </div>
    
    <div class="featured-carousel">
      <a href="get-listed.html" class="featured-card">
        <img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=200&fit=crop" alt="The Kuwaiti Chef">
        <h3>The Kuwaiti Chef</h3>
        <div class="category">Food & Beverage</div>
        <div class="tag">New</div>
        <div class="explore-btn">Get Listed</div>
      </a>
      
      <a href="get-listed.html" class="featured-card">
        <img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=200&fit=crop" alt="Desert Blossoms">
        <h3>Desert Blossoms</h3>
        <div class="category">Fashion & Beauty</div>
        <div class="tag">New</div>
        <div class="explore-btn">Get Listed</div>
      </a>
      
      <a href="get-listed.html" class="featured-card">
        <img src="https://images.unsplash.com/photo-1581578731548-c64695cc6952?w=400&h=200&fit=crop" alt="FixIt Fast">
        <h3>FixIt Fast</h3>
        <div class="category">Home Services</div>
        <div class="tag">New</div>
        <div class="explore-btn">Get Listed</div>
      </a>
      
      <a href="get-listed.html" class="featured-card">
        <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=200&fit=crop" alt="Sparkle Clean">
        <h3>Sparkle Clean</h3>
        <div class="category">Cleaning Services</div>
        <div class="tag">New</div>
        <div class="explore-btn">Get Listed</div>
      </a>
      
      <a href="get-listed.html" class="featured-card">
        <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&h=200&fit=crop" alt="Tech Solutions KW">
        <h3>Tech Solutions KW</h3>
        <div class="category">Technology</div>
        <div class="tag">New</div>
        <div class="explore-btn">Get Listed</div>
      </a>
    </div>
  </section>

  <!-- This Week's Event Section -->
  <section class="event-highlight">
    <div class="section-header">
      <h2 class="section-title" data-i18n="sections.thisWeekEvent">This Week's Event</h2>
      <p class="section-subtitle" data-i18n="sections.thisWeekEventSubtitle">Don't miss out on the latest community happenings</p>
    </div>
    
    <div class="event-card-featured">
      <div class="event-image">
        <img src="https://images.unsplash.com/photo-1552664730-d307ca884978?w=500&h=300&fit=crop" alt="MSME Networking Night">
        <div class="event-badge">This Week</div>
      </div>
      <div class="event-content">
        <h3>MSME Networking Night</h3>
        <div class="event-meta">
          <span class="event-date"><i class="fas fa-calendar"></i> Friday, Jan 31, 2025</span>
          <span class="event-time"><i class="fas fa-clock"></i> 7:00 PM - 10:00 PM</span>
          <span class="event-location"><i class="fas fa-map-marker-alt"></i> Kuwait Chamber of Commerce</span>
        </div>
        <p class="event-description">Join fellow MSME owners for an evening of networking, knowledge sharing, and community building. Light refreshments provided.</p>
        <a href="events.html" class="event-btn">Learn More</a>
      </div>
    </div>
  </section>

  <!-- Newest Listings Section -->
  <section class="newest-listings">
    <div class="section-header">
      <h2 class="section-title" data-i18n="sections.newestListings">Newest Listings</h2>
      <p class="section-subtitle" data-i18n="sections.newestListingsSubtitle">Welcome our latest community members</p>
    </div>
    
    <div class="newest-grid" id="newest-grid">
      <!-- Newest MSME cards will be populated by JavaScript -->
    </div>
    
    <div class="cta-section">
      <h3 data-i18n="cta.readyToJoin">Ready to Join Our Community?</h3>
      <p data-i18n="cta.listBusiness">List your business today and connect with customers across Kuwait</p>
      <a href="/owner.html" class="cta-btn-large cta-primary">
        <i class="fas fa-plus"></i> <span data-i18n="cta.joinCommunity">Join Our Community Today</span>
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3 data-i18n="footer.aboutTitle">Chamber122</h3>
        <p data-i18n="footer.about">Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.quick">Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html" data-i18n="nav.home">Home</a></li>
            <li><a href="directory.html" data-i18n="nav.directory">Directory</a></li>
            <li><a href="events.html" data-i18n="nav.events">Events</a></li>
            <li><a href="bulletin.html" data-i18n="nav.bulletin">Bulletin</a></li>
            <li><a href="get-listed.html" data-i18n="cta.getListed">Get Listed</a></li>
            <li><a href="about.html" data-i18n="nav.about">About</a></li>
            <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.contactInfo">Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | Empowering Kuwait's MSMEs</p>
    </div>
  </footer>

  <!-- Modal Overlay for MSME Details -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()">&times;</button>
      <div class="modal-header">
        <img id="modal-image" src="" alt="">
        <h2 id="modal-title" class="modal-title"></h2>
        <div id="modal-category" class="modal-category"></div>
      </div>
      <div class="modal-body">
        <p id="modal-description" class="modal-description"></p>
        <div class="modal-story">
          <h4>Why We Started</h4>
          <p id="modal-story"></p>
        </div>
        <div class="modal-actions">
          <a href="#" class="modal-btn primary" id="modal-email">
            <i class="fas fa-envelope"></i> Email
          </a>
          <a href="#" class="modal-btn secondary" id="modal-whatsapp">
            <i class="fab fa-whatsapp"></i> WhatsApp
          </a>
          <a href="#" class="modal-btn secondary" id="modal-website">
            <i class="fas fa-globe"></i> Website
          </a>
        </div>
      </div>
    </div>
  </div>

  <script src="js/main.js?v=7"></script>
  <script type="module" src="js/language-switcher.js"></script>
  <script type="module" src="./js/i18n.js"></script>
  <script type="module" src="js/config.js"></script>
  <script type="module" src="js/supabase-client.js"></script>
  <script type="module" src="js/auth-state-manager.js"></script>
  <script type="module" src="./js/modal-login-required.js"></script>
  <script type="module" src="./js/gating.js"></script>
  <script type="module" src="js/compliance-banner.js"></script>
  <script type="module" src="js/notification-system.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal Working Stepper</title>
    <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
    <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .step { display: none; padding: 20px; border: 1px solid #333; border-radius: 8px; margin: 10px 0; }
        .step.active { display: block; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        button:disabled { background: #666; cursor: not-allowed; }
        .form-input { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #555; border-radius: 4px; background: #333; color: white; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
    </style>
</head>
<body>
    <h1>🔧 Minimal Working Stepper</h1>
    
    <div id="step-1" class="step active">
        <h2>Step 1: Business Information</h2>
        <input type="text" name="country" class="form-input" placeholder="Country" required>
        <input type="text" name="city" class="form-input" placeholder="City" required>
        <input type="text" name="business_name" class="form-input" placeholder="Business Name" required>
        <input type="text" name="industry" class="form-input" placeholder="Industry" required>
        <textarea name="short_description" class="form-input" placeholder="Description"></textarea>
        
        <div>
            <button type="button" id="next-1" class="btn btn-primary">Next</button>
        </div>
    </div>

    <div id="step-2" class="step">
        <h2>Step 2: Documents</h2>
        <p>Document upload step (placeholder)</p>
        
        <div>
            <button type="button" id="back-2" class="btn btn-secondary">Back</button>
            <button type="button" id="next-2" class="btn btn-primary">Next</button>
        </div>
    </div>

    <div id="step-3" class="step">
        <h2>Step 3: Account</h2>
        <p>Account creation step (placeholder)</p>
        
        <div>
            <button type="button" id="back-3" class="btn btn-secondary">Back</button>
            <button type="button" id="next-3" class="btn btn-primary">Next</button>
        </div>
    </div>

    <div id="step-4" class="step">
        <h2>Step 4: Complete</h2>
        <p>Signup complete!</p>
        
        <div>
            <button type="button" id="back-4" class="btn btn-secondary">Back</button>
            <button type="button" id="finish" class="btn btn-primary">Finish</button>
        </div>
    </div>

    <div id="console-output"></div>

    <script>
        console.log("[MinimalStepper] Page loaded");
        
        let currentStep = 1;
        const totalSteps = 4;
        
        function showStep(stepNumber) {
            console.log(`[MinimalStepper] Showing step ${stepNumber}`);
            
            // Hide all steps
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show current step
            const step = document.getElementById(`step-${stepNumber}`);
            if (step) {
                step.classList.add('active');
                currentStep = stepNumber;
                console.log(`[MinimalStepper] Step ${stepNumber} is now active`);
            }
        }
        
        function validateStep(stepNumber) {
            console.log(`[MinimalStepper] Validating step ${stepNumber}`);
            
            if (stepNumber === 1) {
                const country = document.querySelector('[name="country"]').value.trim();
                const city = document.querySelector('[name="city"]').value.trim();
                const businessName = document.querySelector('[name="business_name"]').value.trim();
                const industry = document.querySelector('[name="industry"]').value.trim();
                
                if (!country || !city || !businessName || !industry) {
                    alert('Please fill in all required fields');
                    return false;
                }
            }
            
            return true;
        }
        
        function handleNextClick(e) {
            e.preventDefault();
            console.log(`[MinimalStepper] Next clicked on step ${currentStep}`);
            
            // Validate current step
            if (!validateStep(currentStep)) {
                return;
            }
            
            // Move to next step
            if (currentStep < totalSteps) {
                showStep(currentStep + 1);
            } else {
                console.log('[MinimalStepper] Signup complete!');
                alert('Signup complete!');
            }
        }
        
        function handleBackClick(e) {
            e.preventDefault();
            console.log(`[MinimalStepper] Back clicked on step ${currentStep}`);
            
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }
        
        // Bind all Next buttons
        document.querySelectorAll('[id^="next-"]').forEach(btn => {
            btn.addEventListener('click', handleNextClick);
            console.log(`[MinimalStepper] Bound next button: ${btn.id}`);
        });
        
        // Bind all Back buttons
        document.querySelectorAll('[id^="back-"]').forEach(btn => {
            btn.addEventListener('click', handleBackClick);
            console.log(`[MinimalStepper] Bound back button: ${btn.id}`);
        });
        
        // Test button functionality
        setTimeout(() => {
            console.log('[MinimalStepper] Testing button functionality...');
            const nextBtn = document.getElementById('next-1');
            if (nextBtn) {
                console.log('[MinimalStepper] Next button found:', nextBtn);
                console.log('[MinimalStepper] Button properties:', {
                    id: nextBtn.id,
                    type: nextBtn.type,
                    disabled: nextBtn.disabled,
                    onclick: nextBtn.onclick
                });
            }
        }, 1000);
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Onboarding Checklist Demo | Chamber122</title>
  <link rel="stylesheet" href="css/style.css?v=16">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      min-height: 100vh;
      font-family: 'Inter', sans-serif;
    }
    
    .demo-controls {
      background: rgba(31, 41, 55, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(75, 85, 99, 0.3);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .status-toggle {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .status-toggle button {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.3);
      color: #60a5fa;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .status-toggle button:hover {
      background: rgba(59, 130, 246, 0.2);
      border-color: rgba(59, 130, 246, 0.5);
    }
    
    .status-toggle button.active {
      background: rgba(34, 197, 94, 0.2);
      border-color: rgba(34, 197, 94, 0.5);
      color: #4ade80;
    }
    
    .demo-actions {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .demo-actions button {
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .demo-actions button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }
    
    .demo-actions button.secondary {
      background: linear-gradient(135deg, #6b7280, #4b5563);
    }
    
    .demo-actions button.secondary:hover {
      box-shadow: 0 4px 12px rgba(107, 114, 128, 0.3);
    }
  </style>
</head>
<body>
  <div class="container mx-auto px-4 py-8">
    <!-- Demo Controls -->
    <div class="demo-controls">
      <h1 class="text-3xl font-bold text-white mb-4">
        Onboarding Checklist Demo
        <span class="text-lg font-normal text-gray-400 block">عرض توضيحي لقائمة التحقق من التسجيل</span>
      </h1>
      
      <p class="text-gray-300 mb-4">
        This demo shows the two-tier onboarding checklist component with Arabic and English labels. 
        Toggle items to see the progress bars update in real-time.
      </p>
      
      <div class="status-toggle">
        <button onclick="toggleAllRequired()">Toggle All Required</button>
        <button onclick="toggleAllRecommended()">Toggle All Recommended</button>
        <button onclick="resetAll()">Reset All</button>
        <button onclick="completeAll()">Complete All</button>
      </div>
      
      <div class="demo-actions">
        <button onclick="exportStatus()">Export Status</button>
        <button class="secondary" onclick="importStatus()">Import Status</button>
        <button class="secondary" onclick="showStatus()">Show Current Status</button>
      </div>
    </div>

    <!-- Onboarding Checklist Container -->
    <div id="onboarding-checklist"></div>
  </div>

  <!-- Scripts -->
  <script src="js/onboarding-checklist.js"></script>
  <script>
    // Initialize the onboarding checklist
    let checklist;
    
    // Sample status data
    const initialStatus = {
      businessName: true,
      industryCountry: true,
      businessLogo: false,
      businessLicense: false,
      articlesIncorporation: false,
      signatureAuthorization: false,
      ibanCertificate: false,
      contactEmail: true,
      phoneWhatsapp: true,
      businessDescription: false,
      aboutStory: false,
      businessCategory: false,
      socialMediaLinks: false,
      physicalAddress: false,
      googleMapsLink: false,
      serviceArea: false,
      openingHours: false,
      languagesSupported: false,
      numberEmployees: false,
      coverImage: false,
      galleryPortfolio: false,
      introVideo: false,
      certificatesAwards: false
    };

    // Initialize checklist
    document.addEventListener('DOMContentLoaded', () => {
      checklist = new OnboardingChecklist('onboarding-checklist', initialStatus);
      
      // Listen for completion events
      document.getElementById('onboarding-checklist').addEventListener('onboardingItemComplete', (e) => {
        console.log('Item completed:', e.detail);
        showNotification(`Completed: ${e.detail.itemName}`);
      });
    });

    // Demo functions
    function toggleAllRequired() {
      const requiredKeys = ['businessName', 'industryCountry', 'businessLogo', 'businessLicense', 
                           'articlesIncorporation', 'signatureAuthorization', 'ibanCertificate'];
      const currentStatus = checklist.getStatus();
      const newStatus = {};
      
      requiredKeys.forEach(key => {
        newStatus[key] = !currentStatus[key];
      });
      
      checklist.updateStatus(newStatus);
      showNotification('Toggled all required items');
    }

    function toggleAllRecommended() {
      const recommendedKeys = ['contactEmail', 'phoneWhatsapp', 'businessDescription', 'aboutStory',
                              'businessCategory', 'socialMediaLinks', 'physicalAddress', 'googleMapsLink',
                              'serviceArea', 'openingHours', 'languagesSupported', 'numberEmployees',
                              'coverImage', 'galleryPortfolio', 'introVideo', 'certificatesAwards'];
      const currentStatus = checklist.getStatus();
      const newStatus = {};
      
      recommendedKeys.forEach(key => {
        newStatus[key] = !currentStatus[key];
      });
      
      checklist.updateStatus(newStatus);
      showNotification('Toggled all recommended items');
    }

    function resetAll() {
      const allKeys = Object.keys(initialStatus);
      const newStatus = {};
      allKeys.forEach(key => {
        newStatus[key] = false;
      });
      
      checklist.updateStatus(newStatus);
      showNotification('Reset all items');
    }

    function completeAll() {
      const allKeys = Object.keys(initialStatus);
      const newStatus = {};
      allKeys.forEach(key => {
        newStatus[key] = true;
      });
      
      checklist.updateStatus(newStatus);
      showNotification('Completed all items');
    }

    function exportStatus() {
      const status = checklist.getStatus();
      const dataStr = JSON.stringify(status, null, 2);
      const dataBlob = new Blob([dataStr], {type: 'application/json'});
      const url = URL.createObjectURL(dataBlob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'onboarding-status.json';
      link.click();
      URL.revokeObjectURL(url);
      showNotification('Status exported to JSON file');
    }

    function importStatus() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = '.json';
      input.onchange = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            try {
              const status = JSON.parse(e.target.result);
              checklist.updateStatus(status);
              showNotification('Status imported successfully');
            } catch (error) {
              showNotification('Error importing status: Invalid JSON');
            }
          };
          reader.readAsText(file);
        }
      };
      input.click();
    }

    function showStatus() {
      const status = checklist.getStatus();
      const requiredCompleted = checklist.getRequiredCompleted();
      const requiredTotal = checklist.getRequiredTotal();
      const recommendedCompleted = checklist.getRecommendedCompleted();
      const recommendedTotal = checklist.getRecommendedTotal();
      
      const message = `Current Status:
Required: ${requiredCompleted}/${requiredTotal} (${checklist.getRequiredPercentage()}%)
Recommended: ${recommendedCompleted}/${recommendedTotal} (${checklist.getRecommendedPercentage()}%)

Full Status:
${JSON.stringify(status, null, 2)}`;
      
      alert(message);
    }

    function showNotification(message) {
      // Create a simple notification
      const notification = document.createElement('div');
      notification.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50';
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>My Events | Chamber122</title>
  <meta name="description" content="Create and manage events for your business on Chamber122. Share events, announcements, and opportunities with the community.">
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=17">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Global Header -->
  <div id="site-header"></div>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">

      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn" data-testid="lang-switch-en">EN</button> |
          <button data-lang="ar" class="lang-btn" data-testid="lang-switch-ar">AR</button>
        </span>
        <!-- Auth CTAs (shown when NOT logged in) -->
        <div id="auth-cta" class="flex items-center gap-3" data-testid="auth-cta">
          <a href="auth.html#login" class="btn btn-ghost text-sm" data-testid="login-cta" data-i18n="nav.login">Login</a>
          <a href="auth.html#signup" class="btn btn-primary text-sm px-4 py-2 rounded-2xl shadow-sm" data-testid="signup-cta" data-i18n="nav.signup">
            Sign Up & Get Listed
          </a>
        </div>

        <!-- Account menu (shown ONLY when logged in) -->
        <div id="account-menu" class="relative hidden" data-testid="account-menu">
          <button id="account-btn" class="btn btn-outline flex items-center gap-2">
            <img id="account-avatar" src="" alt="" class="h-7 w-7 rounded-full object-cover hidden">
            <span id="account-name" data-i18n="nav.account">Account</span>
            <svg class="h-4 w-4 opacity-70" viewBox="0 0 20 20"><path d="M5 7l5 6 5-6"/></svg>
          </button>
          <div id="account-dropdown" class="menu hidden">
            <a href="owner-activities.html" data-testid="menu-my-activities" data-i18n="nav.myActivities">My Activities</a>
            <a href="admin-dashboard.html" id="menu-admin" class="hidden" data-testid="menu-admin" data-i18n="nav.admin">Admin Panel</a>
            <a href="#" id="btn-logout" data-testid="logout" data-i18n="nav.logout">Logout</a>
          </div>
        </div>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="directory.html" class="mobile-link">Directory</a>
      <a href="events.html" class="mobile-link">Events</a>
      <a href="bulletin.html" class="mobile-link">Bulletin</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="contact.html" class="mobile-link">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        My Business
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        My Activities
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        Admin Panel
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        Login
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        Sign Up & Get Listed
      </a>
    </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h1>My Events</h1>
      <p>Create and manage events for your business. Share events, announcements, and opportunities with the community.</p>
    </div>
  </section>

  <!-- Activities Dashboard -->
  <section class="form-section">
    <div class="form-wrapper">

      <div id="activity-creator">
        <div class="form-section-group">
          <h3><i class="fas fa-plus"></i> Create New Event</h3>
          <form id="activity-form" class="contact-form">
            <div class="form-group">
              <label for="activity-title">Title *</label>
              <input type="text" id="activity-title" name="title" class="form-input" required placeholder="Event title">
            </div>

            <div class="form-group">
              <label for="activity-description">Description</label>
              <textarea id="activity-description" name="description" class="form-input" rows="4" placeholder="Describe your activity..."></textarea>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="activity-starts">Starts At</label>
                <input type="datetime-local" id="activity-starts" name="starts_at" class="form-input">
              </div>
              
              <div class="form-group">
                <label for="activity-ends">Ends At</label>
                <input type="datetime-local" id="activity-ends" name="ends_at" class="form-input">
              </div>
            </div>

            <button type="submit" class="submit-btn">
              <i class="fas fa-plus"></i> Create Event
            </button>
          </form>
        </div>
      </div>

      <!-- Bulletin Creation Section -->
      <div id="bulletin-creator">
        <div class="form-section-group">
          <h3><i class="fas fa-bullhorn"></i> Create Bulletin</h3>
          <form id="bulletin-form" class="contact-form">
            <div class="form-group">
              <label for="bulletin-title">Title *</label>
              <input type="text" id="bulletin-title" name="title" class="form-input" required placeholder="Bulletin title">
            </div>

            <div class="form-group">
              <label for="bulletin-description">Description</label>
              <textarea id="bulletin-description" name="description" class="form-input" rows="4" placeholder="Describe your bulletin..."></textarea>
            </div>

            <div class="form-group">
              <label for="bulletin-type">Type</label>
              <select id="bulletin-type" name="type" class="form-input">
                <option value="">Select type...</option>
                <option value="announcement">Announcement</option>
                <option value="job">Job Posting</option>
                <option value="training">Training Opportunity</option>
                <option value="funding">Funding Information</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="form-group">
              <label for="bulletin-location">Location</label>
              <input type="text" id="bulletin-location" name="location" class="form-input" placeholder="Location (optional)">
            </div>

            <div class="form-group">
              <label for="bulletin-deadline">Deadline</label>
              <input type="date" id="bulletin-deadline" name="deadline" class="form-input">
            </div>

            <button type="submit" class="submit-btn">
              <i class="fas fa-plus"></i> Create Bulletin
            </button>
          </form>
        </div>
      </div>

      <!-- Activities List -->
      <div id="activities-list" class="activities-list"></div>

      <!-- Bulletins List -->
      <div id="bulletins-list" class="bulletins-list"></div>

    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3>Chamber122</h3>
        <p>Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3>Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html">Home</a></li>
            <li><a href="directory.html">Directory</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="bulletin.html">Bulletin</a></li>
            <li><a href="get-listed.html">Get Listed</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3>Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | Empowering Kuwait's MSMEs</p>
    </div>
  </footer>
 
  <script src="js/main.js?v=7"></script>
  <script type="module" src="./js/i18n.js"></script>
  <!-- Import authentication scripts -->
  <script type="module" src="js/modal-login-required.js"></script>
  <script type="module" src="js/guest.js"></script>
  <script type="module">
    import { initNavAuthState } from '/js/nav-auth-state.js';
    initNavAuthState();
  </script>
  
  <!-- Auth Guard -->
  <script type="module">
    import { requireAuth } from '/shared/auth-guard.js';
    const user = await requireAuth(); // redirects if not logged in
  </script>
  
  <!-- Activities Page Script -->
  <script type="module" src="js/account-completeness.js"></script>
  <script type="module" src="js/owner-activities-new.js"></script>
  
  <link rel="stylesheet" href="css/modal.css">
  <link rel="stylesheet" href="css/header.css?v=1">
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Bulletins | Chamber122</title>
  <meta name="description" content="Manage your bulletin posts and announcements.">
  <script>
    // DEV: inject from .env or hardcode for local only
    window.SUPABASE_URL = 'https://gidbvemmqffogakcepka.supabase.co';
    window.SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w';
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
  <link rel="stylesheet" href="css/style.css?v=19">
  <link rel="stylesheet" href="css/header.css?v=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="/bulletin/bulletin.css" />
</head>
<body>
  <!-- Global Header -->
  <div id="site-header"></div>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">
      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <div id="account-menu" class="relative">
          <button id="account-btn" class="btn btn-outline flex items-center gap-2">
            <span id="account-name" data-i18n="nav.account">Account</span>
            <svg class="h-4 w-4 opacity-70" viewBox="0 0 20 20"><path d="M5 7l5 6 5-6"/></svg>
          </button>
          <div id="account-dropdown" class="menu hidden">
            <a href="owner-activities.html" data-testid="menu-my-activities" data-i18n="nav.myActivities">My Activities</a>
            <a href="admin-dashboard.html" id="menu-admin" class="hidden" data-testid="menu-admin" data-i18n="nav.admin">Admin Panel</a>
            <a href="#" id="btn-logout" data-testid="logout" data-i18n="nav.logout">Logout</a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Page Header -->
  <section class="page-header">
    <div class="container">
      <h1>My Bulletins</h1>
      <p>Manage your bulletin posts and announcements</p>
    </div>
  </section>

  <!-- Bulletin Management -->
  <section class="bulletin-management">
    <div class="container">
      <div class="bulletin-actions">
        <button id="createBulletinBtn" class="btn btn-primary">
          <i class="fas fa-plus"></i> Create New Bulletin
        </button>
      </div>
      
      <div id="myBulletinsList" class="bulletin-list-container">
        <!-- User's bulletins will be loaded here -->
      </div>
    </div>
  </section>

  <!-- Bulletin Modal -->
  <div id="bulletinModal" hidden></div>

  <!-- Scripts -->
  <script src="js/main.js?v=7"></script>
  
  <script type="module">
    import { supabase } from '/js/supabase-client.js';
    
    let currentUser = null;
    
    // Initialize page
    document.addEventListener('DOMContentLoaded', async () => {
      await initializePage();
    });
    
    async function initializePage() {
      // Get current user
      const { data: { user } } = await supabase.auth.getUser();
      currentUser = user;
      
      if (!user) {
        window.location.href = '/auth.html#login';
        return;
      }
      
      // Load user's bulletins
      await loadMyBulletins();
      
      // Setup create button
      const createBtn = document.getElementById('createBulletinBtn');
      if (createBtn) {
        createBtn.addEventListener('click', () => {
          // Redirect to bulletin page with FAB
          window.location.href = '/bulletin.html';
        });
      }
    }
    
    async function loadMyBulletins() {
      if (!currentUser) return;
      
      try {
        const { data, error } = await supabase
          .from('bulletins')
          .select('*')
          .eq('owner_user_id', currentUser.id)
          .order('created_at', { ascending: false });
        
        if (error) throw error;
        
        renderMyBulletins(data || []);
      } catch (error) {
        console.error('Error loading bulletins:', error);
      }
    }
    
    function renderMyBulletins(bulletins) {
      const container = document.getElementById('myBulletinsList');
      if (!container) return;
      
      if (bulletins.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: 40px; color: #666;">
            <i class="fas fa-bullhorn" style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
            <h3 style="color: #aaa; margin: 0 0 8px 0;">No bulletins yet</h3>
            <p style="margin: 0; font-size: 14px;">Create your first bulletin to share with the community!</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = bulletins.map(bulletin => createMyBulletinCard(bulletin)).join('');
    }
    
    function createMyBulletinCard(bulletin) {
      const typeLabels = {
        announcement: 'Announcement',
        job: 'Job',
        training: 'Training',
        funding: 'Funding'
      };
      
      const statusColors = {
        draft: '#f59e0b',
        published: '#10b981',
        archived: '#6b7280'
      };
      
      return `
        <div class="bulletin-card">
          <div class="bulletin-header">
            <div>
              <h3 class="bulletin-title">${escapeHtml(bulletin.title)}</h3>
              <div style="display: flex; gap: 8px; margin-top: 8px;">
                <span class="type-pill type-${bulletin.type}">
                  ${typeLabels[bulletin.type] || 'Announcement'}
                </span>
                <span style="background: ${statusColors[bulletin.status]}; color: white; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 500;">
                  ${bulletin.status.charAt(0).toUpperCase() + bulletin.status.slice(1)}
                </span>
              </div>
            </div>
          </div>
          
          <p class="bulletin-description">${escapeHtml(bulletin.description.substring(0, 200))}${bulletin.description.length > 200 ? '...' : ''}</p>
          
          <div class="bulletin-meta">
            ${bulletin.location ? `<span><i class="fas fa-map-marker-alt"></i> ${escapeHtml(bulletin.location)}</span>` : ''}
            ${bulletin.deadline ? `<span><i class="fas fa-calendar"></i> Deadline: ${formatDate(bulletin.deadline)}</span>` : ''}
            <span><i class="fas fa-clock"></i> ${formatDate(bulletin.created_at)}</span>
          </div>
          
          <div style="margin-top: 16px; display: flex; gap: 8px;">
            <button class="btn btn-secondary" onclick="editBulletin('${bulletin.id}')">
              <i class="fas fa-edit"></i> Edit
            </button>
            <button class="btn btn-danger" onclick="deleteBulletin('${bulletin.id}')">
              <i class="fas fa-trash"></i> Delete
            </button>
          </div>
        </div>
      `;
    }
    
    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('en-GB', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric'
      });
    }
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
    
    // Global functions
    window.editBulletin = (id) => {
      // For now, redirect to bulletin page
      window.location.href = '/bulletin.html';
    };
    
    window.deleteBulletin = async (id) => {
      if (!confirm('Are you sure you want to delete this bulletin?')) return;
      
      try {
        const { error } = await supabase
          .from('bulletins')
          .delete()
          .eq('id', id);
        
        if (error) throw error;
        
        await loadMyBulletins();
        alert('Bulletin deleted successfully');
      } catch (error) {
        console.error('Error deleting bulletin:', error);
        alert('Failed to delete bulletin');
      }
    };
  </script>
  
  <!-- Initialize authentication state -->
  <script type="module">
    import { initNavAuthState } from '/js/nav-auth-state.js';
    initNavAuthState();
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <link rel="stylesheet" href="/css/header.css?v=1">
  <script type="module" src="/js/supabase-client.js?v=20"></script>
  <script type="module" src="/js/header-auth-slot.js?v=7"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>My Business | Chamber122</title>
  <meta name="description" content="Manage your business listing on Chamber122. Update information, upload new logos, and track your listing status.">
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=16">
  <link rel="stylesheet" href="css/header.css?v=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Global Header -->
  <div id="site-header"></div>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">

      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn">EN</button> |
          <button data-lang="ar" class="lang-btn">AR</button>
        </span>
        <!-- Auth slot for session-aware header -->
        <span id="auth-slot">
          <a class="btn" href="/auth.html">Login</a>
          <a class="btn primary" href="/auth.html#signup">Sign Up &amp; Get Listed</a>
        </span>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="directory.html" class="mobile-link">Directory</a>
      <a href="events.html" class="mobile-link">Events</a>
      <a href="bulletin.html" class="mobile-link">Bulletin</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="contact.html" class="mobile-link">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        My Business
      </a>
      <a href="owner-activities.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        My Activities
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        Admin Panel
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        Login
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        Sign Up & Get Listed
      </a>
    </div>
    </div>
  </nav>

  <!-- Owner Dashboard -->
  <section class="form-section">
    <div class="form-wrapper">
      <div class="form-header">
        <h1>My Business</h1>
        <p>Manage your business listing and keep your information up to date.</p>
      </div>

      <div id="business-list">
        <!-- Business listings will be populated by JavaScript -->
      </div>

      <div id="no-businesses" style="display: none;">
        <div class="form-note">
          <i class="fas fa-info-circle"></i>
          <div>
            <strong>Complete Your Business Profile</strong><br>
            Fill out your business information to get listed in our directory and connect with customers.
          </div>
        </div>

        <!-- Business Profile Completion Form -->
        <form id="msme-form" action="#" method="post" enctype="multipart/form-data">
          <!-- Business Information -->
          <div class="form-section-group">
            <h3><i class="fas fa-building"></i> Business Information</h3>
            
            <div class="form-group">
              <label for="businessName">Business Name *</label>
              <input type="text" id="businessName" name="businessName" class="form-input" required placeholder="Enter your business name">
            </div>

            <div class="form-group">
              <label for="ownerName">Owner's Full Name *</label>
              <input type="text" id="ownerName" name="ownerName" class="form-input" required placeholder="Enter owner's full name">
            </div>

            <div class="form-group">
              <label for="email">Email Address *</label>
              <input type="email" id="email" name="email" class="form-input" required placeholder="your@email.com">
            </div>

            <div class="form-group">
              <label for="phone">Phone Number *</label>
              <input type="tel" id="phone" name="phone" class="form-input" required placeholder="+965-12345678">
            </div>
          </div>

          <!-- Business Details -->
          <div class="form-section-group">
            <h3><i class="fas fa-info-circle"></i> Business Details</h3>
            
            <div class="form-group">
              <label for="category">Business Category *</label>
              <select id="category" name="category" class="form-input" required>
                <option value="">Select a category...</option>
                <option value="food">Food & Beverage</option>
                <option value="fashion">Fashion & Beauty</option>
                <option value="technology">Technology</option>
                <option value="healthcare">Healthcare</option>
                <option value="education">Education</option>
                <option value="retail">Retail</option>
                <option value="services">Professional Services</option>
                <option value="manufacturing">Manufacturing</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="form-group">
              <label for="city">City *</label>
              <select id="city" name="city" class="form-input" required>
                <option value="">Select your city...</option>
                <option value="kuwait-city">Kuwait City</option>
                <option value="hawally">Hawally</option>
                <option value="farwaniya">Farwaniya</option>
                <option value="ahmadi">Ahmadi</option>
                <option value="jahra">Jahra</option>
                <option value="mubarak-al-kabeer">Mubarak Al-Kabeer</option>
              </select>
            </div>

            <div class="form-group">
              <label for="country">Country</label>
              <input type="text" id="country" name="country" class="form-input" value="Kuwait" readonly>
            </div>

            <div class="form-group">
              <label for="description">Business Description *</label>
              <textarea id="description" name="description" class="form-input" rows="4" required placeholder="Tell us about your business, what you offer, and what makes you unique..."></textarea>
            </div>
          </div>

          <!-- Story Section -->
          <div class="form-section-group">
            <h3><i class="fas fa-heart"></i> Your Story</h3>
            
            <div class="form-group">
              <label for="story">Why Did You Start This Business? *</label>
              <textarea id="story" name="story" class="form-input" rows="4" required placeholder="Share your journey, inspiration, and what drives you..."></textarea>
              <p class="field-note">This helps customers connect with your brand and understand your mission.</p>
            </div>
          </div>

          <!-- Media & Links -->
          <div class="form-section-group">
            <h3><i class="fas fa-link"></i> Media & Links</h3>
            
            <div class="form-group">
              <label for="logo">Business Logo</label>
              <input type="file" id="logo" name="logo" class="form-input" accept="image/*">
              <p class="field-note">Upload your business logo (JPG, PNG, max 2MB)</p>
            </div>

            <div class="form-group">
              <label for="photos">Business Photos (Optional)</label>
              <input type="file" id="photos" name="photos" class="form-input" multiple accept="image/*">
              <p class="field-note">Add up to 5 photos of your business, products, or services</p>
            </div>

            <div class="form-group">
              <label for="website">Website (Optional)</label>
              <input type="url" id="website" name="website" class="form-input" placeholder="https://yourwebsite.com">
            </div>

            <div class="form-group">
              <label for="instagram">Instagram Handle (Optional)</label>
              <input type="text" id="instagram" name="instagram" class="form-input" placeholder="@yourbusiness">
            </div>
          </div>

          <!-- Submission -->
          <div class="form-section-group">
            <p id="form-status"></p>
            
            <div class="form-note">
              <i class="fas fa-info-circle"></i>
              <div>
                <strong>What happens next?</strong><br>
                Once submitted, your listing will be reviewed by our team within 2-3 business days. 
                We'll notify you via email once it's live on our directory.
              </div>
            </div>

            <button type="submit" class="submit-btn">
              <i class="fas fa-paper-plane"></i> Complete Profile & Submit Listing
            </button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3>Chamber122</h3>
        <p>Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3>Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html">Home</a></li>
            <li><a href="directory.html">Directory</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="bulletin.html">Bulletin</a></li>
            <li><a href="get-listed.html">Get Listed</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3>Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | Empowering Kuwait's MSMEs</p>
    </div>
  </footer>

  <script src="js/main.js?v=7"></script>
  <script type="module" src="./js/i18n.js"></script>
  <script type="module" src="js/config.js"></script>
  <script type="module" src="js/supabase-client.js"></script>
  <script type="module" src="js/auth-state-manager.js"></script>
  <script type="module" src="js/compliance-banner.js"></script>
  <script type="module" src="js/notification-system.js"></script>
  <script type="module" src="js/owner.js"></script>
  
  <!-- Auth Guard -->
  <script type="module">
    import { requireAuth } from '/shared/auth-guard.js';
    const user = await requireAuth(); // redirects if not logged in
  </script>

  <!-- Profile Completion Form Handler -->
  <script type="module">
    import { supabase } from '/js/supabase-client.js';
    
    // Show the form when no businesses are found
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) return;

        // Check if user has any businesses
        const { data: businesses, error } = await supabase
          .from('businesses')
          .select('*')
          .eq('owner_user_id', user.id);

        if (error) {
          console.error('Error fetching businesses:', error);
          return;
        }

        // If no businesses found, show the form
        if (!businesses || businesses.length === 0) {
          document.getElementById('no-businesses').style.display = 'block';
        }
      } catch (error) {
        console.error('Error checking businesses:', error);
      }
    });

    // Handle form submission
    document.getElementById('msme-form')?.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const submitBtn = e.target.querySelector('button[type="submit"]');
      const statusEl = document.getElementById('form-status');
      
      // Disable submit button
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
      
      try {
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) {
          throw new Error('User not authenticated');
        }

        // Get form data
        const formData = new FormData(e.target);
        const businessData = {
          owner_user_id: user.id,
          business_name: formData.get('businessName'),
          owner_name: formData.get('ownerName'),
          email: formData.get('email'),
          phone: formData.get('phone'),
          category: formData.get('category'),
          city: formData.get('city'),
          country: formData.get('country'),
          description: formData.get('description'),
          story: formData.get('story'),
          website: formData.get('website') || null,
          instagram: formData.get('instagram') || null,
          status: 'pending' // Will be reviewed by admin
        };

        // Insert business record
        const { data: business, error: businessError } = await supabase
          .from('businesses')
          .insert(businessData)
          .select()
          .single();

        if (businessError) {
          throw businessError;
        }

        // Handle file uploads if any
        const logoFile = formData.get('logo');
        if (logoFile && logoFile.size > 0) {
          const logoExt = logoFile.name.split('.').pop();
          const logoPath = `businesses/${user.id}/${business.id}/logo.${logoExt}`;
          
          const { error: uploadError } = await supabase.storage
            .from('business-assets')
            .upload(logoPath, logoFile);

          if (!uploadError) {
            const { data: logoUrl } = supabase.storage
              .from('business-assets')
              .getPublicUrl(logoPath);
            
            await supabase
              .from('businesses')
              .update({ logo_url: logoUrl.publicUrl })
              .eq('id', business.id);
          }
        }

        // Success message
        statusEl.innerHTML = '<div style="color: green; padding: 10px; background: #d4edda; border: 1px solid #c3e6cb; border-radius: 4px; margin: 10px 0;"><i class="fas fa-check-circle"></i> Profile submitted successfully! You will be notified once it\'s approved.</div>';
        
        // Hide the form and show success
        e.target.style.display = 'none';
        
        // Refresh the page after 3 seconds
        setTimeout(() => {
          location.reload();
        }, 3000);

      } catch (error) {
        console.error('Form submission error:', error);
        statusEl.innerHTML = `<div style="color: red; padding: 10px; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 4px; margin: 10px 0;"><i class="fas fa-exclamation-circle"></i> Error: ${error.message}</div>`;
      } finally {
        // Re-enable submit button
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Complete Profile & Submit Listing';
      }
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reset Password | Chamber122</title>
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=16">
  <link rel="stylesheet" href="css/auth.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="css/header.css?v=1">
</head>
<body>
  <div id="site-header"></div>
  <div class="auth-container">
    <div class="auth-card">
      <div class="auth-form">
        <h2 class="form-title">Reset Your Password</h2>
        <p class="form-subtitle">Enter your new password below</p>
        
        <form id="resetForm">
          <div class="form-group">
            <label for="newPassword" class="form-label">New Password</label>
            <div class="password-field">
              <input type="password" id="newPassword" class="form-input" placeholder="Enter new password" required>
              <button type="button" class="password-toggle" onclick="togglePassword('newPassword')">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          
          <div class="form-group">
            <label for="confirmPassword" class="form-label">Confirm New Password</label>
            <div class="password-field">
              <input type="password" id="confirmPassword" class="form-input" placeholder="Confirm new password" required>
              <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword')">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          
          <button type="submit" id="resetSubmit" class="btn btn-primary">Update Password</button>
        </form>
        
        <div class="form-footer">
          <a href="auth.html" class="back-link">
            <i class="fas fa-arrow-left"></i>
            Back to Login
          </a>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="js/supabase-client.js"></script>
  <script type="module" src="js/password-reset.js"></script>
  <script type="module">
    import { updatePassword } from '/js/password-reset.js';
    
    document.getElementById('resetForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const newPassword = document.getElementById('newPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      if (newPassword !== confirmPassword) {
        alert('Passwords do not match');
        return;
      }
      
      if (newPassword.length < 6) {
        alert('Password must be at least 6 characters');
        return;
      }
      
      const btn = document.getElementById('resetSubmit');
      const originalText = btn.innerHTML;
      btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Updating...';
      btn.disabled = true;
      
      try {
        await updatePassword(newPassword);
        alert('Password updated successfully! You can now log in with your new password.');
        window.location.href = '/auth.html';
      } catch (error) {
        alert('Failed to update password: ' + error.message);
      } finally {
        btn.innerHTML = originalText;
        btn.disabled = false;
      }
    });
  </script>
  
  <script>
    function togglePassword(fieldId) {
      const field = document.getElementById(fieldId);
      const toggle = field.parentNode.querySelector('.password-toggle i');
      
      if (field.type === 'password') {
        field.type = 'text';
        toggle.classList.remove('fa-eye');
        toggle.classList.add('fa-eye-slash');
      } else {
        field.type = 'password';
        toggle.classList.remove('fa-eye-slash');
        toggle.classList.add('fa-eye');
      }
    }
  </script>
</body>
</html>






<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Storage Policies - Chamber122</title>
  <link rel="stylesheet" href="css/header.css?v=1">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .container {
            background: #2a2a2a;
            padding: 30px;
            border-radius: 10px;
            border: 1px solid #444;
        }
        h1 {
            color: #f2c64b;
            text-align: center;
        }
        .step {
            background: #333;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #f2c64b;
        }
        .step h3 {
            color: #f2c64b;
            margin-top: 0;
        }
        .code-block {
            background: #000;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .warning {
            background: #4a1a1a;
            border: 1px solid #ff6b6b;
            color: #ff6b6b;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .success {
            background: #1a4a1a;
            border: 1px solid #4caf50;
            color: #4caf50;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .button {
            background: #f2c64b;
            color: #000;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 5px;
        }
        .button:hover {
            background: #e6b800;
        }
    </style>
</head>
<body>
  <div id="site-header"></div>
    <div class="container">
        <h1>🔧 Storage Policies Setup</h1>
        
        <div class="warning">
            <strong>⚠️ IMPORTANT:</strong> The signup form is currently failing because the storage bucket doesn't have the proper RLS policies. Follow these steps to fix it.
        </div>

        <div class="step">
            <h3>Step 1: Go to Supabase Dashboard</h3>
            <p>Open your Supabase project dashboard:</p>
            <div class="code-block">
                <a href="https://supabase.com/dashboard/project/gidbvemmqffogakcepka" target="_blank" style="color: #f2c64b;">
                    https://supabase.com/dashboard/project/gidbvemmqffogakcepka
                </a>
            </div>
        </div>

        <div class="step">
            <h3>Step 2: Navigate to Storage</h3>
            <p>In the left sidebar, click on <strong>Storage</strong></p>
        </div>

        <div class="step">
            <h3>Step 3: Create/Configure business-files Bucket</h3>
            <p>If the bucket doesn't exist, create it with these settings:</p>
            <ul>
                <li><strong>Name:</strong> business-files</li>
                <li><strong>Public:</strong> No (Private bucket)</li>
                <li><strong>File size limit:</strong> 25MB</li>
                <li><strong>Allowed MIME types:</strong> application/pdf, image/jpeg, image/jpg, image/png, image/gif, image/webp</li>
            </ul>
        </div>

        <div class="step">
            <h3>Step 4: Set Up RLS Policies</h3>
            <p>Click on the <strong>Policies</strong> tab in the Storage section, then create these policies:</p>
            
            <h4>Policy 1: Upload to own folder</h4>
            <div class="code-block">
                Name: Users can upload to their own folder<br>
                Target: storage.objects<br>
                Operation: INSERT<br>
                Definition: bucket_id = 'business-files' AND auth.uid()::text = (storage.foldername(name))[1]
            </div>

            <h4>Policy 2: Upload to temp folder</h4>
            <div class="code-block">
                Name: Users can upload to temp folder<br>
                Target: storage.objects<br>
                Operation: INSERT<br>
                Definition: bucket_id = 'business-files' AND (storage.foldername(name))[1] = 'temp'
            </div>

            <h4>Policy 3: View files</h4>
            <div class="code-block">
                Name: Users can view their own files<br>
                Target: storage.objects<br>
                Operation: SELECT<br>
                Definition: bucket_id = 'business-files' AND (auth.uid()::text = (storage.foldername(name))[1] OR (storage.foldername(name))[1] = 'temp')
            </div>

            <h4>Policy 4: Update files</h4>
            <div class="code-block">
                Name: Users can update their own files<br>
                Target: storage.objects<br>
                Operation: UPDATE<br>
                Definition: bucket_id = 'business-files' AND (auth.uid()::text = (storage.foldername(name))[1] OR (storage.foldername(name))[1] = 'temp')
            </div>

            <h4>Policy 5: Delete files</h4>
            <div class="code-block">
                Name: Users can delete their own files<br>
                Target: storage.objects<br>
                Operation: DELETE<br>
                Definition: bucket_id = 'business-files' AND (auth.uid()::text = (storage.foldername(name))[1] OR (storage.foldername(name))[1] = 'temp')
            </div>
        </div>

        <div class="step">
            <h3>Step 5: Test the Fix</h3>
            <p>After setting up the policies, test the signup form:</p>
            <button class="button" onclick="window.open('auth.html#signup', '_blank')">Test Signup Form</button>
        </div>

        <div class="success">
            <strong>✅ Expected Result:</strong> After setting up these policies, the signup form should work without RLS errors, and file uploads should succeed.
        </div>

        <div class="step">
            <h3>Alternative: Quick Fix (Temporary)</h3>
            <p>If you want to test immediately without setting up policies, you can temporarily make the bucket public:</p>
            <ol>
                <li>Go to Storage → Settings for business-files bucket</li>
                <li>Toggle "Public bucket" to ON</li>
                <li>Test the signup form</li>
                <li>Remember to set it back to private and add the RLS policies for security</li>
            </ol>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Button Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
    </style>
</head>
<body>
    <h1>🔧 Simple Button Test</h1>
    
    <div>
        <h2>Test Buttons</h2>
        <button id="test-btn-1" type="button">Test Button 1</button>
        <button id="test-btn-2" type="button">Test Button 2</button>
        <button id="signup-next-1" type="button">Next Button (like auth.html)</button>
    </div>

    <div id="output"></div>

    <script>
        console.log("[Test] Page loaded");
        
        // Test 1: Direct event listener
        document.getElementById('test-btn-1').addEventListener('click', function() {
            console.log("[Test] Button 1 clicked");
            document.getElementById('output').innerHTML += '<p class="success">✅ Button 1 clicked</p>';
        });
        
        // Test 2: Event delegation
        document.addEventListener('click', function(e) {
            if (e.target.id === 'test-btn-2') {
                console.log("[Test] Button 2 clicked via delegation");
                document.getElementById('output').innerHTML += '<p class="info">ℹ️ Button 2 clicked via delegation</p>';
            }
        });
        
        // Test 3: Multiple handlers on same button
        const nextBtn = document.getElementById('signup-next-1');
        
        nextBtn.addEventListener('click', function(e) {
            e.preventDefault();
            console.log("[Test] Next button - Handler 1");
            document.getElementById('output').innerHTML += '<p class="success">✅ Next button - Handler 1</p>';
        });
        
        nextBtn.addEventListener('click', function(e) {
            e.preventDefault();
            console.log("[Test] Next button - Handler 2");
            document.getElementById('output').innerHTML += '<p class="info">ℹ️ Next button - Handler 2</p>';
        });
        
        // Test 4: Check button properties
        console.log("[Test] Next button properties:", {
            id: nextBtn.id,
            type: nextBtn.type,
            disabled: nextBtn.disabled,
            onclick: nextBtn.onclick,
            style: nextBtn.style.cssText
        });
        
        // Test 5: Simulate click programmatically
        setTimeout(() => {
            console.log("[Test] Simulating click on next button");
            nextBtn.click();
        }, 2000);
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activities Ownership Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        pre { background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; }
        .warning { color: #f59e0b; }
    </style>
</head>
<body>
    <h1>🔐 Activities Ownership Test</h1>
    
    <div class="test-section">
        <h2>1. Test Activities Query (Current User)</h2>
        <p>Verify that activities can be queried by created_by for the current user</p>
        <button onclick="testActivitiesQuery()">Test Activities Query</button>
        <div id="query-result"></div>
    </div>

    <div class="test-section">
        <h2>2. Test Activities Insert</h2>
        <p>Verify that new activities are automatically assigned created_by</p>
        <button onclick="testActivitiesInsert()">Test Activities Insert</button>
        <div id="insert-result"></div>
    </div>

    <div class="test-section">
        <h2>3. Test RLS Policies</h2>
        <p>Verify that users can only see their own activities</p>
        <button onclick="testRLSPolicies()">Test RLS Policies</button>
        <div id="rls-result"></div>
    </div>

    <div class="test-section">
        <h2>4. Test Admin Access</h2>
        <p>Verify that admins can see all activities</p>
        <button onclick="testAdminAccess()">Test Admin Access</button>
        <div id="admin-result"></div>
    </div>

    <script type="module">
        import { supabase } from './js/supabase-client.js';

        // Test 1: Activities Query
        window.testActivitiesQuery = async () => {
            const resultDiv = document.getElementById('query-result');
            resultDiv.innerHTML = '<p class="info">Testing activities query...</p>';
            
            try {
                const { data: { user } } = await supabase.auth.getUser();
                
                if (!user) {
                    resultDiv.innerHTML = '<p class="warning">⚠️ No user logged in. Please log in first.</p>';
                    return;
                }

                const { data, error } = await supabase
                    .from('activities')
                    .select('id, title, created_at, created_by, business_id')
                    .eq('created_by', user.id)
                    .order('created_at', { ascending: false })
                    .limit(5);

                if (error) {
                    resultDiv.innerHTML = `
                        <p class="error">❌ Error querying activities:</p>
                        <pre>${error.message}</pre>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <p class="success">✅ Activities query successful</p>
                        <p class="info">Found ${data.length} activities for user ${user.id}</p>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error in activities query test:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 2: Activities Insert
        window.testActivitiesInsert = async () => {
            const resultDiv = document.getElementById('insert-result');
            resultDiv.innerHTML = '<p class="info">Testing activities insert...</p>';
            
            try {
                const { data: { user } } = await supabase.auth.getUser();
                
                if (!user) {
                    resultDiv.innerHTML = '<p class="warning">⚠️ No user logged in. Please log in first.</p>';
                    return;
                }

                // Get user's business ID
                const { data: business } = await supabase
                    .from('businesses')
                    .select('id')
                    .eq('owner_id', user.id)
                    .limit(1)
                    .single();

                if (!business) {
                    resultDiv.innerHTML = '<p class="warning">⚠️ No business found for user. Please create a business first.</p>';
                    return;
                }

                const testActivity = {
                    business_id: business.id,
                    title: `Test Activity ${Date.now()}`,
                    content: 'This is a test activity created by the ownership test.',
                    status: 'draft'
                };

                const { data, error } = await supabase
                    .from('activities')
                    .insert([testActivity])
                    .select('id, title, created_by, created_at')
                    .single();

                if (error) {
                    resultDiv.innerHTML = `
                        <p class="error">❌ Error inserting activity:</p>
                        <pre>${error.message}</pre>
                    `;
                } else {
                    const createdByMatches = data.created_by === user.id;
                    resultDiv.innerHTML = `
                        <p class="success">✅ Activity inserted successfully</p>
                        <p class="info">Activity ID: ${data.id}</p>
                        <p class="info">Created by: ${data.created_by}</p>
                        <p class="info">User ID: ${user.id}</p>
                        <p class="${createdByMatches ? 'success' : 'error'}">${createdByMatches ? '✅' : '❌'} created_by matches user ID</p>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error in activities insert test:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 3: RLS Policies
        window.testRLSPolicies = async () => {
            const resultDiv = document.getElementById('rls-result');
            resultDiv.innerHTML = '<p class="info">Testing RLS policies...</p>';
            
            try {
                const { data: { user } } = await supabase.auth.getUser();
                
                if (!user) {
                    resultDiv.innerHTML = '<p class="warning">⚠️ No user logged in. Please log in first.</p>';
                    return;
                }

                // Try to query all activities (should only return user's own)
                const { data, error } = await supabase
                    .from('activities')
                    .select('id, title, created_by')
                    .order('created_at', { ascending: false })
                    .limit(10);

                if (error) {
                    resultDiv.innerHTML = `
                        <p class="error">❌ Error testing RLS:</p>
                        <pre>${error.message}</pre>
                    `;
                } else {
                    const allOwnedByUser = data.every(activity => activity.created_by === user.id);
                    resultDiv.innerHTML = `
                        <p class="success">✅ RLS policies working</p>
                        <p class="info">Found ${data.length} activities</p>
                        <p class="info">User ID: ${user.id}</p>
                        <p class="${allOwnedByUser ? 'success' : 'error'}">${allOwnedByUser ? '✅' : '❌'} All activities belong to current user</p>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error in RLS test:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 4: Admin Access
        window.testAdminAccess = async () => {
            const resultDiv = document.getElementById('admin-result');
            resultDiv.innerHTML = '<p class="info">Testing admin access...</p>';
            
            try {
                const { data: { user } } = await supabase.auth.getUser();
                
                if (!user) {
                    resultDiv.innerHTML = '<p class="warning">⚠️ No user logged in. Please log in first.</p>';
                    return;
                }

                // Check if user is admin
                const { data: adminCheck } = await supabase
                    .from('admins')
                    .select('user_id')
                    .eq('user_id', user.id)
                    .single();

                if (!adminCheck) {
                    resultDiv.innerHTML = '<p class="warning">⚠️ User is not an admin. Admin access test skipped.</p>';
                    return;
                }

                // Try to query all activities (admin should see all)
                const { data, error } = await supabase
                    .from('activities')
                    .select('id, title, created_by')
                    .order('created_at', { ascending: false })
                    .limit(10);

                if (error) {
                    resultDiv.innerHTML = `
                        <p class="error">❌ Error testing admin access:</p>
                        <pre>${error.message}</pre>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <p class="success">✅ Admin access working</p>
                        <p class="info">Found ${data.length} activities (admin can see all)</p>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error in admin access test:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Auto-run on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🔐 Activities Ownership Test loaded');
            console.log('Click the buttons above to test activities ownership');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Auth Test</title>
    <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
    <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
</head>
<body>
    <h1>Simple Authentication Test</h1>
    <div id="result"></div>
    
    <script type="module">
        import { supabase } from './js/supabase-client.js';
        
        async function testAuth() {
            const resultDiv = document.getElementById('result');
            
            try {
                console.log('🔍 Testing Supabase connection...');
                
                const { data: { user }, error } = await supabase.auth.getUser();
                
                if (error) {
                    console.error('❌ Auth error:', error);
                    resultDiv.innerHTML = `<p style="color: red;">❌ Auth Error: ${error.message}</p>`;
                    return;
                }
                
                if (!user) {
                    console.log('❌ No user found');
                    resultDiv.innerHTML = '<p style="color: orange;">❌ No user found - not logged in</p>';
                    return;
                }
                
                console.log('✅ User found:', user);
                resultDiv.innerHTML = `
                    <p style="color: green;">✅ User authenticated!</p>
                    <p><strong>Email:</strong> ${user.email}</p>
                    <p><strong>ID:</strong> ${user.id}</p>
                    <p><strong>Created:</strong> ${new Date(user.created_at).toLocaleString()}</p>
                `;
                
                // Test profile fetch
                console.log('🔍 Testing profile fetch...');
                const { data: profile, error: profileError } = await supabase
                    .from('profiles')
                    .select('*')
                    .eq('user_id', user.id)
                    .maybeSingle();
                
                if (profileError) {
                    console.warn('⚠️ Profile error:', profileError);
                    resultDiv.innerHTML += `<p style="color: orange;">⚠️ Profile Error: ${profileError.message}</p>`;
                } else if (profile) {
                    console.log('✅ Profile found:', profile);
                    resultDiv.innerHTML += `
                        <p style="color: green;">✅ Profile found!</p>
                        <p><strong>Role:</strong> ${profile.role || 'null'}</p>
                        <p><strong>Full Name:</strong> ${profile.full_name || 'null'}</p>
                    `;
                } else {
                    console.log('ℹ️ No profile found');
                    resultDiv.innerHTML += '<p style="color: blue;">ℹ️ No profile found - will create default</p>';
                }
                
            } catch (error) {
                console.error('❌ Test error:', error);
                resultDiv.innerHTML = `<p style="color: red;">❌ Test Error: ${error.message}</p>`;
            }
        }
        
        testAuth();
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auth Test | Chamber122</title>
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; max-width: 800px; margin: 0 auto; }
    .test-section { margin: 2rem 0; padding: 1rem; border: 1px solid #ddd; border-radius: 8px; }
    .btn { padding: 0.5rem 1rem; margin: 0.5rem; border: none; border-radius: 4px; cursor: pointer; }
    .btn-primary { background: #3b82f6; color: white; }
    .btn-danger { background: #ef4444; color: white; }
    .status { padding: 1rem; margin: 1rem 0; border-radius: 4px; }
    .success { background: #d1fae5; color: #065f46; }
    .error { background: #fee2e2; color: #991b1b; }
    .info { background: #dbeafe; color: #1e40af; }
  </style>
</head>
<body>
  <h1>Supabase Auth Test</h1>
  
  <div class="test-section">
    <h2>Current Auth State</h2>
    <div id="auth-status" class="status info">Loading...</div>
    <button id="refresh-status" class="btn btn-primary">Refresh Status</button>
  </div>
  
  <div class="test-section">
    <h2>Test Sign Up</h2>
    <form id="test-signup">
      <div style="margin: 1rem 0;">
        <label>Email:</label><br>
        <input type="email" id="signup-email" placeholder="test@example.com" style="width: 300px; padding: 0.5rem;">
      </div>
      <div style="margin: 1rem 0;">
        <label>Password:</label><br>
        <input type="password" id="signup-password" placeholder="password123" style="width: 300px; padding: 0.5rem;">
      </div>
      <button type="submit" class="btn btn-primary">Test Sign Up</button>
    </form>
  </div>
  
  <div class="test-section">
    <h2>Test Sign In</h2>
    <form id="test-signin">
      <div style="margin: 1rem 0;">
        <label>Email:</label><br>
        <input type="email" id="signin-email" placeholder="test@example.com" style="width: 300px; padding: 0.5rem;">
      </div>
      <div style="margin: 1rem 0;">
        <label>Password:</label><br>
        <input type="password" id="signin-password" placeholder="password123" style="width: 300px; padding: 0.5rem;">
      </div>
      <button type="submit" class="btn btn-primary">Test Sign In</button>
    </form>
  </div>
  
  <div class="test-section">
    <h2>Actions</h2>
    <button id="sign-out" class="btn btn-danger">Sign Out</button>
    <button id="test-callback" class="btn btn-primary">Test Callback Page</button>
  </div>
  
  <div class="test-section">
    <h2>Console Test</h2>
    <p>Open browser console and run:</p>
    <code>
      (await supabase.auth.getUser()).data.user?.id
    </code>
  </div>

  <script type="module">
    import { supabase, getCurrentUser } from './src/lib/supabase-client.js';
    import { signupWithEmailPassword, signInWithPassword, signOut } from './src/lib/auth-signup-utils.js';
    
    // Make supabase available globally for console testing
    window.supabase = supabase;
    
    const authStatus = document.getElementById('auth-status');
    const refreshBtn = document.getElementById('refresh-status');
    const signOutBtn = document.getElementById('sign-out');
    const testCallbackBtn = document.getElementById('test-callback');
    
    async function updateAuthStatus() {
      try {
        const user = await getCurrentUser();
        if (user) {
          authStatus.className = 'status success';
          authStatus.innerHTML = `
            <strong>Signed In</strong><br>
            Email: ${user.email}<br>
            ID: ${user.id}<br>
            Created: ${new Date(user.created_at).toLocaleString()}
          `;
        } else {
          authStatus.className = 'status info';
          authStatus.textContent = 'Not signed in';
        }
      } catch (error) {
        authStatus.className = 'status error';
        authStatus.textContent = 'Error: ' + error.message;
      }
    }
    
    // Initial status update
    updateAuthStatus();
    
    // Listen for auth state changes
    supabase.auth.onAuthStateChange((event, session) => {
      console.log('Auth state changed:', event, session?.user?.email);
      updateAuthStatus();
    });
    
    // Event listeners
    refreshBtn.addEventListener('click', updateAuthStatus);
    
    signOutBtn.addEventListener('click', async () => {
      try {
        await signOut();
        updateAuthStatus();
      } catch (error) {
        alert('Sign out error: ' + error.message);
      }
    });
    
    testCallbackBtn.addEventListener('click', () => {
      window.open('/auth-callback.html', '_blank');
    });
    
    // Sign up form
    document.getElementById('test-signup').addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;
      
      try {
        const { requiresConfirm } = await signupWithEmailPassword(email, password);
        if (requiresConfirm) {
          alert('Account created! Check your email for confirmation link.');
        } else {
          alert('Account created and signed in!');
        }
        updateAuthStatus();
      } catch (error) {
        alert('Sign up error: ' + error.message);
      }
    });
    
    // Sign in form
    document.getElementById('test-signin').addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('signin-email').value;
      const password = document.getElementById('signin-password').value;
      
      try {
        await signInWithPassword(email, password);
        alert('Signed in successfully!');
        updateAuthStatus();
      } catch (error) {
        alert('Sign in error: ' + error.message);
      }
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Bulletin Debug</title>
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
</head>
<body>
  <h1>Bulletin Debug Test</h1>
  <button id="testBtn">Test FAB Button Function</button>
  <div id="results"></div>

  <script type="module">
    import { supabase } from '/js/supabase-client.js';
    
    const testBtn = document.getElementById('testBtn');
    const results = document.getElementById('results');
    
    testBtn.addEventListener('click', async () => {
      results.innerHTML = '<p>Testing...</p>';
      
      try {
        // Test 1: Check if user is logged in
        const { data: { user } } = await supabase.auth.getUser();
        results.innerHTML += `<p>User logged in: ${user ? 'Yes' : 'No'}</p>`;
        
        if (user) {
          results.innerHTML += `<p>User email: ${user.email}</p>`;
          
          // Test 2: Check user role
          const { data: profile } = await supabase
            .from('profiles')
            .select('role')
            .eq('user_id', user.id)
            .single();
          
          results.innerHTML += `<p>User role: ${profile?.role || 'No role'}</p>`;
          
          // Test 3: Check if bulletins table exists
          const { data: bulletins, error } = await supabase
            .from('bulletins')
            .select('id')
            .limit(1);
          
          if (error) {
            results.innerHTML += `<p style="color: red;">Bulletins table error: ${error.message}</p>`;
          } else {
            results.innerHTML += `<p style="color: green;">Bulletins table exists, found ${bulletins?.length || 0} records</p>`;
          }
        }
        
        // Test 4: Check if openBulletinForm function exists
        results.innerHTML += `<p>openBulletinForm function: ${typeof window.openBulletinForm}</p>`;
        
      } catch (error) {
        results.innerHTML += `<p style="color: red;">Error: ${error.message}</p>`;
      }
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Debug Test</title>
    <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
    <meta name="supabase-anon" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
    </style>
</head>
<body>
    <h1>🔧 Button Debug Test</h1>
    
    <div class="test-section">
        <h2>Test Buttons</h2>
        <p>Click any of these buttons to test the nuclear click binder:</p>
        
        <button id="signup-next" type="button" data-action="signup-next">Next (ID + data-action)</button>
        <button id="signup-next-1" type="button" data-testid="signup-next-1">Next 1 (ID + testid)</button>
        <button id="signup-next-2" type="button" data-testid="signup-next-2">Next 2 (ID + testid)</button>
        <button id="signup-next-3" type="button" data-testid="signup-next-3">Next 3 (ID + testid)</button>
        
        <div id="test-results"></div>
    </div>

    <div class="test-section">
        <h2>Console Output</h2>
        <p>Check the browser console for detailed logs. You should see:</p>
        <ul>
            <li>✅ [Sanity] inline module loaded</li>
            <li>✅ [Sanity] Next button found: ... (for each button)</li>
            <li>✅ [DBG] Delegated click caught → running __dbgNextClick (when clicking)</li>
            <li>✅ [DBG] Next clicked (global)</li>
        </ul>
    </div>

    <!-- ========== NUCLEAR CLICK BINDER + SANITY TESTER ========== -->
    <script type="module">
        console.log("[Sanity] inline module loaded");

        // 1) Import your modules with RELATIVE paths
        const MODULES = [
            "./js/supabase-client.js",
            "./js/auth-state-manager.js",
            "./js/signup-utils.js",
            "./js/signup-stepper.js",
        ];
        for (const p of MODULES) {
            import(p)
                .then(() => console.log(`[Sanity] Imported OK: ${p}`))
                .catch(err => console.error(`[Sanity] Import FAILED: ${p}`, err));
        }

        // 2) Global debug handler (never removed)
        window.__dbgNextClick = async (ev) => {
            ev?.preventDefault?.();
            console.log("[DBG] Next clicked (global)");
            
            // Show which button was clicked
            const btn = ev.target;
            const resultDiv = document.getElementById('test-results');
            resultDiv.innerHTML = `<p class="success">✅ Button clicked: ${btn.id || btn.textContent.trim()}</p>`;
            
            // handoff to real exported handler if present
            try {
                const m = await import("./js/signup-stepper.js");
                if (typeof m.onNextClick === "function") {
                    console.log("[DBG] Calling onNextClick from signup-stepper.js");
                    return m.onNextClick(ev);
                } else {
                    console.warn("[DBG] onNextClick not exported from signup-stepper.js");
                }
            } catch (e) {
                console.error("[DBG] Failed to import signup-stepper.js for handoff:", e);
            }
        };

        // 3) Overlay detector: outline what sits over the button center
        function inspectOverlay(btn) {
            if (!btn) return;
            const r = btn.getBoundingClientRect();
            const x = r.left + r.width / 2;
            const y = r.top + r.height / 2;
            const el = document.elementFromPoint(x, y);
            if (el && el !== btn && !btn.contains(el)) {
                console.warn("[Overlay] Something is above the button:", el);
                try { el.style.outline = "2px solid red"; } catch {}
                console.warn("[Overlay] Lower its z-index OR set pointer-events:none on that overlay.");
            } else {
                console.log("[Overlay] No blocking element detected.");
            }
        }

        // 4) Event delegation in CAPTURE phase (beats many overlays)
        document.addEventListener("click", (e) => {
            const btn = e.target.closest("#signup-next, #signup-next-1, #signup-next-2, #signup-next-3, [data-action='signup-next'], [data-testid*='signup-next']");
            if (!btn) return;

            // force it to be a pure button
            if (btn.getAttribute("type") !== "button") btn.setAttribute("type", "button");

            inspectOverlay(btn);
            console.log("[DBG] Delegated click caught → running __dbgNextClick", btn);
            window.__dbgNextClick(e);
        }, { capture: true });

        // 5) One-time startup checks
        window.addEventListener("DOMContentLoaded", () => {
            const btns = document.querySelectorAll("#signup-next, #signup-next-1, #signup-next-2, #signup-next-3, [data-action='signup-next'], [data-testid*='signup-next']");
            if (btns.length === 0) {
                console.error("[Sanity] No Next buttons found.");
                // List all buttons to help debug
                const allBtns = document.querySelectorAll("button");
                console.log("[Sanity] All buttons found:", Array.from(allBtns).map(b => ({ id: b.id, class: b.className, text: b.textContent.trim() })));
                return;
            }
            console.log(`[Sanity] Found ${btns.length} Next buttons:`, btns);
            btns.forEach(btn => inspectOverlay(btn));
        }, { once: true });
    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Complete Auth Test</title>
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; max-width: 800px; margin: 0 auto; }
    .test-section { margin: 2rem 0; padding: 1.5rem; border: 1px solid #ddd; border-radius: 8px; }
    .form-group { margin: 1rem 0; }
    .form-group label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
    .form-group input { width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; }
    .btn { padding: 0.75rem 1.5rem; margin: 0.5rem; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
    .btn-primary { background: #3b82f6; color: white; }
    .btn-success { background: #10b981; color: white; }
    .btn-danger { background: #ef4444; color: white; }
    .status { padding: 1rem; margin: 1rem 0; border-radius: 4px; }
    .success { background: #d1fae5; color: #065f46; }
    .error { background: #fee2e2; color: #991b1b; }
    .info { background: #dbeafe; color: #1e40af; }
    .tabs { display: flex; margin-bottom: 1rem; }
    .tab { padding: 0.5rem 1rem; background: #f3f4f6; border: 1px solid #d1d5db; cursor: pointer; }
    .tab.active { background: #3b82f6; color: white; }
    .panel { display: none; }
    .panel.active { display: block; }
  </style>
</head>
<body>
  <h1>Complete Auth Flow Test</h1>
  
  <div class="tabs">
    <div class="tab active" onclick="showPanel('signup')">Sign Up</div>
    <div class="tab" onclick="showPanel('login')">Login</div>
    <div class="tab" onclick="showPanel('status')">Auth Status</div>
  </div>
  
  <!-- Signup Panel -->
  <div id="signup-panel" class="panel active">
    <div class="test-section">
      <h2>Test Sign Up</h2>
      <form id="test-signup">
        <div class="form-group">
          <label>Email:</label>
          <input type="email" id="signup-email" placeholder="test@example.com" required>
        </div>
        <div class="form-group">
          <label>Password:</label>
          <input type="password" id="signup-password" placeholder="password123" required>
        </div>
        <div class="form-group">
          <label>Confirm Password:</label>
          <input type="password" id="signup-confirm-password" placeholder="password123" required>
        </div>
        <button type="submit" class="btn btn-primary">Test Sign Up</button>
      </form>
    </div>
  </div>
  
  <!-- Login Panel -->
  <div id="login-panel" class="panel">
    <div class="test-section">
      <h2>Test Login</h2>
      <form id="test-login">
        <div class="form-group">
          <label>Email:</label>
          <input type="email" id="login-email" placeholder="test@example.com" required>
        </div>
        <div class="form-group">
          <label>Password:</label>
          <input type="password" id="login-password" placeholder="password123" required>
        </div>
        <button type="submit" class="btn btn-success">Test Login</button>
      </form>
    </div>
  </div>
  
  <!-- Status Panel -->
  <div id="status-panel" class="panel">
    <div class="test-section">
      <h2>Current Auth Status</h2>
      <div id="auth-status" class="status info">Loading...</div>
      <button id="refresh-status" class="btn btn-primary">Refresh Status</button>
      <button id="sign-out" class="btn btn-danger">Sign Out</button>
    </div>
  </div>
  
  <div class="test-section">
    <h2>Console Test</h2>
    <p>Open browser console and run:</p>
    <code>
      (await supabase.auth.getUser()).data.user?.id
    </code>
  </div>

  <script type="module">
    import { supabase, getCurrentAccountState } from '/js/supabase-client.js';
    import { signupWithEmailPassword, signInWithPassword } from '/js/auth-signup-utils.js';
    
    // Make supabase available globally for console testing
    window.supabase = supabase;
    
    const authStatus = document.getElementById('auth-status');
    const refreshBtn = document.getElementById('refresh-status');
    const signOutBtn = document.getElementById('sign-out');
    
    async function updateAuthStatus() {
      try {
        const { signedIn, user } = await getCurrentAccountState();
        if (signedIn && user) {
          authStatus.className = 'status success';
          authStatus.innerHTML = `
            <strong>Signed In</strong><br>
            Email: ${user.email}<br>
            ID: ${user.id}<br>
            Created: ${new Date(user.created_at).toLocaleString()}
          `;
        } else {
          authStatus.className = 'status info';
          authStatus.textContent = 'Not signed in';
        }
      } catch (error) {
        authStatus.className = 'status error';
        authStatus.textContent = 'Error: ' + error.message;
      }
    }
    
    // Initial status update
    updateAuthStatus();
    
    // Listen for auth state changes
    supabase.auth.onAuthStateChange((event, session) => {
      console.log('Auth state changed:', event, session?.user?.email);
      updateAuthStatus();
    });
    
    // Event listeners
    refreshBtn.addEventListener('click', updateAuthStatus);
    
    signOutBtn.addEventListener('click', async () => {
      try {
        await supabase.auth.signOut();
        updateAuthStatus();
        alert('Signed out successfully!');
      } catch (error) {
        alert('Sign out error: ' + error.message);
      }
    });
    
    // Sign up form
    document.getElementById('test-signup').addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;
      const confirmPassword = document.getElementById('signup-confirm-password').value;
      
      if (password !== confirmPassword) {
        alert('Passwords do not match');
        return;
      }
      
      const btn = e.target.querySelector('button[type="submit"]');
      const originalText = btn.innerHTML;
      btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Account...';
      btn.disabled = true;
      
      try {
        const { requiresConfirm } = await signupWithEmailPassword(email, password);
        if (requiresConfirm) {
          alert('Account created! Check your email for confirmation link.');
        } else {
          alert('Account created and signed in!');
        }
        updateAuthStatus();
      } catch (error) {
        alert('Sign up error: ' + error.message);
      } finally {
        btn.innerHTML = originalText;
        btn.disabled = false;
      }
    });
    
    // Sign in form
    document.getElementById('test-login').addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      
      const btn = e.target.querySelector('button[type="submit"]');
      const originalText = btn.innerHTML;
      btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Signing In...';
      btn.disabled = true;
      
      try {
        await signInWithPassword(email, password);
        alert('Signed in successfully!');
        updateAuthStatus();
      } catch (error) {
        alert('Sign in error: ' + error.message);
      } finally {
        btn.innerHTML = originalText;
        btn.disabled = false;
      }
    });
    
    // Tab switching
    window.showPanel = function(panelName) {
      // Hide all panels
      document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      
      // Show selected panel
      document.getElementById(panelName + '-panel').classList.add('active');
      event.target.classList.add('active');
    };
  </script>
</body>
</html>







<!DOCTYPE html>
<html>
<head>
  <title>Direct Login Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: #fff; }
    input, button { padding: 10px; margin: 5px; border-radius: 4px; border: 1px solid #555; width: 100%; max-width: 300px; }
    input { background: #333; color: #fff; }
    button { background: #007bff; color: #fff; cursor: pointer; }
    .status { padding: 10px; margin: 10px 0; border-radius: 4px; }
    .error { background: #dc3545; color: white; }
    .success { background: #28a745; color: white; }
  </style>
</head>
<body>
  <h1>🔐 Direct Login Test</h1>
  <p>This tests the Supabase client directly without a server.</p>
  
  <form id="login-form">
    <input id="email" type="email" placeholder="Your email" required>
    <input id="password" type="password" placeholder="Your password" required>
    <button id="login-btn" type="submit">Test Login</button>
  </form>
  
  <div id="status"></div>
  <div id="debug"></div>

  <script>
    // Set up Supabase environment
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  
  <script type="module">
    // Import Supabase client
    const { createClient } = await import('https://esm.sh/@supabase/supabase-js@2.57.4');
    
    // Create client
    const supabase = createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY, {
      auth: {
        autoRefreshToken: true,
        persistSession: true,
        detectSessionInUrl: true
      }
    });
    
    console.log('Supabase client created:', !!supabase);
    document.getElementById('debug').innerHTML = 'Supabase client: ' + (supabase ? '✅ Created' : '❌ Failed');
    
    // Handle login form
    document.getElementById('login-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      document.getElementById('status').innerHTML = '<div class="status">🔄 Testing login...</div>';
      
      try {
        console.log('Attempting login with:', email);
        const { data, error } = await supabase.auth.signInWithPassword({ email, password });
        
        if (error) {
          console.error('Login error:', error);
          document.getElementById('status').innerHTML = `<div class="status error">❌ Login failed: ${error.message}</div>`;
        } else {
          console.log('Login success:', data);
          document.getElementById('status').innerHTML = `<div class="status success">✅ Login successful! User: ${data.user?.email}</div>`;
          
          // Test session persistence
          setTimeout(async () => {
            const { data: sessionData } = await supabase.auth.getSession();
            console.log('Session check:', sessionData);
            document.getElementById('debug').innerHTML += '<br>Session: ' + (sessionData.session ? '✅ Active' : '❌ None');
          }, 1000);
        }
      } catch (err) {
        console.error('Login exception:', err);
        document.getElementById('status').innerHTML = `<div class="status error">❌ Exception: ${err.message}</div>`;
      }
    });
    
    // Check if already logged in
    const { data: sessionData } = await supabase.auth.getSession();
    if (sessionData.session) {
      document.getElementById('status').innerHTML = `<div class="status success">✅ Already logged in as: ${sessionData.session.user.email}</div>`;
    }
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dropdown</title>
    <style>
        body { 
            background: #0b0c12; 
            color: #e9e9f1; 
            font-family: system-ui, sans-serif; 
            margin: 0; 
            padding: 20px;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            border-radius: 12px;
            border: 1px solid #2a2f4a;
            background: #14172a;
            color: #e8e9f3;
            font-weight: 700;
            cursor: pointer;
            text-decoration: none;
        }
        .btn.primary {
            background: #6f75ff;
            border-color: #6f75ff;
            color: #fff;
        }
        .userbox {
            position: relative;
            display: inline-block;
        }
        .dropdown {
            position: absolute;
            right: 0;
            top: calc(100% + 6px);
            display: none;
            background: #101321;
            border: 1px solid #232744;
            border-radius: 12px;
            min-width: 180px;
            z-index: 1000;
            padding: 8px;
        }
        .dropdown.show {
            display: block;
        }
        .dropdown .btn {
            width: 100%;
            margin: 4px 0;
        }
    </style>
    <script>
        window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
        window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
    </script>
    <script type="module" src="/js/supabase-client.js?v=20"></script>
    <script type="module" src="/js/header-auth-slot.js?v=7"></script>
</head>
<body>
    <div class="test-container">
        <h1>Test Avatar Dropdown</h1>
        <p>This page tests the avatar dropdown functionality.</p>
        
        <div style="margin: 20px 0;">
            <span id="auth-slot">
                <!-- Fallback buttons -->
                <a class="btn" href="/auth.html">Login</a>
                <a class="btn primary" href="/auth.html#signup">Sign Up & Get Listed</a>
            </span>
        </div>
        
        <div style="margin: 20px 0;">
            <h3>Manual Test Dropdown:</h3>
            <div class="userbox">
                <button id="test-avatar-btn" class="btn" onclick="toggleDropdown()">
                    👤 Test User
                </button>
                <div id="test-menu" class="dropdown">
                    <a class="btn" href="/dashboard.html">Dashboard</a>
                    <a class="btn" href="/owner.html">My Profile</a>
                    <button class="btn" onclick="alert('Logout clicked')">Log out</button>
                </div>
            </div>
        </div>
        
        <div style="margin: 20px 0;">
            <h3>Debug Info:</h3>
            <div id="debug-info"></div>
        </div>
    </div>

    <script>
        function toggleDropdown() {
            const menu = document.getElementById('test-menu');
            menu.classList.toggle('show');
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            const menu = document.getElementById('test-menu');
            const btn = document.getElementById('test-avatar-btn');
            if (!btn.contains(e.target) && !menu.contains(e.target)) {
                menu.classList.remove('show');
            }
        });
        
        // Debug info
        document.addEventListener('DOMContentLoaded', () => {
            const debugEl = document.getElementById('debug-info');
            debugEl.innerHTML = `
                <p>Supabase URL: ${window.SUPABASE_URL ? '✅ Set' : '❌ Missing'}</p>
                <p>Supabase Key: ${window.SUPABASE_ANON_KEY ? '✅ Set' : '❌ Missing'}</p>
                <p>Auth slot found: ${document.getElementById('auth-slot') ? '✅ Yes' : '❌ No'}</p>
                <p>Header script loaded: ${typeof window._sb !== 'undefined' ? '✅ Yes' : '❌ No'}</p>
            `;
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FAB Debug Test</title>
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
</head>
<body>
  <h1>FAB Button Debug Test</h1>
  <p>Click the red button below to test if it works:</p>
  
  <!-- Red FAB Button -->
  <button id="fabAddBulletin" aria-label="Add bulletin"
    style="position:fixed;right:20px;bottom:20px;width:56px;height:56px;border-radius:50%;
           border:none;background:#e11d48;color:#fff;font-size:28px;line-height:0;
           box-shadow:0 8px 24px rgba(0,0,0,.35);cursor:pointer;z-index:9999;">+</button>

  <div id="debug-info" style="margin: 20px; padding: 20px; background: #f0f0f0; border-radius: 8px;">
    <h3>Debug Information:</h3>
    <div id="results"></div>
  </div>

  <script type="module">
    // Test 1: Check if button exists
    const fab = document.getElementById('fabAddBulletin');
    const results = document.getElementById('results');
    
    results.innerHTML += `<p><strong>1. Button exists:</strong> ${fab ? 'YES ✓' : 'NO ✗'}</p>`;
    
    if (!fab) {
      results.innerHTML += `<p style="color: red;">ERROR: FAB button not found!</p>`;
    } else {
      results.innerHTML += `<p style="color: green;">Button found: ${fab.tagName}</p>`;
    }
    
    // Test 2: Check Supabase import
    try {
      const { supabase } = await import('/js/supabase-client.js');
      results.innerHTML += `<p><strong>2. Supabase import:</strong> SUCCESS ✓</p>`;
      
      // Test 3: Check if user is logged in
      const { data: { user } } = await supabase.auth.getUser();
      results.innerHTML += `<p><strong>3. User logged in:</strong> ${user ? 'YES ✓ (' + user.email + ')' : 'NO ✗'}</p>`;
      
      // Test 4: Add simple click handler
      fab.addEventListener('click', () => {
        alert('FAB button clicked! This proves the button works.');
        results.innerHTML += `<p style="color: green;"><strong>4. Button click:</strong> WORKING ✓</p>`;
      });
      
      results.innerHTML += `<p><strong>4. Click handler added:</strong> SUCCESS ✓</p>`;
      
    } catch (error) {
      results.innerHTML += `<p style="color: red;"><strong>2. Supabase import:</strong> FAILED ✗ - ${error.message}</p>`;
    }
    
    // Test 5: Check for any console errors
    const originalError = console.error;
    console.error = function(...args) {
      results.innerHTML += `<p style="color: red;"><strong>Console Error:</strong> ${args.join(' ')}</p>`;
      originalError.apply(console, args);
    };
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix Verification Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        pre { background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>🔧 Fix Verification Test</h1>
    
    <div class="test-section">
        <h2>1. Import Error Fix</h2>
        <p>Test that getAccountAndCompleteness is now exported from supabase.js</p>
        <button onclick="testImportFix()">Test Import Fix</button>
        <div id="import-result"></div>
    </div>

    <div class="test-section">
        <h2>2. QuerySelector Fix</h2>
        <p>Test that href="#" links no longer cause querySelector errors</p>
        <button onclick="testQuerySelectorFix()">Test QuerySelector Fix</button>
        <div id="query-result"></div>
    </div>

    <div class="test-section">
        <h2>3. Logout Fix</h2>
        <p>Test that logout function works without createClient errors</p>
        <button onclick="testLogoutFix()">Test Logout Fix</button>
        <div id="logout-result"></div>
    </div>

    <div class="test-section">
        <h2>4. Stepper Navigation</h2>
        <p>Test that the stepper navigation works properly</p>
        <button onclick="testStepperFix()">Test Stepper Fix</button>
        <div id="stepper-result"></div>
    </div>

    <script type="module">
        // Test 1: Import Error Fix
        window.testImportFix = async () => {
            const resultDiv = document.getElementById('import-result');
            resultDiv.innerHTML = '<p class="info">Testing import fix...</p>';
            
            try {
                // Try to import the function
                const { getAccountAndCompleteness } = await import('./js/supabase.js');
                
                if (typeof getAccountAndCompleteness === 'function') {
                    resultDiv.innerHTML = '<p class="success">✅ getAccountAndCompleteness is now exported from supabase.js</p>';
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ getAccountAndCompleteness is not a function</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Import error:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 2: QuerySelector Fix
        window.testQuerySelectorFix = () => {
            const resultDiv = document.getElementById('query-result');
            resultDiv.innerHTML = '<p class="info">Testing querySelector fix...</p>';
            
            try {
                // Create a test link with href="#"
                const testLink = document.createElement('a');
                testLink.href = '#';
                testLink.textContent = 'Test Link';
                testLink.style.display = 'none';
                document.body.appendChild(testLink);
                
                // Simulate click
                testLink.click();
                
                // Clean up
                document.body.removeChild(testLink);
                
                resultDiv.innerHTML = '<p class="success">✅ href="#" links no longer cause querySelector errors</p>';
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ QuerySelector error:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 3: Logout Fix
        window.testLogoutFix = async () => {
            const resultDiv = document.getElementById('logout-result');
            resultDiv.innerHTML = '<p class="info">Testing logout fix...</p>';
            
            try {
                // Try to import supabase client
                const { supabase } = await import('./js/supabase-client.js');
                
                if (supabase && typeof supabase.auth.signOut === 'function') {
                    resultDiv.innerHTML = '<p class="success">✅ Logout function should work without createClient errors</p>';
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ Supabase client not properly imported</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Logout error:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 4: Stepper Fix
        window.testStepperFix = () => {
            const resultDiv = document.getElementById('stepper-result');
            resultDiv.innerHTML = '<p class="info">Testing stepper fix...</p>';
            
            // Open auth.html in new tab for testing
            const authUrl = 'auth.html#signup';
            const newWindow = window.open(authUrl, '_blank');
            
            if (newWindow) {
                resultDiv.innerHTML = `
                    <p class="success">✅ Opened auth.html for stepper testing</p>
                    <p class="info">Test the stepper navigation:</p>
                    <ol>
                        <li>Fill in Step 1 (Business Information) and click "Next"</li>
                        <li>Step 2 (Business Details) - optional, click "Next"</li>
                        <li>Step 3 (Documents) - upload files and click "Next"</li>
                        <li>Step 4 (Credentials) - enter email/password and click "Next"</li>
                    </ol>
                    <p class="info">If it doesn't work, try: <code>window.SIGNUP_DEBUG_BYPASS = true</code> in console</p>
                `;
            } else {
                resultDiv.innerHTML = '<p class="error">❌ Could not open auth.html (popup blocked?)</p>';
            }
        };

        // Auto-run on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🔧 Fix Verification Test loaded');
            console.log('Click the buttons above to test each fix');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Elements Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: #fff; }
    .test-section { background: #2a2a2a; padding: 15px; margin: 10px 0; border-radius: 8px; }
    input, button { padding: 10px; margin: 5px; border-radius: 4px; border: 1px solid #555; }
    input { background: #333; color: #fff; }
    button { background: #007bff; color: #fff; cursor: pointer; }
    .found { color: #51cf66; }
    .not-found { color: #ff6b6b; }
  </style>
</head>
<body>
  <h1>Form Elements Test</h1>
  
  <!-- Test form with the same structure as auth.html -->
  <form id="login-form" novalidate>
    <input id="email" name="email" type="email" placeholder="Email" required>
    <input id="password" name="password" type="password" placeholder="Password" required>
    <button id="login-btn" type="submit">Log In</button>
  </form>

  <div class="test-section">
    <h3>Element Detection Test</h3>
    <div id="test-results"></div>
    <button onclick="testElements()">Test Element Detection</button>
  </div>

  <div class="test-section">
    <h3>Form Submit Test</h3>
    <div id="submit-results"></div>
  </div>

  <script>
    function testElements() {
      const results = document.getElementById('test-results');
      results.innerHTML = '';
      
      // Test the same selectors used in auth-login.js
      const form = document.querySelector('#login-form');
      const btn = document.querySelector('#login-btn');
      
      results.innerHTML += `<div>Form: ${form ? '<span class="found">✅ Found</span>' : '<span class="not-found">❌ Not found</span>'}</div>`;
      results.innerHTML += `<div>Button: ${btn ? '<span class="found">✅ Found</span>' : '<span class="not-found">❌ Not found</span>'}</div>`;
      
      if (form) {
        // Test the pick function logic
        const pick = (root, selectors) => {
          for (const s of selectors) {
            const el = root.querySelector(s);
            if (el) return el;
          }
          return null;
        };
        
        const emailEl = pick(form, ['input[name="email"]', '#email', 'input[type="email"]']);
        const passEl = pick(form, ['input[name="password"]', '#password', 'input[type="password"]']);
        
        results.innerHTML += `<div>Email input: ${emailEl ? '<span class="found">✅ Found</span>' : '<span class="not-found">❌ Not found</span>'}</div>`;
        results.innerHTML += `<div>Password input: ${passEl ? '<span class="found">✅ Found</span>' : '<span class="not-found">❌ Not found</span>'}</div>`;
        
        if (emailEl) results.innerHTML += `<div>Email selector used: ${emailEl.matches('input[name="email"]') ? 'name="email"' : emailEl.matches('#email') ? '#email' : 'type="email"'}</div>`;
        if (passEl) results.innerHTML += `<div>Password selector used: ${passEl.matches('input[name="password"]') ? 'name="password"' : passEl.matches('#password') ? '#password' : 'type="password"'}</div>`;
      }
    }
    
    // Test form submission
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('login-form');
      const submitResults = document.getElementById('submit-results');
      
      if (form) {
        form.addEventListener('submit', (e) => {
          e.preventDefault();
          const email = document.getElementById('email').value;
          const password = document.getElementById('password').value;
          
          submitResults.innerHTML = `
            <div>Form submitted successfully!</div>
            <div>Email: ${email || 'empty'}</div>
            <div>Password: ${password ? '***' : 'empty'}</div>
          `;
        });
      }
    });
    
    // Run test on load
    document.addEventListener('DOMContentLoaded', testElements);
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Header Menu Test</title>
    <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
    <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <h1>Header Menu Diagnostic Test</h1>
        
        <div class="test-section">
            <h2>1. DOM Element Check</h2>
            <div id="accountMenu"></div>
            <p>If you see a menu below this, the script is working!</p>
        </div>
        
        <div class="test-section">
            <h2>2. Console Output</h2>
            <p>Open browser DevTools (F12) and check the Console tab for messages starting with 🔧, ✅, ❌</p>
        </div>
        
        <div class="test-section">
            <h2>3. Manual Tests</h2>
            <button onclick="testAuth()">Test Authentication</button>
            <button onclick="testProfile()">Test Profile</button>
            <button onclick="testMenu()">Test Menu Render</button>
        </div>
    </div>
    
    <script type="module" src="/shared/header-menu.js"></script>
    
    <script>
        // Test functions
        async function testAuth() {
            try {
                const { supabase } = await import('/js/supabase-client.js');
                const { data: { user }, error } = await supabase.auth.getUser();
                console.log('Auth test result:', { user: user?.email || null, error });
                alert(`Auth test: ${user ? 'Logged in as ' + user.email : 'Not logged in'}`);
            } catch (e) {
                console.error('Auth test error:', e);
                alert('Auth test failed: ' + e.message);
            }
        }
        
        async function testProfile() {
            try {
                const { supabase } = await import('/js/supabase-client.js');
                const { data: { user } } = await supabase.auth.getUser();
                if (!user) {
                    alert('Not logged in - cannot test profile');
                    return;
                }
                
                const { data, error } = await supabase
                    .from('profiles')
                    .select('*')
                    .eq('user_id', user.id)
                    .maybeSingle();
                
                console.log('Profile test result:', { data, error });
                alert(`Profile test: ${data ? JSON.stringify(data) : 'No profile found'}`);
            } catch (e) {
                console.error('Profile test error:', e);
                alert('Profile test failed: ' + e.message);
            }
        }
        
        function testMenu() {
            const menu = document.getElementById('accountMenu');
            console.log('Menu element:', menu);
            console.log('Menu innerHTML:', menu?.innerHTML || 'Empty');
            alert(`Menu test: ${menu?.innerHTML ? 'Menu rendered' : 'Menu empty'}`);
        }
    </script>
    
    <style>
        .test-section {
            margin: 2rem 0;
            padding: 1rem;
            border: 1px solid #333;
            border-radius: 8px;
        }
        
        button {
            background: #f2c64b;
            color: #1a1a1a;
            border: none;
            padding: 0.5rem 1rem;
            margin: 0.5rem;
            border-radius: 4px;
            cursor: pointer;
        }
        
        button:hover {
            background: #e6b800;
        }
    </style>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Import Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        pre { background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>🔧 Import Debug Test</h1>
    
    <div class="test-section">
        <h2>Test Results</h2>
        <p>Check the browser console for debug output. You should see:</p>
        <ul>
            <li>✅ "SUPABASE_ENABLED is: true" - from auth-state-manager.js</li>
            <li>✅ No "SyntaxError: The requested module does not provide an export" errors</li>
        </ul>
        <p>If you see the debug message, the import is working correctly!</p>
    </div>

    <div class="test-section">
        <h2>Console Output</h2>
        <p>Open your browser's Developer Tools (F12) and check the Console tab for:</p>
        <pre>SUPABASE_ENABLED is: true</pre>
    </div>

    <script type="module">
        // Test the import directly
        try {
            const { SUPABASE_ENABLED, supabase } = await import('./js/supabase-client.js');
            console.log('✅ Direct import test successful');
            console.log('SUPABASE_ENABLED:', SUPABASE_ENABLED);
            console.log('supabase client:', typeof supabase);
        } catch (error) {
            console.error('❌ Direct import test failed:', error);
        }

        // Test auth-state-manager import
        try {
            const authModule = await import('./js/auth-state-manager.js');
            console.log('✅ AuthStateManager import test successful');
        } catch (error) {
            console.error('❌ AuthStateManager import test failed:', error);
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Import Fix Test</title>
    <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
    <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        pre { background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>🔧 Import Fix Test</h1>
    
    <div class="test-section">
        <h2>1. Test SUPABASE_ENABLED Import</h2>
        <p>Verify that SUPABASE_ENABLED is properly imported and accessible</p>
        <button onclick="testSupabaseEnabled()">Test SUPABASE_ENABLED</button>
        <div id="enabled-result"></div>
    </div>

    <div class="test-section">
        <h2>2. Test Supabase Client Import</h2>
        <p>Verify that supabase client is properly imported and working</p>
        <button onclick="testSupabaseClient()">Test Supabase Client</button>
        <div id="client-result"></div>
    </div>

    <div class="test-section">
        <h2>3. Test Auth State Manager</h2>
        <p>Verify that auth-state-manager can import both SUPABASE_ENABLED and supabase</p>
        <button onclick="testAuthStateManager()">Test Auth State Manager</button>
        <div id="auth-result"></div>
    </div>

    <div class="test-section">
        <h2>4. Test Console Logs</h2>
        <p>Check browser console for any import errors</p>
        <button onclick="checkConsoleLogs()">Check Console Logs</button>
        <div id="console-result"></div>
    </div>

    <script type="module">
        // Test 1: SUPABASE_ENABLED Import
        window.testSupabaseEnabled = async () => {
            const resultDiv = document.getElementById('enabled-result');
            resultDiv.innerHTML = '<p class="info">Testing SUPABASE_ENABLED import...</p>';
            
            try {
                const { SUPABASE_ENABLED } = await import('./supabase-client.js');
                
                if (SUPABASE_ENABLED === true) {
                    resultDiv.innerHTML = `
                        <p class="success">✅ SUPABASE_ENABLED imported successfully</p>
                        <p class="info">Value: ${SUPABASE_ENABLED}</p>
                        <p class="info">Type: ${typeof SUPABASE_ENABLED}</p>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <p class="error">❌ SUPABASE_ENABLED has unexpected value</p>
                        <p class="info">Value: ${SUPABASE_ENABLED}</p>
                        <p class="info">Type: ${typeof SUPABASE_ENABLED}</p>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error importing SUPABASE_ENABLED:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 2: Supabase Client Import
        window.testSupabaseClient = async () => {
            const resultDiv = document.getElementById('client-result');
            resultDiv.innerHTML = '<p class="info">Testing supabase client import...</p>';
            
            try {
                const { supabase } = await import('./supabase-client.js');
                
                if (supabase && typeof supabase.auth === 'object') {
                    resultDiv.innerHTML = `
                        <p class="success">✅ Supabase client imported successfully</p>
                        <p class="info">Auth module: ${typeof supabase.auth}</p>
                        <p class="info">Storage module: ${typeof supabase.storage}</p>
                        <p class="info">Database module: ${typeof supabase.from}</p>
                    `;
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ Supabase client not properly initialized</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error importing supabase client:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 3: Auth State Manager Import
        window.testAuthStateManager = async () => {
            const resultDiv = document.getElementById('auth-result');
            resultDiv.innerHTML = '<p class="info">Testing auth-state-manager import...</p>';
            
            try {
                // This should not throw an error now
                const authModule = await import('./js/auth-state-manager.js');
                
                if (authModule.AuthStateManager) {
                    resultDiv.innerHTML = `
                        <p class="success">✅ AuthStateManager imported successfully</p>
                        <p class="info">Class available: ${typeof authModule.AuthStateManager}</p>
                        <p class="info">No ReferenceError for SUPABASE_ENABLED</p>
                    `;
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ AuthStateManager not found in module</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error importing auth-state-manager:</p>
                    <pre>${error.message}</pre>
                    <p class="info">This should be fixed now!</p>
                `;
            }
        };

        // Test 4: Console Logs
        window.checkConsoleLogs = () => {
            const resultDiv = document.getElementById('console-result');
            
            // Capture console logs
            const originalLog = console.log;
            const originalError = console.error;
            const originalWarn = console.warn;
            
            let logs = [];
            
            console.log = (...args) => {
                logs.push(['LOG', ...args]);
                originalLog.apply(console, args);
            };
            
            console.error = (...args) => {
                logs.push(['ERROR', ...args]);
                originalError.apply(console, args);
            };
            
            console.warn = (...args) => {
                logs.push(['WARN', ...args]);
                originalWarn.apply(console, args);
            };
            
            // Restore after a short delay
            setTimeout(() => {
                console.log = originalLog;
                console.error = originalError;
                console.warn = originalWarn;
                
                const errorLogs = logs.filter(log => log[0] === 'ERROR');
                const warnLogs = logs.filter(log => log[0] === 'WARN');
                
                resultDiv.innerHTML = `
                    <p class="info">Console check complete</p>
                    <p class="info">Total logs: ${logs.length}</p>
                    <p class="info">Errors: ${errorLogs.length}</p>
                    <p class="info">Warnings: ${warnLogs.length}</p>
                    ${errorLogs.length > 0 ? `
                        <p class="error">Errors found:</p>
                        <pre>${errorLogs.map(log => log.slice(1).join(' ')).join('\n')}</pre>
                    ` : '<p class="success">✅ No errors found</p>'}
                `;
            }, 1000);
        };

        // Auto-run on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🔧 Import Fix Test loaded');
            console.log('Click the buttons above to test the fixes');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Test Imports</title>
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; }
    .success { color: green; background: #efe; padding: 1rem; margin: 0.5rem 0; border-radius: 4px; }
    .error { color: red; background: #fee; padding: 1rem; margin: 0.5rem 0; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>Testing Imports</h1>
  <div id="results"></div>

  <script type="module">
    const resultsDiv = document.getElementById('results');
    
    function addResult(message, isError = false) {
      const div = document.createElement('div');
      div.className = isError ? 'error' : 'success';
      div.textContent = message;
      resultsDiv.appendChild(div);
    }
    
    try {
      // Test supabase-client.js
      const { supabase, getCurrentAccountState } = await import('/js/supabase-client.js');
      addResult('✅ supabase-client.js loaded');
      
      // Test supabase.js
      const { getUser, onAuthStateChange, isAdmin, getMyBusiness } = await import('/js/supabase.js');
      addResult('✅ supabase.js loaded with all functions');
      
      // Test auth-state-manager.js
      const { initAuthState } = await import('/js/auth-state-manager.js');
      addResult('✅ auth-state-manager.js loaded');
      
      // Test header-auth.js
      const headerAuth = await import('/js/header-auth.js');
      addResult('✅ header-auth.js loaded');
      
      addResult('🎉 All imports successful! No more errors.');
      
    } catch (error) {
      addResult(`❌ Error: ${error.message}`, true);
      console.error('Import error:', error);
    }
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Login Test</title>
    <style>
        body { font-family: sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 600px; margin: 20px auto; padding: 20px; border: 1px solid #333; border-radius: 8px; background: #2a2a2a; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #444; border-radius: 5px; }
        .test-section h3 { margin-top: 0; color: #4CAF50; }
        .success { background: #2d5a2d; border-color: #4CAF50; }
        .error { background: #5a2d2d; border-color: #f44336; }
        .warning { background: #5a5a2d; border-color: #ff9800; }
        input, button { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 4px; border: 1px solid #555; background: #3a3a3a; color: white; }
        button { background: #007bff; cursor: pointer; border-color: #007bff; }
        button:hover { background: #0056b3; }
        .log { background: #1a1a1a; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto; }
        .status { padding: 10px; border-radius: 4px; margin: 10px 0; }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.info { background: #d1ecf1; color: #0c5460; }
    </style>
    <script>
        window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
        window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
    </script>
</head>
<body>
    <div class="container">
        <h1>🔧 Comprehensive Login System Test</h1>
        
        <div class="test-section" id="env-test">
            <h3>Environment Check</h3>
            <div id="env-status" class="status info">Checking environment...</div>
        </div>

        <div class="test-section" id="client-test">
            <h3>Supabase Client Test</h3>
            <div id="client-status" class="status info">Testing client initialization...</div>
        </div>

        <div class="test-section" id="login-test">
            <h3>Login Test</h3>
            <form id="loginForm">
                <input type="email" id="email" placeholder="Enter your email" required>
                <input type="password" id="password" placeholder="Enter your password" required>
                <button type="submit">Test Login</button>
            </form>
            <div id="login-status" class="status info">Ready to test login...</div>
        </div>

        <div class="test-section" id="session-test">
            <h3>Session Persistence Test</h3>
            <div id="session-status" class="status info">Testing session persistence...</div>
            <button onclick="testSessionPersistence()">Test Session Persistence</button>
        </div>

        <div class="test-section" id="header-test">
            <h3>Header Integration Test</h3>
            <div id="header-status" class="status info">Testing header integration...</div>
            <button onclick="testHeaderIntegration()">Test Header</button>
        </div>

        <div class="test-section">
            <h3>Debug Log</h3>
            <div id="debug-log" class="log"></div>
            <button onclick="clearLog()">Clear Log</button>
        </div>
    </div>

    <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2.57.4';

        let supabase;
        let currentSession = null;

        function log(message, type = 'info') {
            const logDiv = document.getElementById('debug-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}\n`;
            logDiv.textContent += logEntry;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[LOGIN-TEST] ${message}`);
        }

        function updateStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status ${type}`;
        }

        // Test 1: Environment Check
        function testEnvironment() {
            log('Testing environment variables...');
            
            if (!window.SUPABASE_URL || !window.SUPABASE_ANON_KEY) {
                updateStatus('env-status', '❌ Missing environment variables', 'error');
                log('ERROR: Missing SUPABASE_URL or SUPABASE_ANON_KEY', 'error');
                return false;
            }
            
            updateStatus('env-status', '✅ Environment variables loaded', 'success');
            log(`SUPABASE_URL: ${window.SUPABASE_URL}`);
            log(`ANON_KEY: ${window.SUPABASE_ANON_KEY.substring(0, 20)}...`);
            return true;
        }

        // Test 2: Client Initialization
        async function testClient() {
            log('Initializing Supabase client...');
            
            try {
                supabase = createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY, {
                    auth: {
                        autoRefreshToken: true,
                        persistSession: true,
                        detectSessionInUrl: true,
                    },
                });
                
                updateStatus('client-status', '✅ Supabase client initialized', 'success');
                log('Supabase client created successfully');
                
                // Test initial session
                const { data: sessionData, error: sessionError } = await supabase.auth.getSession();
                if (sessionError) {
                    log(`Session check error: ${sessionError.message}`, 'error');
                } else if (sessionData?.session) {
                    currentSession = sessionData.session;
                    log(`Found existing session for: ${sessionData.session.user.email}`);
                    updateStatus('session-status', `✅ Existing session found: ${sessionData.session.user.email}`, 'success');
                } else {
                    log('No existing session found');
                    updateStatus('session-status', 'ℹ️ No existing session', 'info');
                }
                
                return true;
            } catch (error) {
                updateStatus('client-status', `❌ Client initialization failed: ${error.message}`, 'error');
                log(`Client initialization error: ${error.message}`, 'error');
                return false;
            }
        }

        // Test 3: Login Functionality
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            
            if (!email || !password) {
                updateStatus('login-status', '❌ Please enter both email and password', 'error');
                return;
            }
            
            log(`Attempting login for: ${email}`);
            updateStatus('login-status', '🔄 Attempting login...', 'info');
            
            try {
                const { data, error } = await supabase.auth.signInWithPassword({ 
                    email, 
                    password 
                });
                
                if (error) {
                    log(`Login error: ${error.message}`, 'error');
                    updateStatus('login-status', `❌ Login failed: ${error.message}`, 'error');
                    return;
                }
                
                log(`Login successful: ${JSON.stringify(data, null, 2)}`);
                
                if (data?.session?.user) {
                    currentSession = data.session;
                    updateStatus('login-status', `✅ Login successful! User: ${data.session.user.email}`, 'success');
                    log(`Session created for user: ${data.session.user.email}`);
                    
                    // Test session persistence immediately
                    setTimeout(testSessionPersistence, 1000);
                } else {
                    updateStatus('login-status', '⚠️ Login successful but no session (email confirmation required?)', 'warning');
                    log('No session returned - email confirmation may be required', 'warning');
                }
                
            } catch (err) {
                log(`Login exception: ${err.message}`, 'error');
                updateStatus('login-status', `❌ Login failed: ${err.message}`, 'error');
            }
        });

        // Test 4: Session Persistence
        window.testSessionPersistence = async function() {
            log('Testing session persistence...');
            
            try {
                const { data: sessionData, error: sessionError } = await supabase.auth.getSession();
                
                if (sessionError) {
                    log(`Session persistence error: ${sessionError.message}`, 'error');
                    updateStatus('session-status', `❌ Session persistence failed: ${sessionError.message}`, 'error');
                    return;
                }
                
                if (sessionData?.session?.user) {
                    currentSession = sessionData.session;
                    updateStatus('session-status', `✅ Session persists: ${sessionData.session.user.email}`, 'success');
                    log(`Session persistence confirmed for: ${sessionData.session.user.email}`);
                    
                    // Test localStorage
                    const keys = Object.keys(localStorage).filter(k => k.includes('sb-'));
                    log(`LocalStorage keys: ${keys.join(', ')}`);
                    
                    // Test header integration
                    setTimeout(testHeaderIntegration, 500);
                } else {
                    updateStatus('session-status', '❌ No session found', 'error');
                    log('No session found in persistence test', 'error');
                }
                
            } catch (err) {
                log(`Session persistence test error: ${err.message}`, 'error');
                updateStatus('session-status', `❌ Session test failed: ${err.message}`, 'error');
            }
        };

        // Test 5: Header Integration
        window.testHeaderIntegration = async function() {
            log('Testing header integration...');
            
            try {
                // Simulate what the header would do
                const { data: sessionData } = await supabase.auth.getSession();
                
                if (sessionData?.session?.user) {
                    updateStatus('header-status', `✅ Header would show: ${sessionData.session.user.email}`, 'success');
                    log(`Header integration test passed - would show user: ${sessionData.session.user.email}`);
                } else {
                    updateStatus('header-status', '❌ Header would show login buttons', 'error');
                    log('Header integration test failed - no session for header', 'error');
                }
                
            } catch (err) {
                log(`Header integration test error: ${err.message}`, 'error');
                updateStatus('header-status', `❌ Header test failed: ${err.message}`, 'error');
            }
        };

        // Utility functions
        window.clearLog = function() {
            document.getElementById('debug-log').textContent = '';
        };

        // Initialize tests
        document.addEventListener('DOMContentLoaded', async () => {
            log('Starting comprehensive login system test...');
            
            if (testEnvironment()) {
                await testClient();
            }
            
            log('Test initialization complete');
        });
    </script>
</body>
</html>
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Chamber122 • Login Debug</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { color-scheme: dark }
    body { margin:0; background:#0b0c12; color:#e9e9f1; font-family:system-ui,sans-serif; }
    .wrap { max-width: 900px; margin: 40px auto; padding: 20px; }
    .card { background:#101321; border:1px solid #222640; border-radius:16px; padding:16px; }
    input,button { width:100%; padding:12px 14px; margin:8px 0 12px; border-radius:12px; border:1px solid #262b45; background:#0c1022; color:#f2f3ff; }
    button { background:#6f75ff; border:0; font-weight:700; cursor:pointer; }
    pre { white-space:pre-wrap; word-break:break-word; margin:0; }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
    h1 { margin:0 0 14px 0; }
  </style>

  <!-- DEV ONLY: inject project env -->
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>

  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2.57.4';

    // create once; all handlers close over this (no `_sb` anywhere)
    const sb = createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY, {
      auth: { autoRefreshToken: true, persistSession: true, detectSessionInUrl: true },
      global: { headers: { 'x-client-info': 'chamber122-debug' } }
    });
    // optional: expose for console tinkering
    window._sb = sb;

    const $ = (id) => document.getElementById(id);
    async function print(title, obj) { $('out').textContent += `\n\n=== ${title} ===\n` + JSON.stringify(obj, null, 2); }

    window.addEventListener('DOMContentLoaded', async () => {
      $('status').textContent = 'Ready';
      await print('Config', { url: window.SUPABASE_URL, anonKeyShort: (window.SUPABASE_ANON_KEY||'').slice(0,12)+'...' });
      const { data } = await sb.auth.getSession();
      await print('getSession()', data);
    });

    window.signIn = async () => {
      $('status').textContent = 'Signing in…';
      $('out').textContent = '';
      await print('Attempt', { email: $('email').value.trim() });
      try {
        const { data, error } = await sb.auth.signInWithPassword({
          email: $('email').value.trim(),
          password: $('password').value
        });
        await print('Result', { data, error });
        $('status').textContent = error ? `❌ ${error.message}` : '✅ Logged in';
        if (!error) setTimeout(()=>location.href='/dashboard.html', 1000);
      } catch (e) {
        await print('Exception', { message: String(e), stack: e?.stack });
        $('status').textContent = `❌ ${String(e)}`;
      }
    };

    window.whoAmI = async () => {
      const { data, error } = await sb.auth.getUser();
      await print('getUser()', { data, error });
    };

    window.logout = async () => {
      await sb.auth.signOut();
      $('status').textContent = 'Signed out';
    };
  </script>
</head>
<body>
  <div class="wrap">
    <h1>Chamber122 • Login Debug</h1>

    <div class="card">
      <div class="row">
        <div><label>Email</label><input id="email" type="email" placeholder="you@example.com" /></div>
        <div><label>Password</label><input id="password" type="password" placeholder="••••••••" /></div>
      </div>
      <button onclick="signIn()">Sign In (direct SDK)</button>
      <button onclick="whoAmI()">Who am I?</button>
      <button onclick="logout()">Sign Out</button>
      <div id="status" style="margin-top:8px"></div>
    </div>

    <h3 style="margin-top:20px">Output</h3>
    <div class="card"><pre id="out"></pre></div>
  </div>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal Login Test</title>
    <style>
        body { font-family: sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 400px; margin: 50px auto; padding: 20px; border: 1px solid #333; border-radius: 8px; background: #2a2a2a; }
        input, button { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 4px; border: 1px solid #555; background: #3a3a3a; color: white; }
        button { background: #007bff; cursor: pointer; border-color: #007bff; }
        button:hover { background: #0056b3; }
        #status { margin-top: 15px; padding: 10px; border-radius: 4px; }
        #status.success { background: #d4edda; color: #155724; }
        #status.error { background: #f8d7da; color: #721c24; }
    </style>
    <script>
        window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
        window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
    </script>
</head>
<body>
    <div class="container">
        <h1>Minimal Login Test</h1>
        <form id="testForm">
            <label for="email">Email:</label>
            <input type="email" id="email" placeholder="Enter your email" required>
            <label for="password">Password:</label>
            <input type="password" id="password" placeholder="Enter your password" required>
            <button type="submit">Test Login</button>
        </form>
        <div id="status"></div>
    </div>

    <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2.57.4';

        const supabase = createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY, {
            auth: {
                autoRefreshToken: true,
                persistSession: true,
                detectSessionInUrl: true,
            },
        });

        document.getElementById('testForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const statusDiv = document.getElementById('status');

            statusDiv.textContent = 'Attempting login...';
            statusDiv.className = '';

            try {
                console.log('Attempting login with:', email);
                
                const { data, error } = await supabase.auth.signInWithPassword({ 
                    email, 
                    password 
                });

                if (error) {
                    console.error('Login error:', error);
                    throw error;
                }

                console.log('Login success:', data);
                
                if (data?.session?.user) {
                    statusDiv.textContent = `✅ Login successful! User: ${data.session.user.email}`;
                    statusDiv.className = 'success';
                    
                    // Test session persistence
                    setTimeout(async () => {
                        const { data: sessionCheck } = await supabase.auth.getSession();
                        console.log('Session check:', sessionCheck);
                        
                        if (sessionCheck?.session) {
                            statusDiv.textContent += ` | Session persists: ✅`;
                        } else {
                            statusDiv.textContent += ` | Session lost: ❌`;
                        }
                    }, 1000);
                } else {
                    statusDiv.textContent = '⚠️ Login successful but no session returned (email confirmation may be required)';
                    statusDiv.className = 'warning';
                }
            } catch (err) {
                console.error('Login failed:', err);
                statusDiv.textContent = `❌ Login failed: ${err.message}`;
                statusDiv.className = 'error';
            }
        });

        // Debug: Check initial session
        supabase.auth.getSession().then(({ data }) => {
            console.log('Initial session check:', data);
            if (data?.session) {
                document.getElementById('status').textContent = `Already logged in as: ${data.session.user.email}`;
                document.getElementById('status').className = 'success';
            }
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quick Login Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: #fff; }
    .test-section { background: #2a2a2a; padding: 15px; margin: 10px 0; border-radius: 8px; }
    input, button { padding: 10px; margin: 5px; border-radius: 4px; border: 1px solid #555; width: 100%; max-width: 300px; }
    input { background: #333; color: #fff; }
    button { background: #007bff; color: #fff; cursor: pointer; }
    .status { padding: 5px 10px; border-radius: 4px; margin: 5px 0; }
    .status.ok { background: #28a745; color: white; }
    .status.error { background: #dc3545; color: white; }
  </style>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="/js/supabase-client.js?v=20"></script>
</head>
<body>
  <h1>🚀 Quick Login Test</h1>
  
  <div class="test-section">
    <h3>Environment Check</h3>
    <div id="env-status"></div>
  </div>

  <div class="test-section">
    <h3>Login Test</h3>
    <form id="login-form">
      <input id="email" type="email" placeholder="Email" required>
      <input id="password" type="password" placeholder="Password" required>
      <button id="login-btn" type="submit">Test Login</button>
    </form>
    <div id="login-status"></div>
  </div>

  <div class="test-section">
    <h3>Session Check</h3>
    <button onclick="checkSession()">Check Current Session</button>
    <div id="session-status"></div>
  </div>

  <script type="module">
    import { supabase } from '/js/supabase-client.js';

    // Environment check
    document.getElementById('env-status').innerHTML = `
      <div class="status ${window.SUPABASE_URL ? 'ok' : 'error'}">
        ${window.SUPABASE_URL ? '✅ Environment loaded' : '❌ Missing environment'}
      </div>
    `;

    // Login form
    document.getElementById('login-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      document.getElementById('login-status').innerHTML = '<div class="status">🔄 Testing login...</div>';
      
      try {
        const { data, error } = await supabase.auth.signInWithPassword({ email, password });
        
        if (error) {
          document.getElementById('login-status').innerHTML = `
            <div class="status error">❌ Login failed: ${error.message}</div>
          `;
        } else {
          document.getElementById('login-status').innerHTML = `
            <div class="status ok">✅ Login successful! User: ${data.user?.email}</div>
          `;
          setTimeout(() => {
            window.location.href = '/dashboard.html';
          }, 1000);
        }
      } catch (err) {
        document.getElementById('login-status').innerHTML = `
          <div class="status error">❌ Exception: ${err.message}</div>
        `;
      }
    });

    // Session check
    window.checkSession = async () => {
      try {
        const { data } = await supabase.auth.getSession();
        const user = data.session?.user;
        
        if (user) {
          document.getElementById('session-status').innerHTML = `
            <div class="status ok">✅ Logged in as: ${user.email}</div>
          `;
        } else {
          document.getElementById('session-status').innerHTML = `
            <div class="status error">❌ Not logged in</div>
          `;
        }
      } catch (err) {
        document.getElementById('session-status').innerHTML = `
          <div class="status error">❌ Session check failed: ${err.message}</div>
        `;
      }
    };

    // Auto-check session on load
    window.checkSession();
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simple Login Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #0b0c12; color: #e9e9f1; }
    .card { background: #101321; border: 1px solid #222640; border-radius: 16px; padding: 20px; margin: 20px 0; max-width: 400px; }
    input, button { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #262b45; background: #0c1022; color: #f2f3ff; }
    button { background: #6f75ff; border: 0; font-weight: 700; cursor: pointer; }
    .error { color: #ff6b6b; }
    .success { color: #51cf66; }
    pre { background: #1a1a1a; padding: 10px; border-radius: 4px; overflow-x: auto; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>Simple Login Test</h1>
  
  <div class="card">
    <h3>Test Login</h3>
    <input type="email" id="email" placeholder="your@email.com" value="test@example.com">
    <input type="password" id="password" placeholder="password" value="testpassword">
    <button onclick="testLogin()">Test Login</button>
    <div id="result"></div>
  </div>

  <div class="card">
    <h3>Check Session</h3>
    <button onclick="checkSession()">Check Current Session</button>
    <div id="session-result"></div>
  </div>

  <div class="card">
    <h3>Console Logs</h3>
    <pre id="logs"></pre>
  </div>

  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>

  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2.57.4';
    
    const supabase = createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY, {
      auth: {
        autoRefreshToken: true,
        persistSession: true,
        detectSessionInUrl: true
      }
    });

    function log(message, type = 'info') {
      const logs = document.getElementById('logs');
      const timestamp = new Date().toLocaleTimeString();
      const color = type === 'error' ? '#ff6b6b' : type === 'success' ? '#51cf66' : '#e9e9f1';
      logs.innerHTML += `<div style="color: ${color}">[${timestamp}] ${message}</div>`;
      console.log(`[${timestamp}] ${message}`);
    }

    window.testLogin = async function() {
      const result = document.getElementById('result');
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;
      
      log(`Testing login with email: ${email}`);
      
      try {
        const { data, error } = await supabase.auth.signInWithPassword({
          email: email,
          password: password
        });
        
        if (error) {
          log(`Login error: ${error.message}`, 'error');
          result.innerHTML = `<div class="error">❌ Login failed: ${error.message}</div>`;
        } else {
          log(`Login successful! User: ${data.user?.email}`, 'success');
          result.innerHTML = `<div class="success">✅ Login successful! User: ${data.user?.email}</div>`;
          
          // Check if session is stored
          setTimeout(() => checkSession(), 1000);
        }
      } catch (err) {
        log(`Login exception: ${err.message}`, 'error');
        result.innerHTML = `<div class="error">❌ Exception: ${err.message}</div>`;
      }
    };

    window.checkSession = async function() {
      const result = document.getElementById('session-result');
      log('Checking current session...');
      
      try {
        const { data, error } = await supabase.auth.getSession();
        
        if (error) {
          log(`Session error: ${error.message}`, 'error');
          result.innerHTML = `<div class="error">❌ Session error: ${error.message}</div>`;
        } else if (data.session?.user) {
          log(`Session found! User: ${data.session.user.email}`, 'success');
          result.innerHTML = `<div class="success">✅ Session active! User: ${data.session.user.email}</div>`;
        } else {
          log('No active session found', 'error');
          result.innerHTML = `<div class="error">❌ No active session</div>`;
        }
      } catch (err) {
        log(`Session check exception: ${err.message}`, 'error');
        result.innerHTML = `<div class="error">❌ Exception: ${err.message}</div>`;
      }
    };

    // Initial session check
    log('Page loaded');
    checkSession();
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session Debug Test</title>
    <style>
        body { font-family: sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 800px; margin: 0 auto; }
        .status { padding: 15px; margin: 10px 0; border-radius: 8px; }
        .success { background: #2d5016; border: 1px solid #4ade80; }
        .error { background: #7f1d1d; border: 1px solid #ef4444; }
        .info { background: #1e3a8a; border: 1px solid #3b82f6; }
        .warning { background: #78350f; border: 1px solid #f59e0b; }
        .btn { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
        .btn-primary { background: #3b82f6; color: white; }
        .btn-secondary { background: #6b7280; color: white; }
        .btn-danger { background: #ef4444; color: white; }
        pre { background: #0f0f0f; padding: 15px; border-radius: 5px; overflow-x: auto; }
        .nav-links { margin: 20px 0; }
        .nav-links a { color: #3b82f6; text-decoration: none; margin-right: 15px; }
        .nav-links a:hover { text-decoration: underline; }
    </style>
    <script>
        window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
        window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
    </script>
    <script type="module" src="js/supabase-client.js?v=20"></script>
    <script type="module" src="js/auth-session.js?v=1"></script>
    <script type="module" src="js/site-header.js?v=1"></script>
</head>
<body>
    <div class="container">
        <h1>Session Debug Test</h1>
        
        <div id="site-header"></div>
        
        <div class="nav-links">
            <a href="/dashboard.html">Dashboard</a>
            <a href="/events.html">Events</a>
            <a href="/bulletin.html">Bulletin</a>
            <a href="/auth.html">Login</a>
        </div>
        
        <div id="session-status" class="status info">
            Checking session status...
        </div>
        
        <div id="localStorage-info" class="status info">
            Checking localStorage...
        </div>
        
        <div id="debug-output">
            <h3>Debug Output:</h3>
            <pre id="debug-log"></pre>
        </div>
        
        <div>
            <button class="btn btn-primary" onclick="testSession()">Test Current Session</button>
            <button class="btn btn-secondary" onclick="checkLocalStorage()">Check localStorage</button>
            <button class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
        </div>
    </div>

    <script type="module">
        import { supabase } from './js/supabase-client.js';
        import { ensureSessionHydrated, debugSessionState } from './js/auth-session.js';
        
        function log(message, type = 'info') {
            const debugLog = document.getElementById('debug-log');
            const timestamp = new Date().toLocaleTimeString();
            debugLog.textContent += `[${timestamp}] ${message}\n`;
            debugLog.scrollTop = debugLog.scrollHeight;
            console.log(message);
        }
        
        function updateStatus(elementId, message, className = 'info') {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status ${className}`;
        }
        
        async function checkSession() {
            log('Checking session status...');
            try {
                const session = await ensureSessionHydrated();
                if (session?.user) {
                    updateStatus('session-status', `✅ Logged in as: ${session.user.email}`, 'success');
                    log(`✅ Session active for: ${session.user.email}`);
                } else {
                    updateStatus('session-status', '❌ No active session', 'error');
                    log('❌ No active session found');
                }
            } catch (error) {
                updateStatus('session-status', `❌ Error: ${error.message}`, 'error');
                log(`❌ Session check error: ${error.message}`);
            }
        }
        
        function checkLocalStorageData() {
            const keys = Object.keys(localStorage).filter(k => k.includes('sb-'));
            if (keys.length > 0) {
                updateStatus('localStorage-info', `✅ Found ${keys.length} Supabase keys: ${keys.join(', ')}`, 'success');
                log(`✅ localStorage keys: ${keys.join(', ')}`);
                keys.forEach(key => {
                    try {
                        const data = JSON.parse(localStorage.getItem(key));
                        log(`Key ${key}: ${JSON.stringify(data, null, 2)}`);
                    } catch (e) {
                        log(`Key ${key}: Invalid JSON`);
                    }
                });
            } else {
                updateStatus('localStorage-info', '❌ No Supabase keys found in localStorage', 'error');
                log('❌ No Supabase keys found in localStorage');
            }
        }
        
        // Make functions available globally
        window.testSession = checkSession;
        window.checkLocalStorage = checkLocalStorageData;
        window.clearAllData = () => {
            localStorage.clear();
            log('🧹 Cleared all localStorage data');
            checkLocalStorageData();
        };
        
        // Initial checks
        document.addEventListener('DOMContentLoaded', () => {
            log('🚀 Session debug page loaded');
            checkSession();
            checkLocalStorageData();
            
            // Listen for auth state changes
            supabase.auth.onAuthStateChange((event, session) => {
                log(`🔄 Auth state changed: ${event} - ${session ? `User: ${session.user?.email}` : 'No session'}`);
                checkSession();
            });
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup Refactor Test</title>
    <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
    <meta name="supabase-anon" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        .warning { color: #f59e0b; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        pre { background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>🔧 Signup Refactor Test</h1>
    
    <div class="test-section">
        <h2>Test Results</h2>
        <p>This page tests the refactored signup stepper with clean imports and auth flow.</p>
        
        <button onclick="testImports()">Test Imports</button>
        <button onclick="testAuthFlow()">Test Auth Flow</button>
        <button onclick="testStepper()">Test Stepper</button>
        
        <div id="test-results"></div>
    </div>

    <div class="test-section">
        <h2>Console Output</h2>
        <p>Check the browser console for detailed logs. You should see:</p>
        <ul>
            <li>✅ No "SUPABASE_ENABLED is not defined" errors</li>
            <li>✅ No "module does not provide an export" errors</li>
            <li>✅ Clean import/export resolution</li>
        </ul>
    </div>

    <script type="module">
        // Test 1: Imports
        window.testImports = async () => {
            const resultDiv = document.getElementById('test-results');
            resultDiv.innerHTML = '<p class="info">Testing imports...</p>';
            
            try {
                // Test supabase-client.js
                const supabaseModule = await import('./js/supabase-client.js');
                console.log('✅ supabase-client.js imported:', Object.keys(supabaseModule));
                
                // Test auth-state-manager.js
                const authModule = await import('./js/auth-state-manager.js');
                console.log('✅ auth-state-manager.js imported:', Object.keys(authModule));
                
                // Test signup-utils.js
                const utilsModule = await import('./js/signup-utils.js');
                console.log('✅ signup-utils.js imported:', Object.keys(utilsModule));
                
                // Test signup-stepper.js
                const stepperModule = await import('./js/signup-stepper.js');
                console.log('✅ signup-stepper.js imported:', Object.keys(stepperModule));
                
                resultDiv.innerHTML = `
                    <p class="success">✅ All imports successful</p>
                    <p class="info">SUPABASE_ENABLED: ${supabaseModule.SUPABASE_ENABLED}</p>
                    <p class="info">supabase client: ${typeof supabaseModule.supabase}</p>
                    <p class="info">getMyBusiness: ${typeof supabaseModule.getMyBusiness}</p>
                    <p class="info">getAccountAndCompleteness: ${typeof supabaseModule.getAccountAndCompleteness}</p>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Import error:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 2: Auth Flow
        window.testAuthFlow = async () => {
            const resultDiv = document.getElementById('test-results');
            resultDiv.innerHTML = '<p class="info">Testing auth flow...</p>';
            
            try {
                const { initAuthState, getCurrentUser } = await import('./js/auth-state-manager.js');
                const { ensureSignedIn } = await import('./js/signup-utils.js');
                
                // Initialize auth
                initAuthState();
                
                // Wait for initialization
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                const user = getCurrentUser();
                
                resultDiv.innerHTML = `
                    <p class="success">✅ Auth flow test complete</p>
                    <p class="info">Current user: ${user ? user.email : 'Not signed in'}</p>
                    <p class="info">User ID: ${user ? user.id : 'N/A'}</p>
                    <p class="info">ensureSignedIn function: ${typeof ensureSignedIn}</p>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Auth flow error:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 3: Stepper
        window.testStepper = async () => {
            const resultDiv = document.getElementById('test-results');
            resultDiv.innerHTML = '<p class="info">Testing stepper...</p>';
            
            try {
                const { supabase, getAccountAndCompleteness } = await import('./js/supabase-client.js');
                
                // Test database connection
                const { data, error } = await supabase.from('businesses').select('count').limit(1);
                
                resultDiv.innerHTML = `
                    <p class="success">✅ Stepper test complete</p>
                    <p class="info">Database connection: ${error ? 'Error' : 'Success'}</p>
                    <p class="info">getAccountAndCompleteness: ${typeof getAccountAndCompleteness}</p>
                    <p class="info">Error details: ${error ? error.message : 'None'}</p>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Stepper error:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Auto-run on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🔧 Signup Refactor Test loaded');
            console.log('Click the buttons above to test the refactored signup flow');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Test Signup Stepper</title>
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; }
    .success { color: green; background: #efe; padding: 1rem; margin: 0.5rem 0; border-radius: 4px; }
    .error { color: red; background: #fee; padding: 1rem; margin: 0.5rem 0; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>Testing Signup Stepper Import</h1>
  <div id="results"></div>

  <script type="module">
    const resultsDiv = document.getElementById('results');
    
    function addResult(message, isError = false) {
      const div = document.createElement('div');
      div.className = isError ? 'error' : 'success';
      div.textContent = message;
      resultsDiv.appendChild(div);
    }
    
    try {
      // Test supabase-client.js with getAccountAndCompleteness
      const { supabase, getAccountAndCompleteness } = await import('/js/supabase-client.js');
      addResult('✅ supabase-client.js loaded with getAccountAndCompleteness');
      
      // Test the function
      const result = await getAccountAndCompleteness();
      addResult(`✅ getAccountAndCompleteness works: next_step = ${result.data.next_step}`);
      
      // Test signup-stepper.js import
      const signupStepper = await import('/js/signup-stepper.js');
      addResult('✅ signup-stepper.js loaded successfully');
      
      addResult('🎉 All signup stepper imports working!');
      
    } catch (error) {
      addResult(`❌ Error: ${error.message}`, true);
      console.error('Import error:', error);
    }
  </script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <title>Simple Login Test</title>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="/js/supabase-client.js?v=20"></script>
</head>
<body>
  <h1>Simple Login Test</h1>
  <form id="test-form">
    <input id="email" type="email" placeholder="Email" required>
    <input id="password" type="password" placeholder="Password" required>
    <button id="login-btn" type="submit">Login</button>
  </form>
  <div id="result"></div>

  <script type="module">
    import { supabase } from '/js/supabase-client.js';
    
    console.log('Script loaded, supabase:', !!supabase);
    
    document.getElementById('test-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      document.getElementById('result').innerHTML = 'Testing...';
      
      try {
        const { data, error } = await supabase.auth.signInWithPassword({ email, password });
        
        if (error) {
          document.getElementById('result').innerHTML = `Error: ${error.message}`;
        } else {
          document.getElementById('result').innerHTML = `Success! User: ${data.user?.email}`;
        }
      } catch (err) {
        document.getElementById('result').innerHTML = `Exception: ${err.message}`;
      }
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stepper Auth Test</title>
    <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
    <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        .warning { color: #f59e0b; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        pre { background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; }
        .step { margin: 10px 0; padding: 10px; background: #2a2a2a; border-radius: 4px; }
        .step h3 { margin-top: 0; color: #60a5fa; }
    </style>
</head>
<body>
    <h1>🔐 Stepper Auth Test</h1>
    
    <div class="test-section">
        <h2>Test Steps</h2>
        <div class="step">
            <h3>Step 1: Test Auth State Initialization</h3>
            <p>Check if auth state is properly initialized</p>
            <button onclick="testAuthInit()">Test Auth Init</button>
            <div id="auth-init-result"></div>
        </div>

        <div class="step">
            <h3>Step 2: Test Sign-in Modal</h3>
            <p>Test the sign-in modal functionality</p>
            <button onclick="testSignInModal()">Test Sign-in Modal</button>
            <div id="signin-modal-result"></div>
        </div>

        <div class="step">
            <h3>Step 3: Test Stepper with Auth</h3>
            <p>Test the stepper Next button with authentication</p>
            <button onclick="testStepperAuth()">Test Stepper Auth</button>
            <div id="stepper-auth-result"></div>
        </div>

        <div class="step">
            <h3>Step 4: Test Data Collection</h3>
            <p>Test form data collection functions</p>
            <button onclick="testDataCollection()">Test Data Collection</button>
            <div id="data-collection-result"></div>
        </div>
    </div>

    <div class="test-section">
        <h2>Console Output</h2>
        <p>Check the browser console for detailed logs. You should see:</p>
        <ul>
            <li>✅ "SUPABASE_ENABLED is: true"</li>
            <li>✅ "AuthStateManager] Initializing auth state..."</li>
            <li>✅ "AuthStateManager] Initial user: [email or none]"</li>
        </ul>
    </div>

    <script type="module">
        // Test 1: Auth State Initialization
        window.testAuthInit = async () => {
            const resultDiv = document.getElementById('auth-init-result');
            resultDiv.innerHTML = '<p class="info">Testing auth initialization...</p>';
            
            try {
                const { initAuthState, getCurrentUser } = await import('./js/auth-state-manager.js');
                
                // Initialize auth
                initAuthState();
                
                // Wait a moment for initialization
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                const user = getCurrentUser();
                
                resultDiv.innerHTML = `
                    <p class="success">✅ Auth initialization test complete</p>
                    <p class="info">Current user: ${user ? user.email : 'Not signed in'}</p>
                    <p class="info">User ID: ${user ? user.id : 'N/A'}</p>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing auth init:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 2: Sign-in Modal
        window.testSignInModal = async () => {
            const resultDiv = document.getElementById('signin-modal-result');
            resultDiv.innerHTML = '<p class="info">Testing sign-in modal...</p>';
            
            try {
                const { ensureSignedIn } = await import('./js/signup-utils.js');
                
                resultDiv.innerHTML = `
                    <p class="info">Click the button below to test the sign-in modal:</p>
                    <button onclick="testSignInModalActual()">Open Sign-in Modal</button>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error loading signup utils:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 2b: Actual sign-in modal test
        window.testSignInModalActual = async () => {
            try {
                const { ensureSignedIn } = await import('./js/signup-utils.js');
                const user = await ensureSignedIn();
                
                if (user) {
                    document.getElementById('signin-modal-result').innerHTML = `
                        <p class="success">✅ Sign-in successful!</p>
                        <p class="info">User: ${user.email}</p>
                    `;
                } else {
                    document.getElementById('signin-modal-result').innerHTML = `
                        <p class="warning">⚠️ Sign-in cancelled or failed</p>
                    `;
                }
            } catch (error) {
                document.getElementById('signin-modal-result').innerHTML = `
                    <p class="error">❌ Sign-in error:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 3: Stepper with Auth
        window.testStepperAuth = async () => {
            const resultDiv = document.getElementById('stepper-auth-result');
            resultDiv.innerHTML = '<p class="info">Testing stepper with auth...</p>';
            
            try {
                const { ensureSignedIn, collectStepOneFields } = await import('./js/signup-utils.js');
                const { supabase } = await import('./js/supabase-client.js');
                
                // Test data collection
                const stepData = collectStepOneFields();
                
                resultDiv.innerHTML = `
                    <p class="success">✅ Stepper auth test complete</p>
                    <p class="info">Data collection working: ${Object.keys(stepData).length} fields</p>
                    <p class="info">Supabase client available: ${typeof supabase === 'object'}</p>
                    <p class="info">ensureSignedIn function available: ${typeof ensureSignedIn === 'function'}</p>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing stepper auth:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 4: Data Collection
        window.testDataCollection = async () => {
            const resultDiv = document.getElementById('data-collection-result');
            resultDiv.innerHTML = '<p class="info">Testing data collection functions...</p>';
            
            try {
                const { 
                    collectStepOneFields, 
                    collectStepTwoFields, 
                    collectStepThreeFields, 
                    collectStepFourFields 
                } = await import('./js/signup-utils.js');
                
                const step1 = collectStepOneFields();
                const step2 = collectStepTwoFields();
                const step3 = collectStepThreeFields();
                const step4 = collectStepFourFields();
                
                resultDiv.innerHTML = `
                    <p class="success">✅ Data collection functions working</p>
                    <p class="info">Step 1 fields: ${Object.keys(step1).join(', ')}</p>
                    <p class="info">Step 2 fields: ${Object.keys(step2).join(', ')}</p>
                    <p class="info">Step 3 fields: ${Object.keys(step3).join(', ')}</p>
                    <p class="info">Step 4 fields: ${Object.keys(step4).join(', ')}</p>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing data collection:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Auto-run on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🔐 Stepper Auth Test loaded');
            console.log('Click the buttons above to test the stepper authentication flow');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stepper Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        pre { background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>🧪 Stepper Navigation Test</h1>
    
    <div class="test-section">
        <h2>Test Stepper Navigation</h2>
        <p>This will test the stepper navigation in your auth.html page.</p>
        
        <button onclick="testStepperNavigation()">Test Stepper Navigation</button>
        <button onclick="enableDebugBypass()">Enable Debug Bypass</button>
        <button onclick="disableDebugBypass()">Disable Debug Bypass</button>
        
        <div id="stepper-result"></div>
    </div>

    <div class="test-section">
        <h2>Console Commands</h2>
        <p>Run these commands in your browser console on the auth.html page:</p>
        <pre>
// Enable debug bypass (skips validation)
window.SIGNUP_DEBUG_BYPASS = true;

// Disable debug bypass
window.SIGNUP_DEBUG_BYPASS = false;

// Check current step
console.log('Current step:', window.currentStep);

// Force show step 2
showStep(2);

// Check if stepper is initialized
console.log('Stepper initialized:', window.currentStep !== undefined);
        </pre>
    </div>

    <script>
        function testStepperNavigation() {
            const resultDiv = document.getElementById('stepper-result');
            resultDiv.innerHTML = '<p class="info">Testing stepper navigation...</p>';
            
            // Open auth.html in new tab for testing
            const authUrl = 'auth.html#signup';
            const newWindow = window.open(authUrl, '_blank');
            
            if (newWindow) {
                resultDiv.innerHTML = `
                    <p class="success">✅ Opened auth.html in new tab</p>
                    <p class="info">Now test the stepper navigation:</p>
                    <ol>
                        <li>Fill in the business information (Step 1)</li>
                        <li>Click "Next" to go to Step 2</li>
                        <li>Upload a logo (optional) and click "Next"</li>
                        <li>Upload required documents (Step 3) and click "Next"</li>
                        <li>Enter email/password (Step 4) and click "Next"</li>
                    </ol>
                    <p class="info">If it doesn't work, try enabling debug bypass in the console.</p>
                `;
            } else {
                resultDiv.innerHTML = '<p class="error">❌ Could not open auth.html (popup blocked?)</p>';
            }
        }

        function enableDebugBypass() {
            const resultDiv = document.getElementById('stepper-result');
            resultDiv.innerHTML = `
                <p class="success">✅ Debug bypass enabled</p>
                <p class="info">Run this in the console on auth.html:</p>
                <pre>window.SIGNUP_DEBUG_BYPASS = true;</pre>
                <p class="info">This will skip validation and allow free navigation between steps.</p>
            `;
        }

        function disableDebugBypass() {
            const resultDiv = document.getElementById('stepper-result');
            resultDiv.innerHTML = `
                <p class="success">✅ Debug bypass disabled</p>
                <p class="info">Run this in the console on auth.html:</p>
                <pre>window.SIGNUP_DEBUG_BYPASS = false;</pre>
                <p class="info">This will re-enable validation for proper form flow.</p>
            `;
        }

        // Auto-run on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🧪 Stepper Test loaded');
            console.log('Click "Test Stepper Navigation" to open auth.html and test the stepper');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Supabase Auth Test</title>
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; max-width: 600px; margin: 0 auto; }
    .test-section { margin: 1rem 0; padding: 1rem; border: 1px solid #ddd; border-radius: 8px; }
    .btn { padding: 0.5rem 1rem; margin: 0.5rem; border: none; border-radius: 4px; cursor: pointer; }
    .btn-primary { background: #3b82f6; color: white; }
    .btn-danger { background: #ef4444; color: white; }
    .status { padding: 1rem; margin: 1rem 0; border-radius: 4px; }
    .success { background: #d1fae5; color: #065f46; }
    .error { background: #fee2e2; color: #991b1b; }
    .info { background: #dbeafe; color: #1e40af; }
  </style>
</head>
<body>
  <h1>Supabase Auth Test</h1>
  
  <div class="test-section">
    <h2>Current Auth State</h2>
    <div id="auth-status" class="status info">Loading...</div>
    <button id="refresh-status" class="btn btn-primary">Refresh Status</button>
  </div>
  
  <div class="test-section">
    <h2>Test Sign Up</h2>
    <form id="test-signup">
      <div style="margin: 1rem 0;">
        <label>Email:</label><br>
        <input type="email" id="signup-email" placeholder="test@example.com" style="width: 300px; padding: 0.5rem;">
      </div>
      <div style="margin: 1rem 0;">
        <label>Password:</label><br>
        <input type="password" id="signup-password" placeholder="password123" style="width: 300px; padding: 0.5rem;">
      </div>
      <button type="submit" class="btn btn-primary">Test Sign Up</button>
    </form>
  </div>
  
  <div class="test-section">
    <h2>Test Sign In</h2>
    <form id="test-signin">
      <div style="margin: 1rem 0;">
        <label>Email:</label><br>
        <input type="email" id="signin-email" placeholder="test@example.com" style="width: 300px; padding: 0.5rem;">
      </div>
      <div style="margin: 1rem 0;">
        <label>Password:</label><br>
        <input type="password" id="signin-password" placeholder="password123" style="width: 300px; padding: 0.5rem;">
      </div>
      <button type="submit" class="btn btn-primary">Test Sign In</button>
    </form>
  </div>
  
  <div class="test-section">
    <h2>Actions</h2>
    <button id="sign-out" class="btn btn-danger">Sign Out</button>
    <button id="test-callback" class="btn btn-primary">Test Callback Page</button>
  </div>
  
  <div class="test-section">
    <h2>Console Test</h2>
    <p>Open browser console and run:</p>
    <code>
      (await supabase.auth.getUser()).data.user?.id
    </code>
  </div>

  <script type="module">
    import { supabase, getCurrentAccountState } from '/js/supabase-client.js';
    import { signupWithEmailPassword, signInWithPassword } from '/js/auth-signup-utils.js';
    
    // Make supabase available globally for console testing
    window.supabase = supabase;
    
    const authStatus = document.getElementById('auth-status');
    const refreshBtn = document.getElementById('refresh-status');
    const signOutBtn = document.getElementById('sign-out');
    const testCallbackBtn = document.getElementById('test-callback');
    
    async function updateAuthStatus() {
      try {
        const { signedIn, user } = await getCurrentAccountState();
        if (signedIn && user) {
          authStatus.className = 'status success';
          authStatus.innerHTML = `
            <strong>Signed In</strong><br>
            Email: ${user.email}<br>
            ID: ${user.id}<br>
            Created: ${new Date(user.created_at).toLocaleString()}
          `;
        } else {
          authStatus.className = 'status info';
          authStatus.textContent = 'Not signed in';
        }
      } catch (error) {
        authStatus.className = 'status error';
        authStatus.textContent = 'Error: ' + error.message;
      }
    }
    
    // Initial status update
    updateAuthStatus();
    
    // Listen for auth state changes
    supabase.auth.onAuthStateChange((event, session) => {
      console.log('Auth state changed:', event, session?.user?.email);
      updateAuthStatus();
    });
    
    // Event listeners
    refreshBtn.addEventListener('click', updateAuthStatus);
    
    signOutBtn.addEventListener('click', async () => {
      try {
        await supabase.auth.signOut();
        updateAuthStatus();
      } catch (error) {
        alert('Sign out error: ' + error.message);
      }
    });
    
    testCallbackBtn.addEventListener('click', () => {
      window.open('/auth-callback.html', '_blank');
    });
    
    // Sign up form
    document.getElementById('test-signup').addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;
      
      try {
        const { requiresConfirm } = await signupWithEmailPassword(email, password);
        if (requiresConfirm) {
          alert('Account created! Check your email for confirmation link.');
        } else {
          alert('Account created and signed in!');
        }
        updateAuthStatus();
      } catch (error) {
        alert('Sign up error: ' + error.message);
      }
    });
    
    // Sign in form
    document.getElementById('test-signin').addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('signin-email').value;
      const password = document.getElementById('signin-password').value;
      
      try {
        await signInWithPassword(email, password);
        alert('Signed in successfully!');
        updateAuthStatus();
      } catch (error) {
        alert('Sign in error: ' + error.message);
      }
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase Cleanup Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        pre { background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>🧹 Supabase Cleanup Test</h1>
    
    <div class="test-section">
        <h2>1. Test Single getMyBusiness Definition</h2>
        <p>Verify there's only one getMyBusiness function and it works correctly</p>
        <button onclick="testSingleGetMyBusiness()">Test Single getMyBusiness</button>
        <div id="single-result"></div>
    </div>

    <div class="test-section">
        <h2>2. Test getAccountAndCompleteness Alias</h2>
        <p>Test that the alias function works correctly</p>
        <button onclick="testAlias()">Test Alias Function</button>
        <div id="alias-result"></div>
    </div>

    <div class="test-section">
        <h2>3. Test Return Format</h2>
        <p>Verify both functions return the correct format</p>
        <button onclick="testReturnFormat()">Test Return Format</button>
        <div id="format-result"></div>
    </div>

    <div class="test-section">
        <h2>4. Test No Duplicate Exports</h2>
        <p>Verify there are no duplicate function exports</p>
        <button onclick="testNoDuplicates()">Test No Duplicates</button>
        <div id="duplicate-result"></div>
    </div>

    <script type="module">
        // Test 1: Single getMyBusiness Definition
        window.testSingleGetMyBusiness = async () => {
            const resultDiv = document.getElementById('single-result');
            resultDiv.innerHTML = '<p class="info">Testing single getMyBusiness definition...</p>';
            
            try {
                const { getMyBusiness } = await import('./js/supabase.js');
                
                if (typeof getMyBusiness === 'function') {
                    const result = await getMyBusiness();
                    
                    if (result && typeof result === 'object' && 'business' in result && 'completeness' in result) {
                        resultDiv.innerHTML = `
                            <p class="success">✅ Single getMyBusiness function works correctly</p>
                            <pre>${JSON.stringify(result, null, 2)}</pre>
                        `;
                    } else {
                        resultDiv.innerHTML = '<p class="error">❌ getMyBusiness returned unexpected format</p>';
                    }
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ getMyBusiness is not a function</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing getMyBusiness:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 2: Alias Function
        window.testAlias = async () => {
            const resultDiv = document.getElementById('alias-result');
            resultDiv.innerHTML = '<p class="info">Testing getAccountAndCompleteness alias...</p>';
            
            try {
                const { getAccountAndCompleteness } = await import('./js/supabase.js');
                
                if (typeof getAccountAndCompleteness === 'function') {
                    const result = await getAccountAndCompleteness();
                    
                    if (result && typeof result === 'object' && 'business' in result && 'completeness' in result) {
                        resultDiv.innerHTML = `
                            <p class="success">✅ getAccountAndCompleteness alias works correctly</p>
                            <pre>${JSON.stringify(result, null, 2)}</pre>
                        `;
                    } else {
                        resultDiv.innerHTML = '<p class="error">❌ getAccountAndCompleteness returned unexpected format</p>';
                    }
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ getAccountAndCompleteness is not a function</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing alias:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 3: Return Format
        window.testReturnFormat = async () => {
            const resultDiv = document.getElementById('format-result');
            resultDiv.innerHTML = '<p class="info">Testing return format consistency...</p>';
            
            try {
                const { getMyBusiness, getAccountAndCompleteness } = await import('./js/supabase.js');
                
                const result1 = await getMyBusiness();
                const result2 = await getAccountAndCompleteness();
                
                // Check if both return the same format
                const format1 = typeof result1 === 'object' && 'business' in result1 && 'completeness' in result1;
                const format2 = typeof result2 === 'object' && 'business' in result2 && 'completeness' in result2;
                
                if (format1 && format2) {
                    resultDiv.innerHTML = `
                        <p class="success">✅ Both functions return consistent format</p>
                        <p class="info">getMyBusiness format: ${format1 ? '✅' : '❌'}</p>
                        <p class="info">getAccountAndCompleteness format: ${format2 ? '✅' : '❌'}</p>
                    `;
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ Functions return inconsistent formats</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing return format:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 4: No Duplicate Exports
        window.testNoDuplicates = async () => {
            const resultDiv = document.getElementById('duplicate-result');
            resultDiv.innerHTML = '<p class="info">Testing for duplicate exports...</p>';
            
            try {
                const module = await import('./js/supabase.js');
                const exports = Object.keys(module);
                
                // Check for duplicate function names
                const functionNames = exports.filter(name => typeof module[name] === 'function');
                const duplicates = functionNames.filter((name, index) => functionNames.indexOf(name) !== index);
                
                if (duplicates.length === 0) {
                    resultDiv.innerHTML = `
                        <p class="success">✅ No duplicate function exports found</p>
                        <p class="info">Total functions exported: ${functionNames.length}</p>
                        <p class="info">Functions: ${functionNames.join(', ')}</p>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <p class="error">❌ Duplicate function exports found:</p>
                        <pre>${duplicates.join(', ')}</pre>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error checking for duplicates:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Auto-run on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🧹 Supabase Cleanup Test loaded');
            console.log('Click the buttons above to test the cleanup');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase Imports Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        pre { background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>🔧 Supabase Imports Test</h1>
    
    <div class="test-section">
        <h2>1. Test Supabase Client Import</h2>
        <p>Verify supabase-client.js loads correctly from CDN</p>
        <button onclick="testSupabaseClient()">Test Supabase Client</button>
        <div id="client-result"></div>
    </div>

    <div class="test-section">
        <h2>2. Test Supabase.js Import</h2>
        <p>Verify supabase.js imports from supabase-client.js correctly</p>
        <button onclick="testSupabaseJS()">Test Supabase.js</button>
        <div id="supabase-result"></div>
    </div>

    <div class="test-section">
        <h2>3. Test Auth Functions</h2>
        <p>Verify auth functions work with the new imports</p>
        <button onclick="testAuthFunctions()">Test Auth Functions</button>
        <div id="auth-result"></div>
    </div>

    <div class="test-section">
        <h2>4. Test Business Functions</h2>
        <p>Verify business functions work with the new imports</p>
        <button onclick="testBusinessFunctions()">Test Business Functions</button>
        <div id="business-result"></div>
    </div>

    <script type="module">
        // Test 1: Supabase Client Import
        window.testSupabaseClient = async () => {
            const resultDiv = document.getElementById('client-result');
            resultDiv.innerHTML = '<p class="info">Testing supabase-client.js import...</p>';
            
            try {
                const { supabase } = await import('./js/supabase-client.js');
                
                if (supabase && typeof supabase.auth === 'object') {
                    resultDiv.innerHTML = `
                        <p class="success">✅ Supabase client imported successfully</p>
                        <p class="info">Auth module: ${typeof supabase.auth}</p>
                        <p class="info">Storage module: ${typeof supabase.storage}</p>
                        <p class="info">Database module: ${typeof supabase.from}</p>
                    `;
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ Supabase client not properly initialized</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error importing supabase-client:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 2: Supabase.js Import
        window.testSupabaseJS = async () => {
            const resultDiv = document.getElementById('supabase-result');
            resultDiv.innerHTML = '<p class="info">Testing supabase.js import...</p>';
            
            try {
                const supabaseModule = await import('./js/supabase.js');
                
                const expectedFunctions = ['getMyBusiness', 'getAccountAndCompleteness', 'isAuthenticated', 'getUser'];
                const availableFunctions = Object.keys(supabaseModule).filter(key => typeof supabaseModule[key] === 'function');
                
                const missingFunctions = expectedFunctions.filter(fn => !availableFunctions.includes(fn));
                
                if (missingFunctions.length === 0) {
                    resultDiv.innerHTML = `
                        <p class="success">✅ Supabase.js imported successfully</p>
                        <p class="info">Available functions: ${availableFunctions.join(', ')}</p>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <p class="error">❌ Missing functions: ${missingFunctions.join(', ')}</p>
                        <p class="info">Available functions: ${availableFunctions.join(', ')}</p>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error importing supabase.js:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 3: Auth Functions
        window.testAuthFunctions = async () => {
            const resultDiv = document.getElementById('auth-result');
            resultDiv.innerHTML = '<p class="info">Testing auth functions...</p>';
            
            try {
                const { isAuthenticated, getUser } = await import('./js/supabase.js');
                
                const authResult = await isAuthenticated();
                const userResult = await getUser();
                
                resultDiv.innerHTML = `
                    <p class="success">✅ Auth functions work correctly</p>
                    <p class="info">isAuthenticated(): ${authResult}</p>
                    <p class="info">getUser(): ${userResult ? 'User found' : 'No user'}</p>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing auth functions:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 4: Business Functions
        window.testBusinessFunctions = async () => {
            const resultDiv = document.getElementById('business-result');
            resultDiv.innerHTML = '<p class="info">Testing business functions...</p>';
            
            try {
                const { getMyBusiness, getAccountAndCompleteness } = await import('./js/supabase.js');
                
                const businessResult = await getMyBusiness();
                const accountResult = await getAccountAndCompleteness();
                
                resultDiv.innerHTML = `
                    <p class="success">✅ Business functions work correctly</p>
                    <p class="info">getMyBusiness() format: ${businessResult && typeof businessResult === 'object' && 'business' in businessResult ? '✅' : '❌'}</p>
                    <p class="info">getAccountAndCompleteness() format: ${accountResult && typeof accountResult === 'object' && 'business' in accountResult ? '✅' : '❌'}</p>
                    <pre>${JSON.stringify(businessResult, null, 2)}</pre>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing business functions:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Auto-run on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🔧 Supabase Imports Test loaded');
            console.log('Click the buttons above to test the imports');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase Integration Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        pre { background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>🧪 Supabase Integration Test</h1>
    
    <div class="test-section">
        <h2>1. Test Business Query</h2>
        <p>Test the new getMyBusiness() function:</p>
        <button onclick="testBusinessQuery()">Test Business Query</button>
        <div id="business-result"></div>
    </div>

    <div class="test-section">
        <h2>2. Test File Upload</h2>
        <p>Test file upload to business-files bucket:</p>
        <button onclick="testFileUpload()">Test File Upload</button>
        <div id="upload-result"></div>
    </div>

    <div class="test-section">
        <h2>3. Test Compatibility View</h2>
        <p>Test the accounts compatibility view:</p>
        <button onclick="testCompatibilityView()">Test Compatibility View</button>
        <div id="compatibility-result"></div>
    </div>

    <div class="test-section">
        <h2>4. Test Error Handling</h2>
        <p>Test graceful error handling:</p>
        <button onclick="testErrorHandling()">Test Error Handling</button>
        <div id="error-result"></div>
    </div>

    <script type="module">
        import { supabase } from './js/supabase-client.js';

        // Test business query
        window.testBusinessQuery = async () => {
            const resultDiv = document.getElementById('business-result');
            resultDiv.innerHTML = '<p class="info">Testing business query...</p>';
            
            try {
                const { data: { user }, error: userError } = await supabase.auth.getUser();
                if (userError) throw userError;
                
                if (!user) {
                    resultDiv.innerHTML = '<p class="error">No authenticated user found. Please log in first.</p>';
                    return;
                }

                const { data, error } = await supabase
                    .from('businesses')
                    .select('id,name,owner_id,is_active,created_at')
                    .eq('owner_id', user.id)
                    .limit(1);

                if (error) throw error;

                if (data && data.length > 0) {
                    resultDiv.innerHTML = `
                        <p class="success">✅ Business query successful!</p>
                        <pre>${JSON.stringify(data[0], null, 2)}</pre>
                    `;
                } else {
                    resultDiv.innerHTML = '<p class="info">ℹ️ No business found for this user (this is normal for new users)</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Business query failed:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test file upload
        window.testFileUpload = async () => {
            const resultDiv = document.getElementById('upload-result');
            resultDiv.innerHTML = '<p class="info">Testing file upload...</p>';
            
            try {
                const { data: { user }, error: userError } = await supabase.auth.getUser();
                if (userError) throw userError;
                
                if (!user) {
                    resultDiv.innerHTML = '<p class="error">No authenticated user found. Please log in first.</p>';
                    return;
                }

                // Create test file
                const file = new File(["Hello from Supabase test!"], "test.txt", { type: "text/plain" });
                const path = `${user.id}/smoketest-${Date.now()}.txt`;
                
                const { data, error } = await supabase.storage
                    .from('business-files')
                    .upload(path, file, { upsert: true });

                if (error) throw error;

                resultDiv.innerHTML = `
                    <p class="success">✅ File upload successful!</p>
                    <pre>Path: ${data.path}</pre>
                    <p class="info">File uploaded to: business-files/${data.path}</p>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ File upload failed:</p>
                    <pre>${error.message}</pre>
                    <p class="info">Make sure the 'business-files' bucket exists in your Supabase Dashboard</p>
                `;
            }
        };

        // Test compatibility view
        window.testCompatibilityView = async () => {
            const resultDiv = document.getElementById('compatibility-result');
            resultDiv.innerHTML = '<p class="info">Testing compatibility view...</p>';
            
            try {
                const { data: { user }, error: userError } = await supabase.auth.getUser();
                if (userError) throw userError;
                
                if (!user) {
                    resultDiv.innerHTML = '<p class="error">No authenticated user found. Please log in first.</p>';
                    return;
                }

                const { data, error } = await supabase
                    .from('accounts')
                    .select('id,name,owner_user_id,status,is_active')
                    .eq('owner_user_id', user.id)
                    .limit(1);

                if (error) throw error;

                if (data && data.length > 0) {
                    resultDiv.innerHTML = `
                        <p class="success">✅ Compatibility view working!</p>
                        <pre>${JSON.stringify(data[0], null, 2)}</pre>
                    `;
                } else {
                    resultDiv.innerHTML = '<p class="info">ℹ️ No data found in compatibility view</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Compatibility view failed:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test error handling
        window.testErrorHandling = async () => {
            const resultDiv = document.getElementById('error-result');
            resultDiv.innerHTML = '<p class="info">Testing error handling...</p>';
            
            try {
                // Test with invalid table name
                const { data, error } = await supabase
                    .from('invalid_table')
                    .select('*')
                    .limit(1);

                if (error) {
                    resultDiv.innerHTML = `
                        <p class="success">✅ Error handling working!</p>
                        <pre>Error caught: ${error.message}</pre>
                    `;
                } else {
                    resultDiv.innerHTML = '<p class="info">ℹ️ No error occurred (unexpected)</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="success">✅ Error handling working!</p>
                    <pre>Exception caught: ${error.message}</pre>
                `;
            }
        };

        // Auto-run tests on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🧪 Supabase Integration Test loaded');
            console.log('Click the buttons above to test each functionality');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase Update Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        button { padding: 10px 20px; margin: 5px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        pre { background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>🧪 Supabase Update Test</h1>
    
    <div class="test-section">
        <h2>1. Test Supabase Client Export</h2>
        <p>Verify that the supabase client instance is properly exported</p>
        <button onclick="testSupabaseClient()">Test Supabase Client</button>
        <div id="client-result"></div>
    </div>

    <div class="test-section">
        <h2>2. Test getMyBusiness Function</h2>
        <p>Test the new getMyBusiness function</p>
        <button onclick="testGetMyBusiness()">Test getMyBusiness</button>
        <div id="business-result"></div>
    </div>

    <div class="test-section">
        <h2>3. Test getAccountAndCompleteness Alias</h2>
        <p>Test the compatibility alias function</p>
        <button onclick="testAccountCompleteness()">Test getAccountAndCompleteness</button>
        <div id="account-result"></div>
    </div>

    <div class="test-section">
        <h2>4. Test Import Compatibility</h2>
        <p>Test that owner-activities.js can import getAccountAndCompleteness</p>
        <button onclick="testImportCompatibility()">Test Import Compatibility</button>
        <div id="import-result"></div>
    </div>

    <script type="module">
        // Test 1: Supabase Client Export
        window.testSupabaseClient = async () => {
            const resultDiv = document.getElementById('client-result');
            resultDiv.innerHTML = '<p class="info">Testing supabase client export...</p>';
            
            try {
                const { supabase } = await import('./js/supabase.js');
                
                if (supabase && typeof supabase.auth.getUser === 'function') {
                    resultDiv.innerHTML = '<p class="success">✅ Supabase client instance exported correctly</p>';
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ Supabase client not properly exported</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error importing supabase client:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 2: getMyBusiness Function
        window.testGetMyBusiness = async () => {
            const resultDiv = document.getElementById('business-result');
            resultDiv.innerHTML = '<p class="info">Testing getMyBusiness function...</p>';
            
            try {
                const { getMyBusiness } = await import('./js/supabase.js');
                
                if (typeof getMyBusiness === 'function') {
                    const result = await getMyBusiness();
                    
                    if (result && typeof result === 'object' && 'business' in result && 'completeness' in result) {
                        resultDiv.innerHTML = `
                            <p class="success">✅ getMyBusiness function works correctly</p>
                            <pre>${JSON.stringify(result, null, 2)}</pre>
                        `;
                    } else {
                        resultDiv.innerHTML = '<p class="error">❌ getMyBusiness returned unexpected format</p>';
                    }
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ getMyBusiness is not a function</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing getMyBusiness:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 3: getAccountAndCompleteness Alias
        window.testAccountCompleteness = async () => {
            const resultDiv = document.getElementById('account-result');
            resultDiv.innerHTML = '<p class="info">Testing getAccountAndCompleteness alias...</p>';
            
            try {
                const { getAccountAndCompleteness } = await import('./js/supabase.js');
                
                if (typeof getAccountAndCompleteness === 'function') {
                    const result = await getAccountAndCompleteness();
                    
                    if (result && typeof result === 'object' && 'business' in result && 'completeness' in result) {
                        resultDiv.innerHTML = `
                            <p class="success">✅ getAccountAndCompleteness alias works correctly</p>
                            <pre>${JSON.stringify(result, null, 2)}</pre>
                        `;
                    } else {
                        resultDiv.innerHTML = '<p class="error">❌ getAccountAndCompleteness returned unexpected format</p>';
                    }
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ getAccountAndCompleteness is not a function</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing getAccountAndCompleteness:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Test 4: Import Compatibility
        window.testImportCompatibility = async () => {
            const resultDiv = document.getElementById('import-result');
            resultDiv.innerHTML = '<p class="info">Testing import compatibility...</p>';
            
            try {
                // Test the exact import that owner-activities.js would use
                const { getAccountAndCompleteness, supabase } = await import('./js/supabase.js');
                
                if (typeof getAccountAndCompleteness === 'function' && supabase) {
                    resultDiv.innerHTML = `
                        <p class="success">✅ Import compatibility test passed</p>
                        <p class="info">owner-activities.js can now import both:</p>
                        <pre>import { getAccountAndCompleteness, supabase } from './supabase.js';</pre>
                    `;
                } else {
                    resultDiv.innerHTML = '<p class="error">❌ Import compatibility test failed</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p class="error">❌ Error testing import compatibility:</p>
                    <pre>${error.message}</pre>
                `;
            }
        };

        // Auto-run on load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🧪 Supabase Update Test loaded');
            console.log('Click the buttons above to test each functionality');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <script>
    window.SUPABASE_URL = "https://gidbvemmqffogakcepka.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w";
  </script>
  <script type="module" src="js/supabase-client.js?v=20"></script>
<script type="module" src="js/auth-session.js?v=1"></script>
  <script type="module" src="js/site-header.js?v=1"></script>
  <title>Auth Verification</title>
  <link rel="stylesheet" href="css/header.css?v=1">
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
</head>
<body>
  <div id="site-header"></div>
  <h1>Auth Verification</h1>
  <div id="status">Loading...</div>
  
  <script type="module">
    try {
      const { supabase } = await import('./src/lib/supabase-client.js');
      document.getElementById('status').innerHTML = '✅ Supabase client loaded successfully<br>';
      
      const { data: { user }, error } = await supabase.auth.getUser();
      if (error) {
        document.getElementById('status').innerHTML += `❌ Auth error: ${error.message}`;
      } else if (user) {
        document.getElementById('status').innerHTML += `✅ User signed in: ${user.email}`;
      } else {
        document.getElementById('status').innerHTML += 'ℹ️ No user signed in';
      }
      
      // Test auth state change
      supabase.auth.onAuthStateChange((event, session) => {
        console.log('Auth state change:', event, session?.user?.email);
        document.getElementById('status').innerHTML += `<br>🔄 Auth state changed: ${event}`;
      });
      
    } catch (error) {
      document.getElementById('status').innerHTML = `❌ Error: ${error.message}`;
      console.error('Verification error:', error);
    }
  </script>
</body>
</html>
