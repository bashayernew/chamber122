<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>My Business | Chamber122</title>
  <meta name="description" content="Manage your business listing on Chamber122. Update information, upload new logos, and track your listing status.">
  
  <link rel="stylesheet" href="css/style.css?v=16">
  <link rel="stylesheet" href="css/header.css?v=1">
  <link rel="stylesheet" href="css/responsive-enhancements.css">
  <link rel="stylesheet" href="public/css/main.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" crossorigin="anonymous">
  
  <style>
    .tab{background:#0f0f0f;color:#ddd;padding:.5rem .8rem;border-radius:.6rem}
    .tab.active{background:#1a1a1a;color:#fff;border:1px solid #333}
    .tab-pane.hidden{display:none}
  </style>
</head>
<body data-page="owner">
  <!-- Global Header -->
  <div id="site-header"></div>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">

      </a>
      <div class="nav-menu">
        <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
        <a href="directory.html" class="nav-link" data-i18n="nav.directory">Directory</a>
        <a href="events.html" class="nav-link" data-i18n="nav.events">Events</a>
        <a href="bulletin.html" class="nav-link" data-i18n="nav.bulletin">Bulletin</a>
        <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
        <a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a>
      </div>
      <div class="nav-actions">
        <!-- Language toggle -->
        <span id="lang-toggle" class="lang-toggle" aria-label="Language">
          <button data-lang="en" class="lang-btn">EN</button> |
          <button data-lang="ar" class="lang-btn">AR</button>
        </span>
        <!-- Auth slot for session-aware header -->
        <span id="auth-slot">
          <a class="btn" href="/auth.html#login">Login</a>
          <a class="btn primary" href="/auth.html#signup">Sign Up &amp; Get Listed</a>
        </span>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobile-menu">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="directory.html" class="mobile-link">Directory</a>
      <a href="events.html" class="mobile-link">Events</a>
      <a href="bulletin.html" class="mobile-link">Bulletin</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="contact.html" class="mobile-link">Contact</a>
      <div class="mobile-divider"></div>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-building"></i>
        My Business
      </a>
      <a href="owner.html" class="mobile-link">
        <i class="fas fa-calendar-alt"></i>
        My Activities
      </a>
      <a href="admin.html" class="mobile-link">
        <i class="fas fa-cog"></i>
        Admin Panel
      </a>
      <div class="mobile-divider"></div>
      <a href="auth.html" class="mobile-link">
        <i class="fas fa-sign-in-alt"></i>
        Login
      </a>
      <a href="get-listed.html" class="mobile-link">
        <i class="fas fa-user-plus"></i>
        Sign Up & Get Listed
      </a>
    </div>
    </div>
  </nav>

<!-- PROFILE: VIEW MODE -->
<section class="container profile-wrap">
  <div class="profile-header card">
    <div class="avatar-wrap">
      <img id="biz-logo" alt="Business Logo" class="avatar" />
    </div>
    <div class="title-wrap">
      <h1 id="biz-name" class="title">Business Profile</h1>
      <div class="title-row">
        <span id="status-badge" class="badge">pending</span>
        <span id="visibility-badge" class="chip">No (draft)</span>
        <span id="last-updated" class="muted"></span>
      </div>
    </div>
    <div class="actions">
      <a id="edit-link" href="/owner-form.html" class="btn btn-primary owner-only">Edit Profile</a>
      <a id="inbox-btn" href="/inbox.html" class="btn btn-secondary owner-only" style="display: none;">
        <i class="fas fa-inbox"></i> Inbox
      </a>
      <button id="message-btn" class="btn btn-secondary" style="display: none;">
        <i class="fas fa-envelope"></i> Message
      </button>
    </div>
  </div>

  <div class="card">
    <h2 class="section-title">Business Description</h2>
    <div id="description" class="description-text"></div>
  </div>

  <div class="card">
    <h2 class="section-title">Our Story</h2>
    <div id="story" class="story-text"></div>
  </div>

  <div class="card">
    <h2 class="section-title">Contact & Location</h2>
    <div class="details-grid">
      <div><span class="label">Phone</span><a id="phone" class="value" href="#"></a></div>
      <div><span class="label">WhatsApp</span><a id="whatsapp" class="value" href="#"></a></div>
      <div><span class="label">Website</span><a id="website" class="value" href="#" target="_blank" rel="noopener"></a></div>
      <div><span class="label">Instagram</span><a id="instagram" class="value" href="#" target="_blank" rel="noopener"></a></div>

      <div><span class="label">Country</span><span id="country" class="value"></span></div>
      <div><span class="label">City</span><span id="city" class="value"></span></div>
      <div><span class="label">Area</span><span id="area" class="value"></span></div>
      <div><span class="label">Block</span><span id="block" class="value"></span></div>
      <div><span class="label">Street</span><span id="street" class="value"></span></div>
      <div><span class="label">Floor</span><span id="floor" class="value"></span></div>
      <div><span class="label">Office No</span><span id="office_no" class="value"></span></div>

      <div class="full"><span class="label">Industry</span><span id="industry" class="value"></span></div>
    </div>
  </div>

  <section class="card">
    <h3 class="section-title">Gallery</h3>
    <div id="gallery" class="gallery-grid"></div>
  </section>

  <section class="card mt-8">
    <h2 class="section-title">Events</h2>
    <div class="tabs mb-4 flex gap-2">
      <button class="tab active" data-tab="ev-all">All</button>
      <button class="tab" data-tab="ev-ongoing">Ongoing</button>
      <button class="tab" data-tab="ev-upcoming">Upcoming</button>
      <button class="tab" data-tab="ev-previous">Previous</button>
    </div>
    <div id="ev-all" class="tab-pane"></div>
    <div id="ev-ongoing" class="tab-pane hidden"></div>
    <div id="ev-upcoming" class="tab-pane hidden"></div>
    <div id="ev-previous" class="tab-pane hidden"></div>
  </section>

  <section class="card mt-8">
    <h2 class="section-title">Bulletins</h2>
    <div class="tabs mb-4 flex gap-2">
      <button class="tab active" data-tab="bl-all">All</button>
      <button class="tab" data-tab="bl-ongoing">Ongoing</button>
      <button class="tab" data-tab="bl-upcoming">Upcoming</button>
      <button class="tab" data-tab="bl-previous">Previous</button>
    </div>
    <div id="bl-all" class="tab-pane"></div>
    <div id="bl-ongoing" class="tab-pane hidden"></div>
    <div id="bl-upcoming" class="tab-pane hidden"></div>
    <div id="bl-previous" class="tab-pane hidden"></div>
  </section>

</section>
<!-- View-mode logic -->
  <!-- Main dependencies -->
  <script type="module" src="/js/main.js?v=7"></script>

  <script type="module">
    (async function() {
      const { loadOwnerEventsAndBulletins } = await import('/assets/js/profile-events.js');
      const { renderList } = await import('/assets/js/ui-cards.js');
      const { eventCardPretty, bulletinCardPretty } = await import('/assets/js/ui-cards-extended.js');
      const { getCurrentUser, getMyBusiness, getBusinessById } = await import('/js/api.js');
      await import('/assets/js/refresh-displays.js');
      const { loadAndDisplayBusiness } = await import('/js/owner.js');

      // Determine which owner profile we're viewing
      // First check URL parameter for businessId (for viewing other businesses)
      const urlParams = new URLSearchParams(window.location.search);
      const businessIdFromUrl = urlParams.get('businessId');
      
      let ownerId = businessIdFromUrl || window.OWNER_ID || window.currentOwnerId;
      
      // If no owner ID set, get from current user's business
      if (!ownerId) {
        const user = await getCurrentUser();
        if (user) {
          try {
            const businessResponse = await getMyBusiness();
            // getMyBusiness returns { ok: true, business: {...} }
            const business = businessResponse && businessResponse.business ? businessResponse.business : null;
            
            if (business) {
              ownerId = business.id;
              console.log('[owner] Found business ID:', ownerId);
            } else {
              // No business found - redirect to form page ONCE
              console.log('[owner] No business found for user, redirecting to form');
              if (confirm('No business profile found. Would you like to create one?')) {
                window.location.href = '/owner-form.html';
              }
              // Exit early - don't continue initialization
              ownerId = null;
            }
          } catch (err) {
            console.error('[owner] Exception fetching business:', err);
          }
        }
      }
      
      // Store ownerId in window scope so init() can access it
      window.currentOwnerId = ownerId;
      
      // Check if this is a reload after profile update
      const updated = urlParams.get('updated');
      if (updated) {
        console.log('[owner] Profile was updated, forcing fresh data load');
        // Clear any cached data and force reload
        if ('caches' in window) {
          caches.keys().then(names => {
            names.forEach(name => caches.delete(name));
          });
        }
      }
      
      // Load business data for display (works for both own and other businesses)
      if (ownerId) {
        await loadAndDisplayBusiness(ownerId);
      }

    // Tab behavior
    function wireTabs() {
      document.querySelectorAll('.tabs .tab').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const group = btn.closest('section');
          group.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          const target = btn.dataset.tab;
          group.querySelectorAll('.tab-pane').forEach(p=>p.classList.add('hidden'));
          group.querySelector(`#${target}`)?.classList.remove('hidden');
        });
      });
    }

    let isOwnerViewing = false; // Store isOwner in outer scope for real-time updates

    // Function to count unread messages
    function getUnreadMessageCount(userId) {
      try {
        const inboxMessages = JSON.parse(localStorage.getItem('ch122_inbox_messages') || '[]');
        
        // Filter messages for this user
        const userMessages = inboxMessages.filter(m => 
          (m.toUserId === userId || m.user_id === userId) && m.from === 'admin'
        );
        
        // Count unread messages (messages without read_at timestamp)
        const unreadCount = userMessages.filter(m => {
          const hasReadAt = m.read_at && m.read_at.trim() !== '';
          const isExplicitlyUnread = m.unread === true;
          const isNotExplicitlyRead = m.unread !== false;
          
          // Message is unread if it doesn't have read_at timestamp
          return !hasReadAt && (isExplicitlyUnread || isNotExplicitlyRead);
        }).length;
        
        return unreadCount;
      } catch (error) {
        console.warn('[owner] Error counting unread messages:', error);
        return 0;
      }
    }

    // Function to update inbox button badge
    function updateInboxBadge(inboxBtn, userId) {
      if (!inboxBtn || !userId) return;
      
      const unreadCount = getUnreadMessageCount(userId);
      
      // Remove existing badge if any
      const existingBadge = inboxBtn.querySelector('.inbox-badge');
      if (existingBadge) {
        existingBadge.remove();
      }
      
      // Add badge if there are unread messages
      if (unreadCount > 0) {
        const badge = document.createElement('span');
        badge.className = 'inbox-badge';
        badge.style.cssText = 'position:absolute;top:-6px;right:-6px;background:#ef4444;color:white;border-radius:10px;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;padding:0 5px;border:2px solid #fff;';
        badge.textContent = unreadCount > 99 ? '99+' : unreadCount.toString();
        
        // Make sure the button has position relative
        if (getComputedStyle(inboxBtn).position === 'static') {
          inboxBtn.style.position = 'relative';
        }
        
        inboxBtn.appendChild(badge);
      }
    }

    async function init() {
      // Get ownerId from window scope
      const ownerId = window.currentOwnerId;
      
      // If still no ownerId after all checks, show message and exit
      if (!ownerId) {
        console.warn('[owner] No ownerId available, cannot load profile');
        document.body.innerHTML = '<div style="padding: 40px; text-align: center; color: #AFAFAF;"><h2>No Business Profile</h2><p>Please create a business profile first.</p><a href="/owner-form.html" style="color: #f2c64b;">Create Profile</a></div>';
        return; // Exit early - this is valid inside a function
      }
      
      wireTabs();

      const user = await getCurrentUser();
      // Check if current user owns the business being viewed
      let isOwner = false;
      if (user && ownerId) {
        const businessResponse = await getMyBusiness();
        const business = businessResponse && businessResponse.business ? businessResponse.business : null;
        isOwner = business && business.id === ownerId;
      }
      isOwnerViewing = isOwner; // Store in outer scope
      
      // Show/hide owner-only elements
      if (isOwner) {
        // Show owner-only elements (Edit Profile, Inbox)
        document.querySelectorAll('.owner-only').forEach(el => {
          el.style.display = '';
          if (el.classList.contains('btn')) {
            el.style.display = 'inline-block';
          }
        });
        
        // Show inbox button specifically and update badge
        const inboxBtn = document.getElementById('inbox-btn');
        if (inboxBtn) {
          inboxBtn.style.display = 'inline-block';
          updateInboxBadge(inboxBtn, user.id);
        }
      } else {
        // Hide/remove owner-only elements for non-owners
        document.querySelectorAll('.owner-only').forEach(el=>el.remove());
      }
      
      // Show message button if viewing someone else's profile
      const messageBtn = document.getElementById('message-btn');
      if (messageBtn && !isOwner && user) {
        messageBtn.style.display = 'inline-block';
        messageBtn.onclick = async () => {
          try {
            // Get business owner ID from the business we're viewing
            const { getBusinessById: getBusinessByIdFromAuth } = await import('/js/auth-localstorage.js');
            const business = getBusinessByIdFromAuth(ownerId);
            if (business && business.owner_id) {
              // Show message modal
              openMessageModal(business);
            } else {
              alert('Unable to start conversation. Please try again.');
            }
          } catch (err) {
            console.error('[owner] Error starting conversation:', err);
            alert('Error starting conversation. Please try again.');
          }
        };
      } else if (messageBtn) {
        messageBtn.style.display = 'none';
      }
      
      // Message modal function
      function openMessageModal(business) {
        // Create modal if it doesn't exist
        let modal = document.getElementById('message-modal');
        if (!modal) {
          modal = document.createElement('div');
          modal.id = 'message-modal';
          modal.style.cssText = 'position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 10000;';
          modal.innerHTML = `
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px; width: 90%; max-width: 600px; max-height: 90vh; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 20px 60px rgba(0,0,0,0.5);">
              <div style="padding: 24px; border-bottom: 1px solid #2a2a2a; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
                <h2 style="margin: 0; color: #fff; font-size: 20px; font-weight: 600;">Send Message</h2>
                <button id="close-message-modal" style="background: none; border: none; color: #AFAFAF; font-size: 24px; cursor: pointer; padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 6px; transition: all 0.2s;" onmouseover="this.style.background='#2a2a2a'; this.style.color='#fff'" onmouseout="this.style.background='none'; this.style.color='#AFAFAF'">&times;</button>
              </div>
              <div style="padding: 24px; overflow-y: auto; flex: 1;">
                <div style="margin-bottom: 20px;">
                  <label style="display: block; color: #AFAFAF; font-size: 14px; font-weight: 500; margin-bottom: 8px;">To</label>
                  <div style="background: #0f0f0f; border: 1px solid #2a2a2a; border-radius: 8px; padding: 12px; color: #fff; font-size: 15px;">
                    ${business.name || business.business_name || 'Business Owner'}
                  </div>
                </div>
                <div style="margin-bottom: 20px;">
                  <label for="message-subject" style="display: block; color: #AFAFAF; font-size: 14px; font-weight: 500; margin-bottom: 8px;">Subject *</label>
                  <input type="text" id="message-subject" placeholder="Enter message subject" style="width: 100%; padding: 12px; background: #0f0f0f; border: 1px solid #2a2a2a; border-radius: 8px; color: #fff; font-size: 15px; box-sizing: border-box;" value="Message about ${business.name || business.business_name || 'your business'}">
                </div>
                <div style="margin-bottom: 24px;">
                  <label for="message-body" style="display: block; color: #AFAFAF; font-size: 14px; font-weight: 500; margin-bottom: 8px;">Message *</label>
                  <textarea id="message-body" placeholder="Enter your message..." rows="6" style="width: 100%; padding: 12px; background: #0f0f0f; border: 1px solid #2a2a2a; border-radius: 8px; color: #fff; font-size: 15px; font-family: inherit; resize: vertical; box-sizing: border-box;"></textarea>
                </div>
              </div>
              <div style="padding: 20px; border-top: 1px solid #2a2a2a; display: flex; gap: 12px; justify-content: flex-end; flex-shrink: 0;">
                <button id="cancel-message" style="padding: 10px 20px; background: #2a2a2a; border: 1px solid #3a3a3a; color: #fff; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s;" onmouseover="this.style.background='#333'; this.style.borderColor='#444'" onmouseout="this.style.background='#2a2a2a'; this.style.borderColor='#3a3a3a'">Cancel</button>
                <button id="send-message" style="padding: 10px 24px; background: linear-gradient(135deg, #f2c64b, #f59e0b); color: #111; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.opacity='0.9'; this.style.transform='translateY(-1px)'" onmouseout="this.style.opacity='1'; this.style.transform='translateY(0)'">
                  <i class="fas fa-paper-plane" style="margin-right: 6px;"></i> Send Message
                </button>
              </div>
            </div>
          `;
          document.body.appendChild(modal);
          
          // Close modal handlers
          document.getElementById('close-message-modal').onclick = () => closeMessageModal();
          document.getElementById('cancel-message').onclick = () => closeMessageModal();
          modal.onclick = (e) => {
            if (e.target === modal) closeMessageModal();
          };
          
          // Send message handler
          document.getElementById('send-message').onclick = async () => {
            const subject = document.getElementById('message-subject').value.trim();
            const body = document.getElementById('message-body').value.trim();
            
            if (!subject || !body) {
              alert('Please fill in both subject and message fields.');
              return;
            }
            
            try {
              const sendBtn = document.getElementById('send-message');
              sendBtn.disabled = true;
              sendBtn.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-right: 6px;"></i> Sending...';
              
              const { sendMessage } = await import('/js/messaging.js');
              await sendMessage(business.owner_id, subject, body);
              
              closeMessageModal();
              alert('Message sent successfully!');
              window.location.href = '/inbox.html';
            } catch (err) {
              console.error('[owner] Error sending message:', err);
              alert('Error sending message: ' + (err.message || 'Please try again'));
              const sendBtn = document.getElementById('send-message');
              sendBtn.disabled = false;
              sendBtn.innerHTML = '<i class="fas fa-paper-plane" style="margin-right: 6px;"></i> Send Message';
            }
          };
        }
        
        // Show modal
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        
        // Focus on subject input
        setTimeout(() => {
          const subjectInput = document.getElementById('message-subject');
          if (subjectInput) subjectInput.focus();
        }, 100);
      }
      
      function closeMessageModal() {
        const modal = document.getElementById('message-modal');
        if (modal) {
          modal.style.display = 'none';
          document.body.style.overflow = '';
          // Clear form
          const subject = document.getElementById('message-subject');
          const body = document.getElementById('message-body');
          if (subject) subject.value = '';
          if (body) body.value = '';
        }
      }

      // Load events and bulletins - pass isOwner flag to show drafts if viewing own profile
      if (ownerId) {
        console.log('[owner] Loading events and bulletins for business ID:', ownerId, 'isOwner:', isOwner);
        try {
          const data = await loadOwnerEventsAndBulletins(ownerId, isOwner);

          console.log('[owner] Loaded data:', {
            eventsOngoing: data.events.ongoing?.length || 0,
            eventsUpcoming: data.events.upcoming?.length || 0,
            eventsPrevious: data.events.previous?.length || 0,
            bulletinsOngoing: data.bulletins.ongoing?.length || 0,
            bulletinsUpcoming: data.bulletins.upcoming?.length || 0,
            bulletinsPrevious: data.bulletins.previous?.length || 0
          });
          
          // Debug: Log first event and bulletin to check data structure
          if (data.events.ongoing?.length > 0) {
            console.log('[owner] Sample event:', data.events.ongoing[0]);
          }
          if (data.bulletins.ongoing?.length > 0) {
            console.log('[owner] Sample bulletin:', data.bulletins.ongoing[0]);
          }

      // Registrations section removed - now only shown on /registrations.html page

      // Show registration buttons for non-owners viewing the profile
          const showReg = !isOwner;
          
          // Combine all events for "All" tab - show owner controls if viewing own profile
          const allEvents = [...data.events.ongoing, ...data.events.upcoming, ...data.events.previous];
          renderList(document.getElementById('ev-all'), allEvents, (e) => eventCardPretty(e, isOwner), 'No events.');
          
          renderList(document.getElementById('ev-ongoing'),  data.events.ongoing,  (e) => eventCardPretty(e, isOwner), 'No ongoing events.');
          renderList(document.getElementById('ev-upcoming'), data.events.upcoming, (e) => eventCardPretty(e, isOwner), 'No upcoming events.');
          renderList(document.getElementById('ev-previous'), data.events.previous, (e) => eventCardPretty(e, isOwner), 'No previous events.');

          // Combine all bulletins for "All" tab - show owner controls if viewing own profile
          const allBulletins = [...data.bulletins.ongoing, ...data.bulletins.upcoming, ...data.bulletins.previous];
          renderList(document.getElementById('bl-all'), allBulletins, (b) => bulletinCardPretty(b, isOwner), 'No bulletins.');
          
          renderList(document.getElementById('bl-ongoing'), data.bulletins.ongoing, (b) => bulletinCardPretty(b, isOwner), 'No ongoing bulletins.');
          renderList(document.getElementById('bl-upcoming'), data.bulletins.upcoming, (b) => bulletinCardPretty(b, isOwner), 'No upcoming bulletins.');
          renderList(document.getElementById('bl-previous'), data.bulletins.previous, (b) => bulletinCardPretty(b, isOwner), 'No previous bulletins.');
        } catch (error) {
          console.error('[owner] Error loading events/bulletins:', error);
        }
      } else {
        console.log('[owner] No ownerId found, cannot load events/bulletins');
        // Show message to user
        const evContainer = document.getElementById('ev-ongoing');
        const blContainer = document.getElementById('bl-ongoing');
        if (evContainer) {
          evContainer.innerHTML = '<p style="text-align: center; color: #AFAFAF; padding: 20px;">Please create a business profile first.</p>';
        }
        if (blContainer) {
          blContainer.innerHTML = '<p style="text-align: center; color: #AFAFAF; padding: 20px;">Please create a business profile first.</p>';
        }
      }

      // Registrations are now shown on the dedicated /registrations.html page, not on the profile
      
      // Real-time updates removed - use polling or manual refresh instead
      // Can be re-implemented later with WebSockets if needed
    }

      init();
      
      // Update inbox badge when page becomes visible (user returns from inbox page)
      document.addEventListener('visibilitychange', async () => {
        if (!document.hidden) {
          const user = await getCurrentUser();
          if (user) {
            const inboxBtn = document.getElementById('inbox-btn');
            if (inboxBtn && inboxBtn.style.display !== 'none') {
              updateInboxBadge(inboxBtn, user.id);
            }
          }
        }
      });
      
      // Also listen for custom events from inbox page
      window.addEventListener('inbox-updated', async () => {
        const user = await getCurrentUser();
        if (user) {
          const inboxBtn = document.getElementById('inbox-btn');
          if (inboxBtn && inboxBtn.style.display !== 'none') {
            updateInboxBadge(inboxBtn, user.id);
          }
        }
      });
      
      // Helper function to reload events and bulletins without full page reload
      async function reloadEventsAndBulletins() {
        try {
          const ownerId = window.currentOwnerId;
          if (!ownerId) {
            window.location.reload();
            return;
          }
          
          const { loadOwnerEventsAndBulletins } = await import('/assets/js/profile-events.js');
          const { renderList } = await import('/assets/js/ui-cards.js');
          const { eventCardPretty, bulletinCardPretty } = await import('/assets/js/ui-cards-extended.js');
          
          // Determine if user is owner
          const user = await getCurrentUser();
          let isOwner = false;
          if (user && ownerId) {
            const businessResponse = await getMyBusiness();
            const business = businessResponse && businessResponse.business ? businessResponse.business : null;
            isOwner = business && business.id === ownerId;
          }
          
          const data = await loadOwnerEventsAndBulletins(ownerId, isOwner);
          
          // Re-render all event tabs
          const allEvents = [...data.events.ongoing, ...data.events.upcoming, ...data.events.previous];
          renderList(document.getElementById('ev-all'), allEvents, (e) => eventCardPretty(e, isOwner), 'No events.');
          renderList(document.getElementById('ev-ongoing'), data.events.ongoing, (e) => eventCardPretty(e, isOwner), 'No ongoing events.');
          renderList(document.getElementById('ev-upcoming'), data.events.upcoming, (e) => eventCardPretty(e, isOwner), 'No upcoming events.');
          renderList(document.getElementById('ev-previous'), data.events.previous, (e) => eventCardPretty(e, isOwner), 'No previous events.');
          
          // Re-render all bulletin tabs
          const allBulletins = [...data.bulletins.ongoing, ...data.bulletins.upcoming, ...data.bulletins.previous];
          renderList(document.getElementById('bl-all'), allBulletins, (b) => bulletinCardPretty(b, isOwner), 'No bulletins.');
          renderList(document.getElementById('bl-ongoing'), data.bulletins.ongoing, (b) => bulletinCardPretty(b, isOwner), 'No ongoing bulletins.');
          renderList(document.getElementById('bl-upcoming'), data.bulletins.upcoming, (b) => bulletinCardPretty(b, isOwner), 'No upcoming bulletins.');
          renderList(document.getElementById('bl-previous'), data.bulletins.previous, (b) => bulletinCardPretty(b, isOwner), 'No previous bulletins.');
        } catch (err) {
          console.error('[owner] Error reloading events/bulletins:', err);
          // Fallback to full reload if partial reload fails
          window.location.reload();
        }
      }
      
      // Event management functions for owner controls
      window.draftEvent = async function(eventId) {
        try {
          const { updateEventStatus } = await import('/js/api.js');
          await updateEventStatus(eventId, 'draft');
          console.log('[owner] Event saved as draft:', eventId);
          await reloadEventsAndBulletins();
          // Trigger refresh on public pages if refresh function exists
          if (window.refreshEventsAndBulletins) {
            window.refreshEventsAndBulletins();
          }
        } catch (err) {
          console.error('[owner] Error saving event as draft:', err);
          alert('Failed to save event as draft: ' + (err.message || 'Unknown error'));
        }
      };
      
      window.publishEvent = async function(eventId) {
        try {
          const { updateEventStatus } = await import('/js/api.js');
          await updateEventStatus(eventId, 'published');
          console.log('[owner] Event published:', eventId);
          await reloadEventsAndBulletins();
          // Trigger refresh on public pages if refresh function exists
          if (window.refreshEventsAndBulletins) {
            window.refreshEventsAndBulletins();
          }
        } catch (err) {
          console.error('[owner] Error publishing event:', err);
          alert('Failed to publish event: ' + (err.message || 'Unknown error'));
        }
      };
      
      window.editEvent = async function(eventId) {
        window.location.href = `/events.html?edit=${eventId}`;
      };
      
      window.deleteEvent = async function(eventId) {
        if (!confirm('Are you sure you want to delete this event? This action cannot be undone.')) {
          return;
        }
        try {
          const { deleteEventById } = await import('/js/api.js');
          await deleteEventById(eventId);
          console.log('[owner] Event deleted:', eventId);
          await reloadEventsAndBulletins();
        } catch (err) {
          console.error('[owner] Error deleting event:', err);
          alert('Failed to delete event: ' + (err.message || 'Unknown error'));
        }
      };
      
      // Bulletin management functions for owner controls
      window.draftBulletin = async function(bulletinId) {
        try {
          const { updateBulletinStatus } = await import('/js/api.js');
          await updateBulletinStatus(bulletinId, 'draft');
          console.log('[owner] Bulletin saved as draft:', bulletinId);
          await reloadEventsAndBulletins();
          // Trigger refresh on public pages if refresh function exists
          if (window.refreshEventsAndBulletins) {
            window.refreshEventsAndBulletins();
          }
        } catch (err) {
          console.error('[owner] Error saving bulletin as draft:', err);
          alert('Failed to save bulletin as draft: ' + (err.message || 'Unknown error'));
        }
      };
      
      window.publishBulletin = async function(bulletinId) {
        try {
          const { updateBulletinStatus } = await import('/js/api.js');
          await updateBulletinStatus(bulletinId, 'published');
          console.log('[owner] Bulletin published:', bulletinId);
          await reloadEventsAndBulletins();
          // Trigger refresh on public pages if refresh function exists
          if (window.refreshEventsAndBulletins) {
            window.refreshEventsAndBulletins();
          }
        } catch (err) {
          console.error('[owner] Error publishing bulletin:', err);
          alert('Failed to publish bulletin: ' + (err.message || 'Unknown error'));
        }
      };
      
      window.editBulletin = async function(bulletinId) {
        window.location.href = `/bulletin.html?edit=${bulletinId}`;
      };
      
      window.deleteBulletin = async function(bulletinId) {
        if (!confirm('Are you sure you want to delete this bulletin? This action cannot be undone.')) {
          return;
        }
        try {
          const { deleteBulletinById } = await import('/js/api.js');
          await deleteBulletinById(bulletinId);
          console.log('[owner] Bulletin deleted:', bulletinId);
          await reloadEventsAndBulletins();
        } catch (err) {
          console.error('[owner] Error deleting bulletin:', err);
          alert('Failed to delete bulletin: ' + (err.message || 'Unknown error'));
        }
      };
    })();
  </script>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="images/logo.png" alt="Chamber122" />
      </div>
      <div class="footer-section">
        <h3>Chamber122</h3>
        <p>Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3>Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html">Home</a></li>
            <li><a href="directory.html">Directory</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="bulletin.html">Bulletin</a></li>
            <li><a href="get-listed.html">Get Listed</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3>Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | Empowering Kuwait's MSMEs</p>
    </div>
  </footer>

  <!-- 1. Shared API -->
  <script type="module" src="/js/api.js"></script>
  
  <!-- 2. Shared auth header slot -->
  <script type="module" src="/public/js/header-auth-slot.js"></script>
  
  <!-- 3. Page scripts -->
  <script src="/js/i18n.js?v=1"></script>
  <script src="/js/language-switcher.js?v=1"></script>
  <!-- Bulletin Form Modal (for editing from profile) -->
  <div id="bulletinModal" hidden style="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:10000;">
    <div class="modal-card" style="background:#1a1a1a;border:1px solid #2a2a2a;border-radius:12px;width:90%;max-width:600px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;">
      <div class="modal-header" style="padding:20px;border-bottom:1px solid #2a2a2a;display:flex;justify-content:space-between;align-items:center;flex-shrink:0;">
        <h2 style="margin:0;color:#e0e0e0;">Create Bulletin</h2>
        <button id="bClose" class="modal-close" style="background:none;border:none;color:#a0a0a0;font-size:1.5rem;cursor:pointer;width:30px;height:30px;display:flex;align-items:center;justify-content:center;">&times;</button>
      </div>
      <div class="modal-body" style="padding:20px;overflow-y:auto;flex:1;">
        <form id="bulletinForm">
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bType" style="display:block;margin-bottom:5px;color:#e0e0e0;">Type *</label>
            <select id="bType" name="type" required style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
              <option value="">Select bulletin type...</option>
              <option value="announcement">Announcement</option>
              <option value="job">Job Opportunity</option>
              <option value="training">Training/Workshop</option>
              <option value="funding">Funding Information</option>
            </select>
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bTitle" style="display:block;margin-bottom:5px;color:#e0e0e0;">Title *</label>
            <input type="text" id="bTitle" name="title" required placeholder="Enter bulletin title..." style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bDesc" style="display:block;margin-bottom:5px;color:#e0e0e0;">Description *</label>
            <textarea id="bDesc" name="description" required placeholder="Describe your bulletin..." rows="4" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;"></textarea>
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bLoc" style="display:block;margin-bottom:5px;color:#e0e0e0;">Location</label>
            <input type="text" id="bLoc" name="location" placeholder="City or 'Online'" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bDeadline" style="display:block;margin-bottom:5px;color:#e0e0e0;">Deadline</label>
            <input type="date" id="bDeadline" name="deadline" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bPhone" style="display:block;margin-bottom:5px;color:#e0e0e0;">Contact Phone</label>
            <input type="tel" id="bPhone" name="phone" placeholder="+965 XXXX XXXX" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bEmail" style="display:block;margin-bottom:5px;color:#e0e0e0;">Contact Email</label>
            <input type="email" id="bEmail" name="email" placeholder="contact@example.com" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bGovernorate" style="display:block;margin-bottom:5px;color:#e0e0e0;">Governorate</label>
            <select id="bGovernorate" name="governorate" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
              <option value="">Select Governorate...</option>
              <option value="Al Ahmadi">Al Ahmadi</option>
              <option value="Al Farwaniyah">Al Farwaniyah</option>
              <option value="Al Jahra">Al Jahra</option>
              <option value="Hawalli">Hawalli</option>
              <option value="Kuwait City">Kuwait City</option>
              <option value="Mubarak Al-Kabeer">Mubarak Al-Kabeer</option>
            </select>
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bArea" style="display:block;margin-bottom:5px;color:#e0e0e0;">Area</label>
            <select id="bArea" name="area" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
              <option value="">Select Area...</option>
              <option value="Salmiya">Salmiya</option>
              <option value="Hawalli">Hawalli</option>
              <option value="Dasman">Dasman</option>
              <option value="Sharq">Sharq</option>
              <option value="Online">Online</option>
            </select>
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bStreet" style="display:block;margin-bottom:5px;color:#e0e0e0;">Street</label>
            <input type="text" id="bStreet" name="street" placeholder="Street name (optional)" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bBlock" style="display:block;margin-bottom:5px;color:#e0e0e0;">Block</label>
            <input type="text" id="bBlock" name="block" placeholder="Block (optional)" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bFloor" style="display:block;margin-bottom:5px;color:#e0e0e0;">Floor</label>
            <input type="text" id="bFloor" name="floor" placeholder="Floor (optional)" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
          </div>
          <div class="form-group" style="margin-bottom:15px;">
            <label for="bFile" style="display:block;margin-bottom:5px;color:#e0e0e0;">Image (Optional)</label>
            <input type="file" id="bFile" name="image" accept="image/*" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;">
            <div id="bImagePreviewContainer" style="margin-top:10px;display:none;">
              <img id="bImagePreview" src="" alt="Preview" style="max-width:100%;max-height:200px;border-radius:8px;border:1px solid #2a2a2a;">
              <button type="button" id="bRemoveImage" style="margin-top:5px;padding:5px 10px;background:#ff4444;color:#fff;border:none;border-radius:4px;cursor:pointer;">Remove Image</button>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer" style="padding:20px;border-top:1px solid #2a2a2a;display:flex;gap:10px;justify-content:flex-end;flex-shrink:0;">
        <button id="bCancel" style="padding:10px 20px;background:#1a1a1a;border:1px solid #3a3a3a;color:#dcdcdc;border-radius:8px;cursor:pointer;">Cancel</button>
        <button id="bPublish" style="padding:10px 20px;background:var(--gold,#fbbf24);color:#111;border:none;border-radius:8px;cursor:pointer;font-weight:600;">Publish</button>
      </div>
    </div>
  </div>

  <!-- Event Form Modal (for editing from profile) -->
  <div id="event-form-modal" class="event-modal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.8);z-index:10000;">
    <div class="event-modal-content" style="width:min(700px,95vw);max-height:90vh;background:#0f0f0f;color:#eaeaea;border:1px solid #2a2a2a;border-radius:16px;padding:0;overflow:hidden;display:flex;flex-direction:column;">
      <div class="event-modal-header" style="padding:20px;border-bottom:1px solid #2a2a2a;display:flex;justify-content:space-between;align-items:center;">
        <h3 style="margin:0;font-size:20px;color:#ffd166;">Create New Event</h3>
        <button id="close-event-modal" style="background:none;border:none;color:#aaa;font-size:24px;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;">&times;</button>
      </div>
      <div class="event-modal-body" style="padding:20px;max-height:60vh;overflow-y:auto;flex:1;">
        <form id="event-creation-form">
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-type" style="display:block;margin-bottom:8px;font-weight:600;">Event Type</label>
            <select id="event-type" name="type" required style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;">
              <option value="">Select event type...</option>
              <option value="networking">Networking</option>
              <option value="training">Training/Workshop</option>
              <option value="promotion">Promotion/Sale</option>
              <option value="market">Market/Fair</option>
              <option value="workshop">Workshop</option>
              <option value="conference">Conference</option>
              <option value="exhibition">Exhibition</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-title" style="display:block;margin-bottom:8px;font-weight:600;">Event Title *</label>
            <input type="text" id="event-title" name="title" required placeholder="Enter event title..." style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;">
          </div>
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-description" style="display:block;margin-bottom:8px;font-weight:600;">Description</label>
            <textarea id="event-description" name="description" rows="4" placeholder="Describe your event..." style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;resize:vertical;"></textarea>
          </div>
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-image" style="display:block;margin-bottom:8px;font-weight:600;">Event Image (Optional)</label>
            <input type="file" id="event-image" name="image" accept="image/*" style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;">
            <div id="event-image-preview" style="margin-top:12px;display:none;">
              <img id="event-image-preview-img" src="" alt="Preview" style="max-width:100%;max-height:200px;border-radius:8px;border:1px solid #3a3a3a;">
            </div>
          </div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px;">
            <div class="form-group">
              <label for="event-start" style="display:block;margin-bottom:8px;font-weight:600;">Start Date & Time *</label>
              <input type="datetime-local" id="event-start" name="start_at" required style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;">
            </div>
            <div class="form-group">
              <label for="event-end" style="display:block;margin-bottom:8px;font-weight:600;">End Date & Time</label>
              <input type="datetime-local" id="event-end" name="end_at" style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;">
            </div>
          </div>
          <div class="form-group" style="margin-bottom:20px;">
            <label style="display:block;margin-bottom:8px;font-weight:600;">Location</label>
            <select id="event-governorate" name="governorate" style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;margin-bottom:12px;">
              <option value="">Select Governorate...</option>
              <option value="Al Ahmadi">Al Ahmadi</option>
              <option value="Al Farwaniyah">Al Farwaniyah</option>
              <option value="Al Jahra">Al Jahra</option>
              <option value="Hawalli">Hawalli</option>
              <option value="Kuwait City">Kuwait City</option>
              <option value="Mubarak Al-Kabeer">Mubarak Al-Kabeer</option>
            </select>
            <select id="event-area" name="area" style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;margin-bottom:12px;">
              <option value="">Select Area...</option>
              <option value="Salmiya">Salmiya</option>
              <option value="Hawalli">Hawalli</option>
              <option value="Dasman">Dasman</option>
              <option value="Sharq">Sharq</option>
              <option value="Online">Online</option>
            </select>
            <input type="text" id="event-street" name="street" placeholder="Street name (optional)" style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;margin-bottom:12px;">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
              <input type="text" id="event-office" name="office" placeholder="Office number (optional)" style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;">
              <input type="text" id="event-floor" name="floor" placeholder="Floor (optional)" style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;">
            </div>
          </div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px;">
            <div class="form-group">
              <label for="event-contact-name" style="display:block;margin-bottom:8px;font-weight:600;">Contact Name</label>
              <input type="text" id="event-contact-name" name="contact_name" placeholder="Your name" style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;">
            </div>
            <div class="form-group">
              <label for="event-contact-email" style="display:block;margin-bottom:8px;font-weight:600;">Contact Email</label>
              <input type="email" id="event-contact-email" name="contact_email" placeholder="contact@example.com" style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;">
            </div>
          </div>
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-contact-phone" style="display:block;margin-bottom:8px;font-weight:600;">Contact Phone</label>
            <input type="tel" id="event-contact-phone" name="contact_phone" placeholder="+965 XXXX XXXX" style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;">
          </div>
          <div class="form-group" style="margin-bottom:20px;">
            <label for="event-link" style="display:block;margin-bottom:8px;font-weight:600;">Website/Registration Link</label>
            <input type="url" id="event-link" name="link" placeholder="https://example.com" style="width:100%;padding:12px;border-radius:10px;border:1px solid #3a3a3a;background:#121212;color:#eee;font-size:14px;">
          </div>
          <div id="event-error" style="margin-bottom:20px;padding:12px;border-radius:8px;display:none;background:#ff4444;color:#fff;"></div>
        </form>
      </div>
      <div class="event-modal-footer" style="padding:20px;border-top:1px solid #2a2a2a;display:flex;gap:12px;justify-content:flex-end;">
        <button id="cancel-event" style="padding:12px 20px;background:#1a1a1a;border:1px solid #3a3a3a;color:#dcdcdc;border-radius:10px;cursor:pointer;font-weight:500;">Cancel</button>
        <button id="event-submit" style="padding:12px 20px;background:#ff0000;color:#fff;border:2px solid #fff;border-radius:10px;cursor:pointer;font-weight:600;font-size:16px;">CREATE EVENT</button>
      </div>
    </div>
  </div>

  <!-- owner-controls.js removed - not needed for static site -->
  <script type="module" src="/js/owner.js"></script>
  <script type="module" src="/js/bulletins.js"></script>
  <script type="module" src="/js/events.js"></script>

</body>
</html>
