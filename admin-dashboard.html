<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard | Chamber122</title>
  <meta name="description" content="Admin dashboard for managing MSMEs, events, bulletins, and guest submissions">
  <meta name="supabase-url" content="https://gidbvemmqffogakcepka.supabase.co">
  <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZGJ2ZW1tcWZmb2dha2NlcGthIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NjI0MTUsImV4cCI6MjA3MjMzODQxNX0.rFFi4gq5ZUApmJM_FM5nfGpcPCHy9FLedVwmJOEzV1w">
  <link rel="stylesheet" href="css/style.css?v=16">
  <link rel="stylesheet" href="css/admin-dashboard.css">
  <link rel="stylesheet" href="/css/responsive-enhancements.css?v=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Global Header -->
  <div id="site-header"></div>
  
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo site-logo">
        <img src="images/logo.png" alt="Chamber122 Logo">
      </a>
      <div class="nav-actions">
        <!-- Auth CTAs -->
        <div id="auth-cta" class="flex items-center gap-3" data-testid="auth-cta">
          <a href="auth.html#login" class="btn btn-ghost text-sm" data-testid="login-cta" data-i18n="nav.login">Login</a>
          <a href="auth.html#signup" class="btn btn-primary text-sm px-4 py-2 rounded-2xl shadow-sm" data-testid="signup-cta" data-i18n="nav.signup">
            Sign Up & Get Listed
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Admin Dashboard Content -->
  <main class="admin-dashboard" data-testid="admin-dashboard">
    <div class="admin-container">
      <!-- Dashboard Header -->
      <div class="admin-header">
        <div>
        <h1>Admin Dashboard</h1>
          <p>Manage MSMEs, events, bulletins, and website analytics</p>
        </div>
        <div style="display: flex; gap: 10px;">
          <button onclick="adminDashboard.importFromAPI()" class="btn-refresh" style="padding: 10px 20px; background: #10b981; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
            <i class="fas fa-download"></i> Import from API
          </button>
          <button onclick="adminDashboard.loadDashboardData()" class="btn-refresh" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
            <i class="fas fa-sync-alt"></i> Refresh
          </button>
        </div>
      </div>

      <!-- Stats Overview -->
      <div class="admin-stats">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-building"></i>
          </div>
          <div class="stat-content">
            <h3 id="total-msmes">0</h3>
            <p>Total MSMEs</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="stat-content">
            <h3 id="pending-approvals">0</h3>
            <p>Pending Approvals</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-calendar"></i>
          </div>
          <div class="stat-content">
            <h3 id="total-events">0</h3>
            <p>Total Events</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-bullhorn"></i>
          </div>
          <div class="stat-content">
            <h3 id="total-bulletins">0</h3>
            <p>Total Bulletins</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-eye"></i>
          </div>
          <div class="stat-content">
            <h3 id="total-views">0</h3>
            <p>Total Website Views</p>
          </div>
        </div>
      </div>

      <!-- Admin Tabs -->
      <div class="admin-tabs">
        <button class="admin-tab active" data-tab="approvals">User Management</button>
        <button class="admin-tab" data-tab="needs-setup">Needs Setup</button>
        <button class="admin-tab" data-tab="content">Content Management</button>
        <button class="admin-tab" data-tab="analytics">Analytics</button>
      </div>

      <!-- Tab Content -->
      <div class="admin-content">
        <!-- User Management Tab -->
        <div class="admin-tab-content active" id="approvals-tab">
          <div class="admin-section">
            <h2>User Accounts & Documents</h2>
            <p>Review user accounts, documents, and manage approvals.</p>
            
            <!-- Search and Filter Section -->
            <div class="admin-filters" style="margin-bottom: 20px; display: flex; gap: 15px; flex-wrap: wrap; align-items: center; padding: 15px; background: #f9fafb; border-radius: 8px;">
              <div class="filter-group" style="flex: 1; min-width: 200px;">
                <label for="admin-search-input" style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Search</label>
                <input 
                  type="text" 
                  id="admin-search-input" 
                  placeholder="Search by name, email, or business name..." 
                  style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;"
                >
              </div>
              <div class="filter-group" style="flex: 0 0 200px;">
                <label for="admin-status-filter" style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Status</label>
                <select 
                  id="admin-status-filter" 
                  style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; background: white;"
                >
                  <option value="">All Statuses</option>
                  <option value="pending">Pending</option>
                  <option value="approved">Approved</option>
                  <option value="suspended">Suspended</option>
                  <option value="rejected">Rejected</option>
                  <option value="needs_fix">Needs Fix</option>
                  <option value="updated">Updated</option>
                </select>
              </div>
              <div class="filter-group" style="flex: 0 0 auto; align-self: flex-end;">
                <button 
                  id="admin-clear-filters" 
                  class="btn" 
                  style="padding: 8px 16px; background: #6b7280; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;"
                >
                  Clear Filters
                </button>
              </div>
            </div>
            
            <div id="admin-results-count" style="margin-bottom: 10px; color: #6b7280; font-size: 14px;"></div>
            
            <div class="approvals-list" id="approvals-list">
              <!-- Users and documents will be loaded here -->
            </div>
          </div>
        </div>

        <!-- Needs Setup Tab -->
        <div class="admin-tab-content" id="needs-setup-tab">
          <div class="admin-section">
            <h2>Users Needing Setup Assistance</h2>
            <p>Users who tried to publish bulletins but have incomplete accounts.</p>
            <div class="needs-setup-list" id="needs-setup">
              <!-- Needs setup items will be loaded here -->
            </div>
          </div>
        </div>


        <!-- Content Management Tab -->
        <div class="admin-tab-content" id="content-tab">
          <div class="admin-section">
            <h2>Content Management</h2>
            <p>Manage published content, moderate comments, and handle reports.</p>
          </div>
        </div>

        <!-- Analytics Tab -->
        <div class="admin-tab-content" id="analytics-tab">
          <div class="admin-section">
            <h2>Website Analytics</h2>
            <p>View website visitor statistics and page view metrics.</p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
              <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                <h3 style="font-size: 2em; margin: 0; color: #667eea;" id="analytics-total-views">0</h3>
                <p style="margin: 5px 0 0 0; color: #666;">Total Views</p>
              </div>
              <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                <h3 style="font-size: 2em; margin: 0; color: #10b981;" id="analytics-unique-visitors">0</h3>
                <p style="margin: 5px 0 0 0; color: #666;">Unique Visitors</p>
              </div>
              <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                <h3 style="font-size: 2em; margin: 0; color: #f59e0b;" id="analytics-today-views">0</h3>
                <p style="margin: 5px 0 0 0; color: #666;">Today's Views</p>
              </div>
            </div>
            
            <div style="margin-top: 30px;">
              <h3>Page Views by Page</h3>
              <div id="page-views-list" style="margin-top: 15px;">
                <!-- Page views will be loaded here -->
              </div>
            </div>
            
            <div style="margin-top: 30px;">
              <h3>Views Over Time (Last 30 Days)</h3>
              <div id="views-chart" style="margin-top: 15px; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                <!-- Chart will be loaded here -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3 data-i18n="footer.aboutTitle">Chamber122</h3>
        <p data-i18n="footer.about">Connecting Kuwait's MSMEs with opportunities for growth and success. Join our community today.</p>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.quick">Quick Links</h3>
        <div class="quick-links">
          <ul class="quick-links-list">
            <li><a href="index.html" data-i18n="nav.home">Home</a></li>
            <li><a href="directory.html" data-i18n="nav.directory">Directory</a></li>
            <li><a href="events.html" data-i18n="nav.events">Events</a></li>
            <li><a href="bulletin.html" data-i18n="nav.bulletin">Bulletin</a></li>
            <li><a href="about.html" data-i18n="nav.about">About</a></li>
            <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-section">
        <h3 data-i18n="footer.contactInfo">Connect</h3>
        <p><a href="https://instagram.com/chamber_122_kw"><i class="fab fa-instagram"></i> Instagram</a></p>
        <p><a href="https://www.tiktok.com/@chamber122"><i class="fab fa-tiktok"></i> TikTok</a></p>
        <p><a href="https://wa.me/96522396999"><i class="fab fa-whatsapp"></i> Phone</a></p>
        <p><a href="mailto:info@chamber122.com"><i class="fas fa-envelope"></i> info@chamber122.com</a></p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Chamber122. All Rights Reserved. | <span data-i18n="footer.empowering">Empowering Kuwait's MSMEs</span></p>
    </div>
  </footer>

  <script src="js/main.js?v=7"></script>
  <script type="module" src="js/admin-dashboard-standalone.js"></script>
  <script type="module" src="./js/i18n.js"></script>
  
  <link rel="stylesheet" href="css/modal.css">
  <link rel="stylesheet" href="css/header.css?v=1">
</body>
</html>
